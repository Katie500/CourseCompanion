(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./bundles/pdf.js":function(t,e,i){"use strict";i.r(e);i("./modules/pdf.js")},"./modules/pdf.js":function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.sf=window.sf||{},window.sf.pdf=function(t){"use strict";var e=Object.create(null),n=Object.create(null),r=Object.create(null),a=function(){function t(t){this.name=t}return t.get=function(i){return e[i]||(e[i]=new t(i))},t}(),s=function(){function t(t){this.command=t}return t.get=function(e){return n[e]||(n[e]=new t(e))},t}(),o=function(){function t(t,e){this.objectNumber=t,this.generationNumber=e}return t.prototype.toString=function(){return this.objectNumber+" "+this.generationNumber},t.get=function(e,i){var n=0===i?e+"R":e+"R"+i;return r[n]||(r[n]=new t(e,i))},t}(),h=function(){function t(t){void 0===t&&(t=null),this._set=new Set(t&&t._set)}return t.prototype.has=function(t){return this._set.has(t.toString())},t.prototype.put=function(t){this._set.add(t.toString())},t.prototype.remove=function(t){this._set.delete(t.toString())},t.prototype.clear=function(){this._set.clear()},t}(),c=function(){function t(){this._map=new Map}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._map.get(t.toString())},t.prototype.has=function(t){return this._map.has(t.toString())},t.prototype.put=function(t,e){this._map.set(t.toString(),e)},t.prototype.set=function(t,e){this._map.set(t,e)},t.prototype.clear=function(){this._map.clear()},t}(),_=function(){function t(t){this._initialize(t)}return Object.defineProperty(t.prototype,"size",{get:function(){return Object.keys(this._map).length},enumerable:!0,configurable:!0}),t.prototype.assignXref=function(t){this._crossReference=t},t.prototype.getRaw=function(t){return this._map[t]},t.prototype.getRawValues=function(){return this._map.values},t.prototype.get=function(t,e,i){var n=this._get(t,e,i);return this._crossReference&&void 0!==n&&n instanceof o&&(n=this._crossReference._fetch(n)),n},t.prototype.getArray=function(t,e,i){var n=this.get(t,e,i);if(this._crossReference&&void 0!==n&&Array.isArray(n)){n=n.slice();for(var r=0;r<n.length;r++)void 0!==n[r]&&n[r]instanceof o&&(n[r]=this._crossReference._fetch(n[r]))}return n},t.prototype.set=function(t,e){this._map[t]=e},t.prototype.has=function(t){return void 0!==this._map[t]},t.prototype.forEach=function(t){for(var e in this._map)t(e,this.getRaw(e))},t.prototype.update=function(t,e){if(this.has(t)){var i=this._map[t];i instanceof o&&this._crossReference&&(i=this._crossReference._fetch(i)),i!==e&&(this._map[t]=e,this._updated=!0)}else this._map[t]=e,this._updated=!0},t.getEmpty=function(e){var i=new t(e);return i.set=function(t,e){throw new Error("Should not call set on the empty dictionary.")},i},t.merge=function(e,i,n){void 0===n&&(n=!1);for(var r=new t(e),a=Object.create(null),s=0,o=i;s<o.length;s++){if((S=o[s])instanceof t)for(var h=0,c=S._map;h<c.length;h++){var _=c[h],d=_[0],p=_[1],l=a.get(d);if(void 0===l)l=[],a.set(d,l);else if(!(n&&p instanceof t))continue;l.push(p)}}for(var u=0,f=a;u<f.length;u++){var g=f[u],y=g[0],m=g[1];if(1!==m.length&&m[0]instanceof t){for(var b=new t(e),v=0,w=m;v<w.length;v++)for(var S,P=0,A=(S=w[v])._map;P<A.length;P++){var x=A[P];d=x[0],p=x[1];void 0===b._map[d]&&(b._map[d]=p)}b.size>0&&(r._map[y]=b)}else r._map[y]=m[0]}return a.clear(),r.size>0?r:t.getEmpty(e)},t.prototype._initialize=function(t){this._map=Object.create(null),this.suppressEncryption=!1,this._updated=!1,this.isCatalog=!1,this._isNew=!1,t&&(this._crossReference=t)},t.prototype._get=function(t,e,i){var n=this._map[t];return void 0===n&&(n=this._map[e],null!=e?n=this._map[e]:null!=i&&(n=this._map[i])),n},t}(),d=function(t){void 0===t&&(t=[]),this.value=t};function p(){e=Object.create(null),n=Object.create(null),r=Object.create(null)}function l(t,e){return t instanceof a&&(void 0===e||t.name===e)}function u(t,e){return t instanceof s&&(void 0===e||t.command===e)}var f,g,y,m,b,v,w,S,P,A,x,k,T,R,I,F,N,C,B,M,L,O,E,z,D,j,U,V,W,H,G=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),q=function(){function t(){}return t.prototype.getByte=function(){return null},t.prototype.getBytes=function(t){return null},Object.defineProperty(t.prototype,"length",{get:function(){throw new Error("Abstract getter `length` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){throw new Error("Abstract getter `isEmpty` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDataLoaded",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.peekByte=function(){var t=this.getByte();return-1!==t&&this.offset--,t},t.prototype.peekBytes=function(t){var e=this.getBytes(t);return this.offset-=e.length,e},t.prototype.getUnsignedInteger16=function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},t.prototype.getInt32=function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},t.prototype.getByteRange=function(t,e){return null},t.prototype.makeSubStream=function(t,e,i){return null},t.prototype.readBlock=function(){return null},t.prototype.reset=function(){return null},t.prototype.moveStart=function(){return null},t.prototype.getString=function(t){var e=this.getBytes(t);if(null==e||void 0===e.length)throw new Error("Invalid argument for bytesToString");var i=e.length;if(i<8192)return String.fromCharCode.apply(null,e);for(var n=[],r=0;r<i;r+=8192)n.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+8192,i))));return n.join("")},t.prototype.skip=function(t){this.offset+=t||1},t.prototype.getBaseStreams=function(){return null},t}(),K=function(t){function e(e,i,n,r){var a=t.call(this)||this;return a.bytes=e instanceof Uint8Array?e:new Uint8Array(e),a.start=void 0!==n?n:0,a.position=a.start,a.end=n+r||a.bytes.length,a.dictionary=i,a}return G(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.offset},set:function(t){this.offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!0,configurable:!0}),e.prototype.getByte=function(){return this.position>=this.end?-1:this.bytes[this.position++]},e.prototype.getBytes=function(t){var e=this.bytes,i=this.position,n=this.end;if(!t)return e.subarray(i,n);var r=i+t;return r>n&&(r=n),this.position=r,e.subarray(i,r)},e.prototype.getByteRange=function(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)},e.prototype.reset=function(){this.position=this.start},e.prototype.moveStart=function(){this.start=this.position},e.prototype.makeSubStream=function(t,i,n){return void 0===n&&(n=null),new e(this.bytes.buffer,n,t,i)},e.prototype.readBlock=function(){throw new Error("Abstract method `readBlock` called")},e}(q),X=function(t){function e(e){var i=t.call(this)||this;return i._bytes=e,i.dictionary=new _,i.dictionary._updated=!0,i}return G(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this._bytes.length},enumerable:!0,configurable:!0}),e.prototype.write=function(t){if("string"==typeof t)for(var e=0;e<t.length;e++)this._bytes.push(t.charCodeAt(e));else for(e=0;e<t.length;e++)this._bytes.push(t[e]);this.dictionary._updated=!0},e.prototype.getString=function(){var t=new Uint8Array(this._bytes);if(null==t||void 0===t.length)throw new Error("Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var i=[],n=0;n<e;n+=8192)i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+8192,e))));return i.join("")},e}(q),Q=function(t){function e(){return t.call(this,new Uint8Array(0))||this}return G(e,t),e}(K),J=(g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Y=function(t){function e(e){var i=t.call(this)||this;if(i._rawMinBufferLength=e||0,i.offset=0,i.bufferLength=0,i.eof=!1,i.buffer=new Uint8Array(0),i.minBufferLength=512,e)for(;i.minBufferLength<e;)i.minBufferLength*=2;return i}return J(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},enumerable:!0,configurable:!0}),e.prototype.ensureBuffer=function(t){var e=this.buffer;if(t<=e.byteLength)return e;for(var i=this.minBufferLength;i<t;)i*=2;var n=new Uint8Array(i);return n.set(e),this.buffer=n,this.buffer},e.prototype.getByte=function(){for(var t=this.offset;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.offset++]},e.prototype.getBytes=function(t){var e,i=this.offset;if(t){for(this.ensureBuffer(i+t),e=i+t;!this.eof&&this.bufferLength<e;)this.readBlock();var n=this.bufferLength;e>n&&(e=n)}else{for(;!this.eof;)this.readBlock();e=this.bufferLength}return this.offset=e,this.buffer.subarray(i,e)},e.prototype.reset=function(){this.offset=0},e.prototype.makeSubStream=function(t,e,i){if(void 0===e)for(;!this.eof;)this.readBlock();else for(var n=t+e;this.bufferLength<=n&&!this.eof;)this.readBlock();return new K(this.buffer,i,t,e)},e.prototype.getBaseStreams=function(){return this.stream?this.stream.getBaseStreams():null},e.prototype.moveStart=function(){throw new Error("Invalid call from decode stream")},e.prototype.getByteRange=function(t,e){throw new Error("Invalid call from decode stream. begin: "+t+", end: "+e)},e.prototype.readBlock=function(){throw new Error("Invalid call from decode stream")},e}(q),Z=function(t){function e(e,i){void 0===i&&(i=null);for(var n=this,r=0,a=0,s=e;a<s.length;a++){var o=s[a];r+=o instanceof Y?o._rawMinBufferLength:o.length}return(n=t.call(this,r)||this).streams=e,n._onError=i,n}return J(e,t),e.prototype.readBlock=function(){var t=this.streams;if(0!==t.length){var e,i=t.shift();try{e=i.getBytes()}catch(t){if(this._onError)return void this._onError(t,i.dictionary&&i.dictionary.objId);throw t}var n=this.bufferLength,r=n+e.length;this.ensureBuffer(r).set(e,n),this.bufferLength=r}else this.eof=!0},e.prototype.getBaseStreams=function(){for(var t=[],e=0,i=this.streams;e<i.length;e++){var n=i[e].getBaseStreams();n&&t.push.apply(t,n)}return t.length>0?t:null},e.prototype.moveStart=function(){throw new Error("Invalid call from stream sequence stream")},e.prototype.getByteRange=function(t,e){throw new Error("Invalid call from stream sequence stream. begin: "+t+", end: "+e)},e}(Y),$=(y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),tt=function(t){function e(e,i,n){var r=t.call(this,i)||this;return r._chunkSize=512,r.stream=e,r.dictionary=e.dictionary,r._cipher=n,r._nextChunk=null,r._initialized=!1,r}return $(e,t),e.prototype.readBlock=function(){var t;if(this._initialized?t=this._nextChunk:(t=this.stream.getBytes(this._chunkSize),this._initialized=!0),t&&0!==t.length){this._nextChunk=this.stream.getBytes(this._chunkSize);var e=this._nextChunk&&this._nextChunk.length>0;t=this._cipher._decryptBlock(t,!e);for(var i=this.bufferLength,n=t.length,r=this.ensureBuffer(i+n),a=0;a<n;a++)r[i++]=t[Number.parseInt(a.toString(),10)];this.bufferLength=i}else this.eof=!0},e}(Y);(m=t.PdfAnnotationFlag||(t.PdfAnnotationFlag={}))[m.default=0]="default",m[m.invisible=1]="invisible",m[m.hidden=2]="hidden",m[m.print=4]="print",m[m.noZoom=8]="noZoom",m[m.noRotate=16]="noRotate",m[m.noView=32]="noView",m[m.readOnly=64]="readOnly",m[m.locked=128]="locked",m[m.toggleNoView=256]="toggleNoView",(b=t.PdfLineEndingStyle||(t.PdfLineEndingStyle={}))[b.none=0]="none",b[b.openArrow=1]="openArrow",b[b.closedArrow=2]="closedArrow",b[b.rOpenArrow=3]="rOpenArrow",b[b.rClosedArrow=4]="rClosedArrow",b[b.butt=5]="butt",b[b.diamond=6]="diamond",b[b.circle=7]="circle",b[b.square=8]="square",b[b.slash=9]="slash",(v=t.PdfLineIntent||(t.PdfLineIntent={}))[v.lineArrow=0]="lineArrow",v[v.lineDimension=1]="lineDimension",(w=t.PdfLineCaptionType||(t.PdfLineCaptionType={}))[w.inline=0]="inline",w[w.top=1]="top",(S=t.PdfBorderStyle||(t.PdfBorderStyle={}))[S.solid=0]="solid",S[S.dashed=1]="dashed",S[S.beveled=2]="beveled",S[S.inset=3]="inset",S[S.underline=4]="underline",S[S.dot=5]="dot",(P=t.PdfBorderEffectStyle||(t.PdfBorderEffectStyle={}))[P.solid=0]="solid",P[P.cloudy=1]="cloudy",(A=t.PdfRotationAngle||(t.PdfRotationAngle={}))[A.angle0=0]="angle0",A[A.angle90=1]="angle90",A[A.angle180=2]="angle180",A[A.angle270=3]="angle270",(x=t.PdfCrossReferenceType||(t.PdfCrossReferenceType={}))[x.table=0]="table",x[x.stream=1]="stream",(k=t.PdfHighlightMode||(t.PdfHighlightMode={}))[k.noHighlighting=0]="noHighlighting",k[k.invert=1]="invert",k[k.outline=2]="outline",k[k.push=3]="push",(T=t.PdfTextAlignment||(t.PdfTextAlignment={}))[T.left=0]="left",T[T.center=1]="center",T[T.right=2]="right",T[T.justify=3]="justify",(R=t.PdfFormFieldVisibility||(t.PdfFormFieldVisibility={}))[R.visible=0]="visible",R[R.hidden=1]="hidden",R[R.visibleNotPrintable=2]="visibleNotPrintable",R[R.hiddenPrintable=3]="hiddenPrintable",(I=t.PdfMeasurementUnit||(t.PdfMeasurementUnit={}))[I.inch=0]="inch",I[I.pica=1]="pica",I[I.point=3]="point",I[I.centimeter=4]="centimeter",I[I.millimeter=6]="millimeter",(F=t.PdfGraphicsUnit||(t.PdfGraphicsUnit={}))[F.centimeter=0]="centimeter",F[F.pica=1]="pica",F[F.pixel=2]="pixel",F[F.point=3]="point",F[F.inch=4]="inch",F[F.document=5]="document",F[F.millimeter=6]="millimeter",(N=t.PdfCircleMeasurementType||(t.PdfCircleMeasurementType={}))[N.diameter=0]="diameter",N[N.radius=1]="radius",(C=t.PdfRubberStampAnnotationIcon||(t.PdfRubberStampAnnotationIcon={}))[C.approved=0]="approved",C[C.asIs=1]="asIs",C[C.confidential=2]="confidential",C[C.departmental=3]="departmental",C[C.draft=4]="draft",C[C.experimental=5]="experimental",C[C.expired=6]="expired",C[C.final=7]="final",C[C.forComment=8]="forComment",C[C.forPublicRelease=9]="forPublicRelease",C[C.notApproved=10]="notApproved",C[C.notForPublicRelease=11]="notForPublicRelease",C[C.sold=12]="sold",C[C.topSecret=13]="topSecret",C[C.completed=14]="completed",C[C.void=15]="void",C[C.informationOnly=16]="informationOnly",C[C.preliminaryResults=17]="preliminaryResults",(B=t.PdfCheckBoxStyle||(t.PdfCheckBoxStyle={}))[B.check=0]="check",B[B.circle=1]="circle",B[B.cross=2]="cross",B[B.diamond=3]="diamond",B[B.square=4]="square",B[B.star=5]="star",(M=t._FieldFlag||(t._FieldFlag={}))[M.default=0]="default",M[M.readOnly=1]="readOnly",M[M.required=2]="required",M[M.noExport=4]="noExport",M[M.multiLine=4096]="multiLine",M[M.password=8192]="password",M[M.fileSelect=1048576]="fileSelect",M[M.doNotSpellCheck=4194304]="doNotSpellCheck",M[M.doNotScroll=8388608]="doNotScroll",M[M.comb=16777216]="comb",M[M.richText=33554432]="richText",M[M.noToggleToOff=16384]="noToggleToOff",M[M.radio=32768]="radio",M[M.pushButton=65536]="pushButton",M[M.radiosInUnison=33554432]="radiosInUnison",M[M.combo=131072]="combo",M[M.edit=262144]="edit",M[M.sort=524288]="sort",M[M.multiSelect=2097152]="multiSelect",M[M.commitOnSelectChange=67108864]="commitOnSelectChange",(L=t._PdfCheckFieldState||(t._PdfCheckFieldState={}))[L.unchecked=0]="unchecked",L[L.checked=1]="checked",L[L.pressedUnchecked=2]="pressedUnchecked",L[L.pressedChecked=3]="pressedChecked",(O=t.PdfTextMarkupAnnotationType||(t.PdfTextMarkupAnnotationType={}))[O.highlight=0]="highlight",O[O.underline=1]="underline",O[O.squiggly=2]="squiggly",O[O.strikeOut=3]="strikeOut",(E=t.PdfPopupIcon||(t.PdfPopupIcon={}))[E.note=0]="note",E[E.comment=1]="comment",E[E.help=2]="help",E[E.insert=3]="insert",E[E.key=4]="key",E[E.newParagraph=5]="newParagraph",E[E.paragraph=6]="paragraph",(z=t.PdfAnnotationState||(t.PdfAnnotationState={}))[z.none=0]="none",z[z.accepted=1]="accepted",z[z.rejected=2]="rejected",z[z.cancel=3]="cancel",z[z.completed=4]="completed",z[z.marked=5]="marked",z[z.unmarked=6]="unmarked",z[z.unknown=7]="unknown",(D=t.PdfAnnotationStateModel||(t.PdfAnnotationStateModel={}))[D.none=0]="none",D[D.marked=1]="marked",D[D.review=2]="review",(j=t.PdfAttachmentIcon||(t.PdfAttachmentIcon={}))[j.pushPin=0]="pushPin",j[j.tag=1]="tag",j[j.graph=2]="graph",j[j.paperClip=3]="paperClip",(U=t.PdfAnnotationIntent||(t.PdfAnnotationIntent={}))[U.none=0]="none",U[U.freeTextCallout=1]="freeTextCallout",U[U.freeTextTypeWriter=2]="freeTextTypeWriter",(V=t.PdfDestinationMode||(t.PdfDestinationMode={}))[V.location=0]="location",V[V.fitToPage=1]="fitToPage",V[V.fitR=2]="fitR",V[V.fitH=3]="fitH",(W=t.PdfAnnotationType||(t.PdfAnnotationType={}))[W.highlight=0]="highlight",W[W.underline=1]="underline",W[W.strikeOut=2]="strikeOut",W[W.squiggly=3]="squiggly",W[W.redactionAnnotation=4]="redactionAnnotation",W[W.textAnnotation=5]="textAnnotation",W[W.linkAnnotation=6]="linkAnnotation",W[W.documentLinkAnnotation=7]="documentLinkAnnotation",W[W.uriAnnotation=8]="uriAnnotation",W[W.fileLinkAnnotation=9]="fileLinkAnnotation",W[W.freeTextAnnotation=10]="freeTextAnnotation",W[W.lineAnnotation=11]="lineAnnotation",W[W.circleAnnotation=12]="circleAnnotation",W[W.ellipseAnnotation=13]="ellipseAnnotation",W[W.squareAnnotation=14]="squareAnnotation",W[W.rectangleAnnotation=15]="rectangleAnnotation",W[W.polygonAnnotation=16]="polygonAnnotation",W[W.polyLineAnnotation=17]="polyLineAnnotation",W[W.textMarkupAnnotation=18]="textMarkupAnnotation",W[W.caretAnnotation=19]="caretAnnotation",W[W.rubberStampAnnotation=20]="rubberStampAnnotation",W[W.popupAnnotation=21]="popupAnnotation",W[W.fileAttachmentAnnotation=22]="fileAttachmentAnnotation",W[W.soundAnnotation=23]="soundAnnotation",W[W.movieAnnotation=24]="movieAnnotation",W[W.screenAnnotation=25]="screenAnnotation",W[W.widgetAnnotation=26]="widgetAnnotation",W[W.printerMarkAnnotation=27]="printerMarkAnnotation",W[W.trapNetworkAnnotation=28]="trapNetworkAnnotation",W[W.watermarkAnnotation=29]="watermarkAnnotation",W[W.textWebLinkAnnotation=30]="textWebLinkAnnotation",W[W.inkAnnotation=31]="inkAnnotation",W[W.richMediaAnnotation=32]="richMediaAnnotation",W[W.angleMeasurementAnnotation=33]="angleMeasurementAnnotation",W[W.null=34]="null",(H=t.AnnotationDataFormat||(t.AnnotationDataFormat={}))[H.fdf=0]="fdf",H[H.xfdf=1]="xfdf",H[H.json=2]="json";var et,it=function(){function t(t,e){if(this._crossReference=e,t instanceof q){this._content=t,this._content.dictionary.has("Type")&&this._content.dictionary.has("Subtype")||this._initialize();var i=this._content.dictionary.getArray("BBox");if(i&&i.length>3){var n=si(i);this._size=[n.width,n.height]}this._isReadOnly=!0}else this._size=[t[2],t[3]],this._content=new X([]),this._content.dictionary._crossReference=this._crossReference,this._initialize(),this._content.dictionary.set("BBox",[t[0],t[1],t[0]+t[2],t[1]+t[3]]);this._writeTransformation=!0}return Object.defineProperty(t.prototype,"graphics",{get:function(){return this._isReadOnly?null:(void 0===this._g&&(this._g=new Oe(this._size,this._content,this._crossReference,this),this._writeTransformation&&this._g._initializeCoordinates(),this._g._isTemplateGraphics=!0),this._g)},enumerable:!0,configurable:!0}),t.prototype._initialize=function(){this._content.dictionary.set("Type",a.get("XObject")),this._content.dictionary.set("Subtype",a.get("Form"))},t}(),nt=function(){function e(e,i){this.horizontalScalingFactor=100,this.lineLimit=!0,void 0!==e&&(this.alignment=e),this.lineAlignment=void 0!==i?i:t._PdfVerticalAlignment.top,this.characterSpacing=0,this.wordSpacing=0,this.lineSpacing=0,this.clipPath=!1,this.firstLineIndent=0,this._internalParagraphIndent=0,this.measureTrailingSpaces=!1,this.noClip=!1}return Object.defineProperty(e.prototype,"paragraphIndent",{get:function(){return this._internalParagraphIndent},set:function(t){this._internalParagraphIndent=t,this.firstLineIndent=t},enumerable:!0,configurable:!0}),e}();(et=t._PdfVerticalAlignment||(t._PdfVerticalAlignment={}))[et.top=0]="top",et[et.middle=1]="middle",et[et.bottom=2]="bottom";var rt,at,st=(rt=function(t,e){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}rt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ot=function(){function t(){this._lineGap=0}return t.prototype.getAscent=function(){return.001*this._ascent*this._size},t.prototype.getDescent=function(){return.001*this._descent*this._size},t.prototype.getLineGap=function(){return.001*this._lineGap*this._size},t.prototype.getHeight=function(){for(var t=["cambria","candara","constantia","corbel","cariadings"],e=[],i=0;i<t.length;i++)e.push(t[i]);return this.getDescent()<0?this.getAscent()-this.getDescent()+this.getLineGap():this.getAscent()+this.getDescent()+this.getLineGap()},t}(),ht=function(){},ct=function(t){function e(e){var i=t.call(this)||this;return i.widths=e,i}return st(e,t),e.prototype.itemAt=function(t){if(t<0||t>=this.widths.length)throw new Error("The character is not supported by the font.");return this.widths[t]},e.prototype.toArray=function(){return this.widths},e}(ht),_t=function(t){function e(e){var i=t.call(this)||this;return i._defaultWidth=e,i.widths=[],i}return st(e,t),e.prototype.itemAt=function(t){var e=this._defaultWidth;return this.widths.forEach((function(i){t>=i.from&&t<=i.to&&(e=i.itemAt(t))})),e},e.prototype.toArray=function(){var t=[];return this.widths.forEach((function(e){e.appendToArray(t)})),t},e.prototype.add=function(t){this.widths.push(t)},e}(ht),dt=function(){},pt=function(t){function e(e,i,n){var r=t.call(this)||this;return r._from=e,r._to=i,r._width=n,r}return st(e,t),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),e.prototype.itemAt=function(t){if(t<this._from||t>this._to)throw new Error("Index is out of range.");return this._width},e.prototype.appendToArray=function(t){t.push(this._from,this._to,this._width)},e}(dt),lt=function(t){function e(e,i){var n=t.call(this)||this;return n._from=e,n._widths=i,n}return st(e,t),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._from+this._widths.length-1},enumerable:!0,configurable:!0}),e.prototype.itemAt=function(t){if(t<this._from||t>this.to)throw new Error("Index is out of range.");return this._widths[t]},e.prototype.appendToArray=function(t){t.push(this._from),t.forEach((function(e){t.push(e)}))},e}(dt),ut=function(){function e(){}return e.prototype._layout=function(t,e,i,n){this._initialize(t,e,i,n);var r=this._doLayout();return this._clear(),r},e.prototype._initialize=function(t,e,i,n){this._font=e,this._format=i,this._size=n,this._rectangle=[0,0,n[0],n[1]],this._reader=new wt(t),this._pageHeight=0},e.prototype._clear=function(){this._font=null,this._format=null,this._reader._close(),this._reader=null},e.prototype._doLayout=function(){for(var t=new ft,e=new ft,i=[],n=this._reader._peekLine(),r=this._getLineIndent(!0);null!==n;){if(null!=(e=this._layoutLine(n,r))){var a=0,s=this._copyToResult(t,e,i,a),o=s.success;if(a=s.flag,!o){this._reader._read(a);break}}this._reader._readLine(),n=this._reader._peekLine(),r=this._getLineIndent(!1)}return this._finalizeResult(t,i),t},e.prototype._getLineIndent=function(t){var e=0;return this._format&&(e=t?this._format.firstLineIndent:this._format.paragraphIndent,e=this._size[0]>0?Math.min(this._size[0],e):e),e},e.prototype._getLineHeight=function(){var t=this._font._metrics.getHeight();return this._format&&0!==this._format.lineSpacing&&(t=this._format.lineSpacing+this._font._metrics.getHeight()),t},e.prototype._getLineWidth=function(t){return this._font._getLineWidth(t,this._format)},e.prototype._layoutLine=function(e,i){var n=new ft;n._lineHeight=this._getLineHeight();var r=[],a=this._size[0],s=this._getLineWidth(e)+i,o=t._LineType.firstParagraphLine;if(a<=0||Math.round(s)<=Math.round(a))this._addToLineResult(n,r,e,s,t._LineType.newLineBreak|o);else{var h="",c="";s=i;var _=i,d=new wt(e),p=d._peekWord();for(p.length!==d._length&&" "===p&&(c+=p,h+=p,d._position+=1,p=d._peekWord());null!==p;){c+=p;var l=this._getLineWidth(c.toString())+_;if(" "===c.toString()&&(c="",l=0),l>a)break;h+=p,s=l,d._readWord(),p=d._peekWord()}h.length>0&&this._addToLineResult(n,r,h.toString(),s,t._LineType.newLineBreak|t._LineType.lastParagraphLine),d._close()}n._layoutLines=[];for(var u=0;u<r.length;u++)n._layoutLines.push(r[u]);return r=[],n},e.prototype._addToLineResult=function(t,e,i,n,r){var a=new gt;a._text=i,a._width=n,a._lineType=r,e.push(a);var s=t._actualSize;s[1]=s[1]+this._getLineHeight(),s[0]=Math.max(s[0],n),t._size=s},e.prototype._copyToResult=function(t,e,i,n){var r=!0,a=this._format&&!this._format.lineLimit,s=t._actualSize[1],o=this._size[1];if(this._pageHeight>0&&o+this._rectangle[1]>this._pageHeight&&(o=this._rectangle[1]-this._pageHeight,o=Math.max(o,-o)),n=0,null!==e._lines)for(var h=0,c=e._lines.length;h<c;h++){var _=s+e._lineHeight;if(!(_<=o||o<=0||a)){r=!1;break}var d=e._lines[h];n+=d._text.length,d=this._trimLine(d,0===i.length),i.push(d);var p=t._actualSize;p[0]=Math.max(p[0],d._width),t._size=p,s=_}return s!==t._size[1]&&(t._size=[t._actualSize[0],s]),{success:r,flag:n}},e.prototype._finalizeResult=function(t,e){t._layoutLines=[];for(var i=0;i<e.length;i++)t._layoutLines.push(e[i]);t._lineHeight=this._getLineHeight(),this._reader._end||(t._remainder=this._reader._readToEnd()),e=[]},e.prototype._trimLine=function(e,i){var n=e._text.trim(),r=e._width;return n.length!==e._text.length&&(r=this._getLineWidth(n),(e._lineType&t._LineType.firstParagraphLine)>0&&(r+=this._getLineIndent(i))),e._text=n,e._width=r,e},e}(),ft=function(){function t(){}return Object.defineProperty(t.prototype,"_actualSize",{get:function(){return void 0===this._size&&(this._size=[0,0]),this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_lines",{get:function(){return this._layoutLines},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_empty",{get:function(){return null==this._layoutLines||0===this._layoutLines.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_lineCount",{get:function(){return this._empty?0:this._layoutLines.length},enumerable:!0,configurable:!0}),t}(),gt=function(){};(at=t._LineType||(t._LineType={}))[at.none=0]="none",at[at.newLineBreak=1]="newLineBreak",at[at.layoutBreak=2]="layoutBreak",at[at.firstParagraphLine=4]="firstParagraphLine",at[at.lastParagraphLine=8]="lastParagraphLine";var yt,mt,bt,vt,wt=function(){function t(t){if(this._position=0,null==t)throw new Error("ArgumentNullException:text");this._text=t}return Object.defineProperty(t.prototype,"_length",{get:function(){return this._text.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_end",{get:function(){return this._position===this._text.length},enumerable:!0,configurable:!0}),t.prototype._readLine=function(){for(var t=this._position;t<this._length;){var e=this._text[t],i=void 0;switch(e){case"\r":case"\n":return i=this._text.substring(this._position,t),this._position=t+1,"\r"===e&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,i}t++}if(t>this._position){var n=this._text.substring(this._position,t);return this._position=t,n}return null},t.prototype._peekLine=function(){var t=this._position,e=this._readLine();return this._position=t,e},t.prototype._readWord=function(){for(var t=this._position;t<this._length;){var e=this._text[t],i=void 0;switch(e){case"\r":case"\n":return i=this._text.substring(this._position,t-this._position),this._position=t+1,"\r"===e&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,i;case" ":case"\t":return t===this._position&&t++,i=this._text.substring(this._position,t),this._position=t,i}t++}if(t>this._position){var n=this._text.substring(this._position,t);return this._position=t,n}return null},t.prototype._peekWord=function(){var t=this._position,e=this._readWord();return this._position=t,e},t.prototype._read=function(t){if(void 0===t){var e="0";return this._end||(e=this._text[this._position],this._position++),e}for(var i=0,n="";!this._end&&i<t;)n+=this._read(),i++;return n},t.prototype._peek=function(){return this._end?"0":this._text[this._position]},t.prototype._close=function(){this._text=null},t.prototype._readToEnd=function(){var t;return t=0===this._position?this._text:this._text.substring(this._position),this._position=this._length,t},t}(),St=(yt=function(t,e){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}yt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Pt=function(){function e(){}return Object.defineProperty(e.prototype,"_underline",{get:function(){return(this._style&t._PdfFontStyle.underline)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_strikeout",{get:function(){return(this._style&t._PdfFontStyle.strikeout)>0},enumerable:!0,configurable:!0}),e.prototype._getCharsCount=function(t,e){if("string"==typeof e){var i=0,n=0;for(n=t.indexOf(e,n);-1!==n;)i++,n++,n=t.indexOf(e,n);return i}for(var r=0,a=0;a<t.length;a++)-1!==e.indexOf(t[a])&&r++;return r},e.prototype._measureString=function(t,e,i,n,r){var a=(new ut)._layout(t,this,e,i);return void 0===a._remainder||null===a._remainder?t.length:t.length-a._remainder.length,a._empty?0:a._lines.length,a._actualSize},e.prototype._applyFormatSettings=function(t,e,i){var n=i;return null!=e&&i>0&&(0!==e.characterSpacing&&(n+=(t.length-1)*e.characterSpacing),0!==e.wordSpacing&&(n+=this._getCharsCount(t,[" ","\t"])*e.wordSpacing)),n},e}(),At=function(e){function i(i,n,r){var a=e.call(this)||this;return a._fontFamily=i,a._size=n,a._style=void 0===r?t._PdfFontStyle.regular:r,a._checkStyle(),a._initializeInternals(),a}return St(i,e),i.prototype._checkStyle=function(){this._fontFamily!==t._PdfFontFamily.symbol&&this._fontFamily!==t._PdfFontFamily.zapfDingbats||(this._style&=~(t._PdfFontStyle.bold|t._PdfFontStyle.italic))},i.prototype._getLineWidth=function(t,e){for(var i=0,n=0,r=t.length;n<r;n++)i+=this._getCharWidthInternal(t[n]);return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},i.prototype._initializeInternals=function(){this._metrics=kt._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},i.prototype._createInternals=function(){var e=new _;return e._updated=!0,e.set("Type",a.get("Font")),e.set("Subtype",a.get("Type1")),e.set("BaseFont",new a(this._metrics._postScriptName)),this._fontFamily!==t._PdfFontFamily.symbol&&this._fontFamily!==t._PdfFontFamily.zapfDingbats&&e.set("Encoding",new a("WinAnsiEncoding")),e},i.prototype._getCharWidthInternal=function(t){var e=0;return e=t.charCodeAt(0),"0"!==this._metrics._name&&"1"!==this._metrics._name&&"2"!==this._metrics._name&&"3"!==this._metrics._name&&"4"!==this._metrics._name||(e-=32),e=e>=0&&128!==e?e:0,this._metrics._widthTable.itemAt(e)},i}(Pt),xt=function(e){function i(i,n,r){var a=e.call(this)||this;return a._fontFamily=i,a._size=n,a._style=void 0===r?t._PdfFontStyle.regular:r,a._initializeInternals(),a}return St(i,e),i.prototype._initializeInternals=function(){this._metrics=Tt._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},i.prototype._createInternals=function(){var t=new _;return t._updated=!0,t.set("Type",a.get("Font")),t.set("Subtype",a.get("Type0")),t.set("BaseFont",new a(this._metrics._postScriptName)),t.set("Encoding",this._getEncoding(this._fontFamily)),t.set("DescendantFonts",this._getDescendantFont()),t},i.prototype._getEncoding=function(e){var i="Unknown";switch(e){case t._PdfCjkFontFamily.hanyangSystemsGothicMedium:case t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:i="UniKS-UCS2-H";break;case t._PdfCjkFontFamily.heiseiKakuGothicW5:case t._PdfCjkFontFamily.heiseiMinchoW3:i="UniJIS-UCS2-H";break;case t._PdfCjkFontFamily.monotypeHeiMedium:case t._PdfCjkFontFamily.monotypeSungLight:i="UniCNS-UCS2-H";break;case t._PdfCjkFontFamily.sinoTypeSongLight:i="UniGB-UCS2-H"}return new a(i)},i.prototype._getDescendantFont=function(){var t=new _;return t._updated=!0,t.set("Type",a.get("Font")),t.set("Subtype",a.get("CIDFontType2")),t.set("BaseFont",new a(this._metrics._postScriptName)),t.set("DW",this._metrics._widthTable._defaultWidth),t.set("W",this._metrics._widthTable.toArray()),t.set("FontDescriptor",Rt._getFontDescriptor(this._fontFamily,this._style,this._metrics)),t.set("CIDSystemInfo",this._getSystemInformation()),[t]},i.prototype._getSystemInformation=function(){var e=new _;switch(e._updated=!0,e.set("Registry","Adobe"),this._fontFamily){case t._PdfCjkFontFamily.hanyangSystemsGothicMedium:case t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:e.set("Ordering","Korea1"),e.set("Supplement",1);break;case t._PdfCjkFontFamily.heiseiKakuGothicW5:case t._PdfCjkFontFamily.heiseiMinchoW3:e.set("Ordering","Japan1"),e.set("Supplement",2);break;case t._PdfCjkFontFamily.monotypeHeiMedium:case t._PdfCjkFontFamily.monotypeSungLight:e.set("Ordering","CNS1"),e.set("Supplement","0");break;case t._PdfCjkFontFamily.sinoTypeSongLight:e.set("Ordering","GB1"),e.set("Supplement",2)}return e},i.prototype._getLineWidth=function(t,e){for(var i=0,n=0;n<t.length;n++)i+=this._getCharWidthInternal(t.charCodeAt(n));return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},i.prototype._getCharWidthInternal=function(t){return t=t>=0?t:0,this._metrics._widthTable.itemAt(t)},i}(Pt),kt=function(){function e(){}return e._getMetrics=function(e,i,n){var r=null;switch(e){case t._PdfFontFamily.helvetica:r=this._getHelveticaMetrics(i,n);break;case t._PdfFontFamily.courier:r=this._getCourierMetrics(i,n);break;case t._PdfFontFamily.timesRoman:r=this._getTimesMetrics(i,n);break;case t._PdfFontFamily.symbol:r=this._getSymbolMetrics(n);break;case t._PdfFontFamily.zapfDingbats:r=this._getZapfDingbatsMetrics(n);break;default:r=this._getHelveticaMetrics(i,n)}return r._name=e.toString(),r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},e._getHelveticaMetrics=function(e,i){var n=new ot;return(e&t._PdfFontStyle.bold)>0&&(e&t._PdfFontStyle.italic)>0?(n._ascent=this._helveticaBoldItalicAscent,n._descent=this._helveticaBoldItalicDescent,n._postScriptName=this._helveticaBoldItalicName,n._size=i,n._widthTable=new ct(this._arialBoldWidth),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.bold)>0?(n._ascent=this._helveticaBoldAscent,n._descent=this._helveticaBoldDescent,n._postScriptName=this._helveticaBoldName,n._size=i,n._widthTable=new ct(this._arialBoldWidth),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.italic)>0?(n._ascent=this._helveticaItalicAscent,n._descent=this._helveticaItalicDescent,n._postScriptName=this._helveticaItalicName,n._size=i,n._widthTable=new ct(this._arialWidth),n._height=n._ascent-n._descent):(n._ascent=this._helveticaAscent,n._descent=this._helveticaDescent,n._postScriptName=this._helveticaName,n._size=i,n._widthTable=new ct(this._arialWidth),n._height=n._ascent-n._descent),n},e._getCourierMetrics=function(e,i){var n=new ot;return(e&t._PdfFontStyle.bold)>0&&(e&t._PdfFontStyle.italic)>0?(n._ascent=this._courierBoldItalicAscent,n._descent=this._courierBoldItalicDescent,n._postScriptName=this._courierBoldItalicName,n._size=i,n._widthTable=new ct(this._fixedWidth),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.bold)>0?(n._ascent=this._courierBoldAscent,n._descent=this._courierBoldDescent,n._postScriptName=this._courierBoldName,n._size=i,n._widthTable=new ct(this._fixedWidth),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.italic)>0?(n._ascent=this._courierItalicAscent,n._descent=this._courierItalicDescent,n._postScriptName=this._courierItalicName,n._size=i,n._widthTable=new ct(this._fixedWidth),n._height=n._ascent-n._descent):(n._ascent=this._courierAscent,n._descent=this._courierDescent,n._postScriptName=this._courierName,n._size=i,n._widthTable=new ct(this._fixedWidth),n._height=n._ascent-n._descent),n},e._getTimesMetrics=function(e,i){var n=new ot;return(e&t._PdfFontStyle.bold)>0&&(e&t._PdfFontStyle.italic)>0?(n._ascent=this._timesBoldItalicAscent,n._descent=this._timesBoldItalicDescent,n._postScriptName=this._timesBoldItalicName,n._size=i,n._widthTable=new ct(this._timesRomanBoldItalicWidths),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.bold)>0?(n._ascent=this._timesBoldAscent,n._descent=this._timesBoldDescent,n._postScriptName=this._timesBoldName,n._size=i,n._widthTable=new ct(this._timesRomanBoldWidth),n._height=n._ascent-n._descent):(e&t._PdfFontStyle.italic)>0?(n._ascent=this._timesItalicAscent,n._descent=this._timesItalicDescent,n._postScriptName=this._timesItalicName,n._size=i,n._widthTable=new ct(this._timesRomanItalicWidth),n._height=n._ascent-n._descent):(n._ascent=this._timesAscent,n._descent=this._timesDescent,n._postScriptName=this._timesName,n._size=i,n._widthTable=new ct(this._timesRomanWidth),n._height=n._ascent-n._descent),n},e._getSymbolMetrics=function(t){var e=new ot;return e._ascent=this._symbolAscent,e._descent=this._symbolDescent,e._postScriptName=this._symbolName,e._size=t,e._widthTable=new ct(this._symbolWidth),e._height=e._ascent-e._descent,e},e._getZapfDingbatsMetrics=function(t){var e=new ot;return e._ascent=this._zapfDingbatsAscent,e._descent=this._zapfDingbatsDescent,e._postScriptName=this._zapfDingbatsName,e._size=t,e._widthTable=new ct(this._zapfDingbatsWidth),e._height=e._ascent-e._descent,e},e._subSuperScriptFactor=1.52,e._helveticaAscent=931,e._helveticaDescent=-225,e._helveticaName="Helvetica",e._helveticaBoldAscent=962,e._helveticaBoldDescent=-228,e._helveticaBoldName="Helvetica-Bold",e._helveticaItalicAscent=931,e._helveticaItalicDescent=-225,e._helveticaItalicName="Helvetica-Oblique",e._helveticaBoldItalicAscent=962,e._helveticaBoldItalicDescent=-228,e._helveticaBoldItalicName="Helvetica-BoldOblique",e._courierAscent=805,e._courierDescent=-250,e._courierName="Courier",e._courierBoldAscent=801,e._courierBoldDescent=-250,e._courierBoldName="Courier-Bold",e._courierItalicAscent=805,e._courierItalicDescent=-250,e._courierItalicName="Courier-Oblique",e._courierBoldItalicAscent=801,e._courierBoldItalicDescent=-250,e._courierBoldItalicName="Courier-BoldOblique",e._timesAscent=898,e._timesDescent=-218,e._timesName="Times-Roman",e._timesBoldAscent=935,e._timesBoldDescent=-218,e._timesBoldName="Times-Bold",e._timesItalicAscent=883,e._timesItalicDescent=-217,e._timesItalicName="Times-Italic",e._timesBoldItalicAscent=921,e._timesBoldItalicDescent=-218,e._timesBoldItalicName="Times-BoldItalic",e._symbolAscent=1010,e._symbolDescent=-293,e._symbolName="Symbol",e._zapfDingbatsAscent=820,e._zapfDingbatsDescent=-143,e._zapfDingbatsName="ZapfDingbats",e._arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],e._arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],e._fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],e._timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],e._timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],e._timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],e._timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],e._symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],e._zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918],e}(),Tt=function(){function e(){}return e._getHanyangSystemsGothicMedium=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,127,500)),r.add(new pt(8094,8190,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HYGoThic-Medium,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="HYGoThic-Medium,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HYGoThic-Medium,Italic":n._postScriptName="HYGoThic-Medium",n},e._getHanyangSystemsShinMyeongJoMedium=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(8094,8190,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HYSMyeongJo-Medium,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="HYSMyeongJo-Medium,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HYSMyeongJo-Medium,Italic":n._postScriptName="HYSMyeongJo-Medium",n},e._getHeiseiKakuGothicW5=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(231,632,500)),n._widthTable=r,n._ascent=857,n._descent=-125,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HeiseiKakuGo-W5,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="HeiseiKakuGo-W5,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HeiseiKakuGo-W5,Italic":n._postScriptName="HeiseiKakuGo-W5",n},e._getHeiseiMinchoW3=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(231,632,500)),n._widthTable=r,n._ascent=857,n._descent=-143,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HeiseiMin-W3,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="HeiseiMin-W3,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="HeiseiMin-W3,Italic":n._postScriptName="HeiseiMin-W3",n},e._getMonotypeHeiMedium=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(13648,13742,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="MHei-Medium,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="MHei-Medium,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="MHei-Medium,Italic":n._postScriptName="MHei-Medium",n},e._getMonotypeSungLight=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(13648,13742,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="MSung-Light,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="MSung-Light,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="MSung-Light,Italic":n._postScriptName="MSung-Light",n},e._getSinoTypeSongLight=function(e,i){var n=new ot,r=new _t(1e3);return r.add(new pt(1,95,500)),r.add(new pt(814,939,500)),r.add(new lt(7712,[500])),r.add(new lt(7716,[500])),n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t._PdfFontStyle.bold)&&0!=(e&t._PdfFontStyle.italic)?n._postScriptName="STSong-Light,BoldItalic":0!=(e&t._PdfFontStyle.bold)?n._postScriptName="STSong-Light,Bold":0!=(e&t._PdfFontStyle.italic)?n._postScriptName="STSong-Light,Italic":n._postScriptName="STSong-Light",n._widthTable=r,n},e._getMetrics=function(e,i,n){var r;switch(e){case t._PdfCjkFontFamily.hanyangSystemsGothicMedium:(r=this._getHanyangSystemsGothicMedium(i,n))._name="HanyangSystemsGothicMedium";break;case t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:(r=this._getHanyangSystemsShinMyeongJoMedium(i,n))._name="HanyangSystemsShinMyeongJoMedium";break;case t._PdfCjkFontFamily.heiseiKakuGothicW5:(r=this._getHeiseiKakuGothicW5(i,n))._name="HeiseiKakuGothicW5";break;case t._PdfCjkFontFamily.heiseiMinchoW3:(r=this._getHeiseiMinchoW3(i,n))._name="HeiseiMinchoW3";break;case t._PdfCjkFontFamily.monotypeHeiMedium:(r=this._getMonotypeHeiMedium(i,n))._name="MonotypeHeiMedium";break;case t._PdfCjkFontFamily.monotypeSungLight:(r=this._getMonotypeSungLight(i,n))._name="MonotypeSungLight";break;case t._PdfCjkFontFamily.sinoTypeSongLight:(r=this._getSinoTypeSongLight(i,n))._name="SinoTypeSongLight"}return r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},e._subSuperScriptFactor=1.52,e}(),Rt=function(){function e(){}return e._fillMonotypeSungLight=function(t,e,i){this._fillFontBox(t,{x:-160,y:-249,width:1175,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHeiseiKakuGothicW5=function(e,i,n,r){(i&(t._PdfFontStyle.italic|t._PdfFontStyle.bold))!==t._PdfFontStyle.italic?this._fillFontBox(e,{x:-92,y:-250,width:1102,height:1172}):this._fillFontBox(e,{x:-92,y:-250,width:1102,height:1932}),this._fillKnownInformation(e,n,r),e.set("StemV",93),e.set("StemH",93),e.set("AvgWidth",689),e.set("MaxWidth",1e3),e.set("CapHeight",718),e.set("XHeight",500),e.set("Leading",250)},e._fillHanyangSystemsShinMyeongJoMedium=function(t,e,i){this._fillFontBox(t,{x:0,y:-148,width:1001,height:1028}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHeiseiMinchoW3=function(t,e,i){this._fillFontBox(t,{x:-123,y:-257,width:1124,height:1167}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",702),t.set("MaxWidth",1e3),t.set("CapHeight",718),t.set("XHeight",500),t.set("Leading",250)},e._fillSinoTypeSongLight=function(t,e,i){this._fillFontBox(t,{x:-25,y:-254,width:1025,height:1134}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillMonotypeHeiMedium=function(t,e,i){this._fillFontBox(t,{x:-45,y:-250,width:1060,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHanyangSystemsGothicMedium=function(t,e,i){this._fillFontBox(t,{x:-6,y:-145,width:1009,height:1025}),this._fillKnownInformation(t,e,i),t.set("Flags",4),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillFontBox=function(t,e){t.set("FontBBox",oi(e))},e._fillKnownInformation=function(e,i,n){switch(e.set("FontName",a.get(n._postScriptName)),e.set("Type",a.get("FontDescriptor")),e.set("ItalicAngle",0),e.set("MissingWidth",n._widthTable._defaultWidth),e.set("Ascent",n._ascent),e.set("Descent",n._descent),i){case t._PdfCjkFontFamily.monotypeHeiMedium:case t._PdfCjkFontFamily.hanyangSystemsGothicMedium:case t._PdfCjkFontFamily.heiseiKakuGothicW5:e.set("Flags",4);break;case t._PdfCjkFontFamily.sinoTypeSongLight:case t._PdfCjkFontFamily.monotypeSungLight:case t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:case t._PdfCjkFontFamily.heiseiMinchoW3:e.set("Flags",6)}},e._getFontDescriptor=function(e,i,n){var r=new _;switch(r._updated=!0,e){case t._PdfCjkFontFamily.hanyangSystemsGothicMedium:this._fillHanyangSystemsGothicMedium(r,e,n);break;case t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:this._fillHanyangSystemsShinMyeongJoMedium(r,e,n);break;case t._PdfCjkFontFamily.heiseiKakuGothicW5:this._fillHeiseiKakuGothicW5(r,i,e,n);break;case t._PdfCjkFontFamily.heiseiMinchoW3:this._fillHeiseiMinchoW3(r,e,n);break;case t._PdfCjkFontFamily.monotypeHeiMedium:this._fillMonotypeHeiMedium(r,e,n);break;case t._PdfCjkFontFamily.monotypeSungLight:this._fillMonotypeSungLight(r,e,n);break;case t._PdfCjkFontFamily.sinoTypeSongLight:this._fillSinoTypeSongLight(r,e,n)}return r},e}();(mt=t._PdfFontStyle||(t._PdfFontStyle={}))[mt.regular=0]="regular",mt[mt.bold=1]="bold",mt[mt.italic=2]="italic",mt[mt.underline=4]="underline",mt[mt.strikeout=8]="strikeout",(bt=t._PdfFontFamily||(t._PdfFontFamily={}))[bt.helvetica=0]="helvetica",bt[bt.courier=1]="courier",bt[bt.timesRoman=2]="timesRoman",bt[bt.symbol=3]="symbol",bt[bt.zapfDingbats=4]="zapfDingbats",(vt=t._PdfCjkFontFamily||(t._PdfCjkFontFamily={}))[vt.heiseiKakuGothicW5=0]="heiseiKakuGothicW5",vt[vt.heiseiMinchoW3=1]="heiseiMinchoW3",vt[vt.hanyangSystemsGothicMedium=2]="hanyangSystemsGothicMedium",vt[vt.hanyangSystemsShinMyeongJoMedium=3]="hanyangSystemsShinMyeongJoMedium",vt[vt.monotypeHeiMedium=4]="monotypeHeiMedium",vt[vt.monotypeSungLight=5]="monotypeSungLight",vt[vt.sinoTypeSongLight=6]="sinoTypeSongLight";var It,Ft=function(){function e(){this._fillMode=t._PdfFillMode.winding,this._points=[],this._pathTypes=[],this._isStart=!0}return Object.defineProperty(e.prototype,"_lastPoint",{get:function(){var t=[0,0],e=this._points.length;return this._points.length>0&&(t[0]=this._points[e-1][0],t[1]=this._points[e-1][0]),t},enumerable:!0,configurable:!0}),e.prototype._addLine=function(e,i,n,r){this._addPoints([e,i,n,r],t._PathPointType.line)},e.prototype._addLines=function(e){var i=e[0];if(1===e.length)this._addPoint(e[0],t._PathPointType.line);else for(var n=1;n<e.length;n++){var r=e[Number.parseInt(n.toString(),10)];this._addLine(i[0],i[1],r[0],r[1]),i=r}},e.prototype._addPoints=function(e,i,n,r){for(var a=void 0!==n?n:0,s=void 0!==r?r:e.length,o=a;o<s;o++){var h=[e[Number.parseInt(o.toString(),10)],e[o+1]];o===a?0===this._points.length||this._isStart?(this._addPoint(h,t._PathPointType.start),this._isStart=!1):h[0]!==this._lastPoint[0]&&h[1]!==this._lastPoint[1]&&this._addPoint(h,t._PathPointType.line):this._addPoint(h,i),o++}},e.prototype._addPoint=function(t,e){this._points.push(t),this._pathTypes.push(e)},e.prototype._addArc=function(e,i,n,r,a,s){for(var o=Pi(e,i,e+n,i+r,a,s),h=0;h<o.length;++h){var c=[o[Number.parseInt(h.toString(),10)],o[++h],o[++h],o[++h],o[++h],o[++h],o[++h],o[++h]];this._addPoints(c,t._PathPointType.bezier)}},e.prototype._addRectangle=function(e,i,n,r){this._startFigure(),this._addPoints([e,i,e+n,i,e+n,i+r,e,i+r],t._PathPointType.line),this._closeFigure()},e.prototype._addPolygon=function(e){var i=[];e.forEach((function(t){i.push(t[0],t[1])})),this._startFigure(),this._addPoints(i,t._PathPointType.line),this._closeFigure()},e.prototype._addEllipse=function(t,e,i,n){this._startFigure(),this._addArc(t,e,i,n,0,360),this._closeFigure()},e.prototype._addBezierPoints=function(t){if(t.length<4)throw Error("Incorrect size of array points");var e=0,i=t[Number.parseInt(e.toString(),10)];for(e++;e+3<=t.length;){var n=t[Number.parseInt(e.toString(),10)];e++;var r=t[Number.parseInt(e.toString(),10)];e++;var a=t[Number.parseInt(e.toString(),10)];e++,this._addBezier(i[0],i[1],n[0],n[1],r[0],r[1],a[0],a[1]),i=a}},e.prototype._addBezier=function(e,i,n,r,a,s,o,h){var c=[];c.push(e),c.push(i),c.push(n),c.push(r),c.push(a),c.push(s),c.push(o),c.push(h),this._addPoints(c,t._PathPointType.bezier)},e.prototype._closeFigure=function(e){if(void 0!==e){var i=this._pathTypes[Number.parseInt(e.toString(),10)];i|=t._PathPointType.closePath,this._pathTypes[Number.parseInt(e.toString(),10)]=i}else this._points.length>0&&this._closeFigure(this._points.length-1),this._startFigure()},e.prototype._startFigure=function(){this._isStart=!0},e.prototype._getBounds=function(){var t=[0,0,0,0];if(this._points.length>0){for(var e=this._points[0][0],i=this._points[0][0],n=this._points[0][1],r=this._points[0][1],a=1;a<this._points.length;++a){var s=this._points[Number.parseInt(a.toString(),10)];e=Math.min(s[0],e),i=Math.max(s[0],i),n=Math.min(s[1],n),r=Math.max(s[1],r)}t=[e,n,i-e,r-n]}return t},e}();(It=t._PathPointType||(t._PathPointType={}))[It.start=0]="start",It[It.line=1]="line",It[It.bezier=3]="bezier",It[It.pathTypeMask=7]="pathTypeMask",It[It.dashMode=16]="dashMode",It[It.pathMarker=32]="pathMarker",It[It.closePath=128]="closePath";var Nt,Ct,Bt,Mt,Lt,Ot,Et,zt,Dt=(Nt=function(t,e){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Nt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),jt=function(){function e(){this._visible=!0}return Object.defineProperty(e.prototype,"itemsCount",{get:function(){return this._kids?this._kids.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){if(void 0===this._name){var t=ni(this._dictionary,"T",!1,!1,"Parent");t&&t.length>0&&(1===t.length?this._name=t[0]:this._name=t.join("."))}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualName",{get:function(){if(void 0===this._actualName&&this._dictionary.has("T")){var t=this._dictionary.get("T");t&&"string"==typeof t&&(this._actualName=t)}return this._actualName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mappingName",{get:function(){if(void 0===this._mappingName&&this._dictionary.has("TM")){var t=this._dictionary.get("TM");t&&"string"==typeof t&&(this._mappingName=t)}return this._mappingName},set:function(t){void 0!==this.mappingName&&this._mappingName===t||(this._mappingName=t,this._dictionary.update("TM",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolTip",{get:function(){if(void 0===this._alternateName&&this._dictionary.has("TU")){var t=this._dictionary.get("TU");t&&"string"==typeof t&&(this._alternateName=t)}return this._alternateName},set:function(t){void 0!==this.toolTip&&this._alternateName===t||(this._alternateName=t,this._dictionary.update("TU",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){var e;if(this._isLoaded){e=t.PdfFormFieldVisibility.visible;var i=this.itemAt(this._defaultIndex),n=t.PdfAnnotationFlag.default;if(i&&i._hasFlags)n=i.flags;else{if(!this._dictionary.has("F"))return t.PdfFormFieldVisibility.visibleNotPrintable;n=this._dictionary.get("F")}var r=3;switch((n&t.PdfAnnotationFlag.hidden)===t.PdfAnnotationFlag.hidden&&(r=0),(n&t.PdfAnnotationFlag.noView)===t.PdfAnnotationFlag.noView&&(r=1),(n&t.PdfAnnotationFlag.print)!==t.PdfAnnotationFlag.print&&(r&=2),r){case 0:e=t.PdfFormFieldVisibility.hidden;break;case 1:e=t.PdfFormFieldVisibility.hiddenPrintable;break;case 2:e=t.PdfFormFieldVisibility.visibleNotPrintable;break;case 3:e=t.PdfFormFieldVisibility.visible}}else void 0===this._visibility&&(this._visibility=t.PdfFormFieldVisibility.visible),e=this._visibility;return e},set:function(e){var i=this.itemAt(this._defaultIndex);if(this._isLoaded)!i||i._hasFlags&&this.visibility===e?this._dictionary.has("F")&&this.visibility===e||(this._updateVisibility(this._dictionary,e),this._dictionary._updated=!0):(this._updateVisibility(i._dictionary,e),this._dictionary._updated=!0);else if(this.visibility!==e)switch(this._visibility=e,e){case t.PdfFormFieldVisibility.hidden:i.flags=t.PdfAnnotationFlag.hidden;break;case t.PdfFormFieldVisibility.hiddenPrintable:i.flags=t.PdfAnnotationFlag.noView|t.PdfAnnotationFlag.print;break;case t.PdfFormFieldVisibility.visible:i.flags=t.PdfAnnotationFlag.print;break;case t.PdfFormFieldVisibility.visibleNotPrintable:i.flags=t.PdfAnnotationFlag.default}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=ai(this._dictionary,this.page)),t},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded&&(void 0===e||this._dictionary.has("Rect"))?this._dictionary.update("Rect",hi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationAngle",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&void 0!==e.rotationAngle)t=e.rotationAngle;else if(this._dictionary.has("R"))t=this._dictionary.get("R");else for(var i=0;i<this.itemsCount&&void 0===t;i++)i!==this._defaultIndex&&(e=this.itemAt(i))&&void 0!==e.rotationAngle&&(t=e.rotationAngle);return void 0===t&&(t=0),t},set:function(t){var e=this.itemAt(this._defaultIndex);e?e.rotationAngle=t:this._dictionary.has("R")&&this._dictionary.get("R")===t||this._dictionary.update("R",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&e.color?t=e.color:this._defaultAppearance&&(t=this._da.color),t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.color)e.color=t;else{var i=!1;this._defaultAppearance||(this._da=new Xt(""),i=!0),(i||this._da.color!==t)&&(this._da.color=t,this._dictionary.update("DA",this._da.toString()))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backColor",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&e.backColor)t=e.backColor;else if(this._mkDictionary){var i=this._mkDictionary;if(i&&i.has("BG")){var n=i.getArray("BG");n&&(t=_i(n))}}return t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.backColor!==t)e.backColor=t;else{var i=this._mkDictionary;if(void 0===i){var n=new _(this._crossReference);n.update("BG",t),this._dictionary.update("MK",n)}else i.has("BG")&&_i(i.getArray("BG"))===t||(i.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0)}this._backColorSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&e.borderColor)t=e.borderColor;else if(this._mkDictionary){var i=this._mkDictionary;if(i&&i.has("BC")){var n=i.getArray("BC");n&&(t=_i(n))}}return t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.borderColor!==t)e.borderColor=t;else{var i=this._mkDictionary;if(void 0===i){var n=new _(this._crossReference);n.update("BC",t),this._dictionary.update("MK",n)}else i.has("BC")&&_i(i.getArray("BC"))===t||(i.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.readOnly)},set:function(e){e?this._fieldFlags|=t._FieldFlag.readOnly:(this._fieldFlags===t._FieldFlag.readOnly&&(this._fieldFlags|=t._FieldFlag.default),this._fieldFlags&=~t._FieldFlag.readOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.required)},set:function(e){e?this._fieldFlags|=t._FieldFlag.required:this._fieldFlags&=~t._FieldFlag.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex),i=t.PdfAnnotationFlag.default;return e&&e._hasFlags?i=e.flags:this._dictionary.has("F")&&(i=this._dictionary.get("F")),i!==t.PdfAnnotationFlag.hidden}return this._visible},set:function(e){this._isLoaded||this._visible===e||e||(this._visible=e,this.itemAt(this._defaultIndex).flags=t.PdfAnnotationFlag.hidden)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&i._dictionary.has("BS"))e=i.border;else if((e=new Te)._dictionary=this._dictionary,this._dictionary.has("BS")){var n=this._dictionary.get("BS");if(n){if(n.has("W")&&(e._width=n.get("W")),n.has("S")){var r=n.get("S");if(r)switch(r.name){case"D":e._style=t.PdfBorderStyle.dashed;break;case"B":e._style=t.PdfBorderStyle.beveled;break;case"I":e._style=t.PdfBorderStyle.inset;break;case"U":e._style=t.PdfBorderStyle.underline;break;default:e._style=t.PdfBorderStyle.solid}}n.has("D")&&(e._dash=n.getArray("D"))}}return e},set:function(t){var e=this.itemAt(this._defaultIndex);e?this._updateBorder(e._dictionary,t):this._updateBorder(this._dictionary,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){var e=t.PdfRotationAngle.angle0,i=this.itemAt(this._defaultIndex);return i&&(e=i.rotate),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_grayBrush",{get:function(){return this._gray||(this._gray=new Ve([128,128,128])),this._gray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_silverBrush",{get:function(){return this._silver||(this._silver=new Ve([198,198,198])),this._silver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_whiteBrush",{get:function(){return this._white||(this._white=new Ve([255,255,255])),this._white},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_blackBrush",{get:function(){return this._black||(this._black=new Ve([0,0,0])),this._black},enumerable:!0,configurable:!0}),e.prototype.itemAt=function(t){var e;if(t<this.itemsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0,n=this._kids[Number.parseInt(t.toString(),10)];n&&(i=this._crossReference._fetch(n)),i&&(e=we._load(i,this._crossReference),this._parsedItems.set(t,e))}return e},e.prototype.setAppearance=function(t){this._setAppearance=t},Object.defineProperty(e.prototype,"_fieldFlags",{get:function(){return void 0===this._flags&&(this._flags=ni(this._dictionary,"Ff",!1,!0,"Parent"),void 0===this._flags&&(this._flags=t._FieldFlag.default)),this._flags},set:function(t){this._fieldFlags!==t&&(this._flags=t,this._dictionary.update("Ff",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){if(!this._page){var t,e=this.itemAt(this._defaultIndex),i=void 0!==e?e._dictionary:this._dictionary;this._crossReference&&(t=this._crossReference._document);var n=void 0;if(i.has("P")){var r=i.getRaw("P");if(r&&t)for(var a=0;a<t.pageCount;a++){var s=t.getPage(a);if(s&&s._ref===r){n=s;break}}}if(!n&&t){var o=void 0!==e?e._ref:this._ref;if(!n&&o&&(n=Ai(t,o)),!n&&this._kids.length>0)for(a=0;a<this._kids.length&&!(n=Ai(t,this._kids[Number.parseInt(a.toString(),10)]));a++);}this._page=n}return this._page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_defaultAppearance",{get:function(){if(void 0===this._da){var t=ni(this._dictionary,"DA",!1,!0,"Parent");t&&""!==t&&(this._da=new Xt(t))}return this._da},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),e.prototype._updateVisibility=function(e,i){switch(e.has("F")&&(delete e._map.F,e._updated=!0),i){case t.PdfFormFieldVisibility.hidden:e.update("F",t.PdfAnnotationFlag.hidden);break;case t.PdfFormFieldVisibility.hiddenPrintable:e.update("F",t.PdfAnnotationFlag.noView|t.PdfAnnotationFlag.print);break;case t.PdfFormFieldVisibility.visible:if(e.has("DV")&&(delete e._map.DV,e._updated=!0),e.has("MK")){var n=e.get("MK");n&&n.has("BG")&&(delete n._map.BG,n._updated=!0)}}},e.prototype._updateBorder=function(e,i){var n,r=!1;e.has("BS")?n=e.get("BS"):(n=new _(this._crossReference),e.update("BS",n),r=!0),void 0!==i.width?(n.update("W",i.width),e._updated=!0):r&&n.update("W",0),void 0!==i.style?(n.update("S",di(i.style)),e._updated=!0):r&&n.update("S",di(t.PdfBorderStyle.solid)),void 0!==i.dash&&(n.update("D",i.dash),e._updated=!0)},e.prototype._checkFieldFlag=function(t){var e=t.get("F");return void 0!==e&&6===e},e.prototype._initializeFont=function(t){this._font=t;var e,i=this._page._fetchResources(),n=!1;if(i.has("Font")){var r=i.getRaw("Font");r instanceof o?(n=!0,e=this._crossReference._fetch(r)):r instanceof _&&(e=r)}e||(e=new _(this._crossReference),i.update("Font",e));var s=a.get(wi()),h=this._crossReference._getNextReference();this._crossReference._cacheMap.set(h,this._font._dictionary),e.update(s.name,h),this._fontName=s.name,n&&(i._updated=!0),this._page._hasResourceReference&&(this._page._pageDictionary._updated=!0)},e.prototype._drawRectangularControl=function(e,i){switch(e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush),this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth),i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._whiteBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}},e.prototype._drawBorder=function(e,i,n,r,a){n&&a>0&&(r===t.PdfBorderStyle.underline?e._drawLine(n,i[0],i[0]+i[3]-a/2,i[0]+i[2],i[1]+i[3]-a/2):e._drawRectangle(i[0]+a/2,i[1]+a/2,i[2]-a,i[3]-a,n))},e.prototype._drawLeftTopShadow=function(t,e,i,n){var r=new Ft,a=[];a.push([e[0]+i,e[1]+i]),a.push([e[0]+i,e[1]+e[3]-i]),a.push([e[0]+2*i,e[1]+e[3]-2*i]),a.push([e[0]+2*i,e[1]+2*i]),a.push([e[0]+e[2]-2*i,e[1]+2*i]),a.push([e[0]+e[2]-i,e[1]+i]),r._addPolygon(a),t._drawPath(r,null,n)},e.prototype._drawRightBottomShadow=function(t,e,i,n){var r=new Ft,a=[];a.push([e[0]+i,e[1]+e[3]-i]),a.push([e[0]+2*i,e[1]+e[3]-2*i]),a.push([e[0]+e[2]-2*i,e[1]+e[3]-2*i]),a.push([e[0]+e[2]-2*i,e[1]+2*i]),a.push([e[0]+e[2]-i,e[1]+i]),a.push([e[0]+e[2]-i,e[1]+e[3]-i]),r._addPolygon(a),t._drawPath(r,null,n)},e.prototype._drawRadioButton=function(e,i,n,r){if("l"===n){var a=i.bounds;switch(r){case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:e._drawEllipse(a[0],a[1],a[2],a[3],i.backBrush);break;case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.underline?e._drawEllipse(a[0],a[1],a[2],a[3],i.backBrush):e._drawEllipse(a[0],a[1],a[2],a[3],i.shadowBrush)}if(this._drawRoundBorder(e,a,i.borderPen,i.borderWidth),this._drawRoundShadow(e,i,r),r===t._PdfCheckFieldState.checked||r===t._PdfCheckFieldState.pressedChecked){var s=[a[0]+i.borderWidth/2,a[1]+i.borderWidth/2,a[2]-i.borderWidth,a[3]-i.borderWidth];e._drawEllipse(s[0]+s[2]/4,s[1]+s[2]/4,s[2]-s[2]/2,s[3]-s[2]/2,i.foreBrush)}}else this._drawCheckBox(e,i,n,r)},e.prototype._drawRoundBorder=function(t,e,i,n){0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]||t._drawEllipse(e[0]+n/2,e[1]+n/2,e[2]-n,e[3]-n,i)},e.prototype._drawRoundShadow=function(e,i,n){var r,a,s=i.borderWidth,o=-1.5*s,h=i.bounds[0]+o,c=i.bounds[1]+o,_=i.bounds[2]+2*o,d=i.bounds[3]+2*o,p=i.shadowBrush._color;switch(i.borderStyle){case t.PdfBorderStyle.beveled:switch(n){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:r=new We(p,s),a=new We([255,255,255],s);break;case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:r=new We([255,255,255],s),a=new We(p,s)}break;case t.PdfBorderStyle.inset:switch(n){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:r=new We([0,0,0],s),a=new We([0,0,0],s);break;case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:r=new We([128,128,128],s),a=new We([192,192,192],s)}}r&&a&&(e._drawArc(h,c,_,d,135,180,r),e._drawArc(h,c,_,d,-45,180,a))},e.prototype._drawCheckBox=function(e,i,n,r,a){switch(r){case t._PdfCheckFieldState.unchecked:case t._PdfCheckFieldState.checked:i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush);break;case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.underline?i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush):i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.shadowBrush)}var s=i.bounds;if(this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth),r===t._PdfCheckFieldState.pressedChecked||r===t._PdfCheckFieldState.pressedUnchecked)switch(i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._blackBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush)}else switch(i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._whiteBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}var o=0,h=0;switch(r){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.checked:if(a)a=new At(t._PdfFontFamily.zapfDingbats,a._size);else{var c=i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.inset,_=i.borderWidth;c&&(_*=2);var d=Math.max(c?2*i.borderWidth:i.borderWidth,1),p=Math.min(_,d),l=(h=i.bounds[2]>i.bounds[3]?i.bounds[3]:i.bounds[2])-2*p;a=new At(t._PdfFontFamily.zapfDingbats,l),i.bounds[2]>i.bounds[3]&&(o=(i.bounds[3]-a._metrics.getHeight())/2)}if(0===h&&(h=i.bounds[3]),i.pageRotationAngle!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var u=e._save(),f=e._size;if(i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(f[1],0),e._rotateTransform(90);var g=f[1]-(s[0]+s[2]);s=[s[1],g,s[3],s[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(f[0],f[1]),e._rotateTransform(-180),s=[f[0]-(s[0]+s[2]),g=f[1]-(s[1]+s[3]),s[2],s[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,f[0]),e._rotateTransform(270),s=[f[0]-(s[1]+s[3]),g=s[0],s[3],s[2]]}if(i.rotationAngle>0){if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,f[1]),e._rotateTransform(-90),s=[f[1]-(s[1]+s[3]),g=s[0],s[3],s[2]];else if(s[2]>s[3])e._translateTransform(0,f[1]),e._rotateTransform(-90),s=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var y=s[0];s[0]=-(s[1]+s[3]),s[1]=y;var m=s[3];s[3]=s[2]>a._metrics.getHeight()?s[2]:a._metrics.getHeight(),s[2]=m,e._rotateTransform(-90),s=[s[0],s[1],s[2],s[3]]}else if(270===i.rotationAngle){e._translateTransform(f[0],0),e._rotateTransform(-270),s=[s[1],g=f[0]-(s[0]+s[2]),s[3],s[2]]}else if(180===i.rotationAngle){e._translateTransform(f[0],f[1]),e._rotateTransform(-180),s=[f[0]-(s[0]+s[2]),g=f[1]-(s[1]+s[3]),s[2],s[3]]}e._drawString(n,a,[s[0],s[1]-o,s[2],s[3]],null,i.foreBrush,new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle)),e._restore(u)}else e._drawString(n,a,[s[0],s[1]-o,s[2],s[3]],null,i.foreBrush,new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle));break}}},e.prototype._addToKid=function(t){this._dictionary.has("Kids")?this._kids=this._dictionary.get("Kids"):(this._kids=[],this._dictionary.update("Kids",this._kids),this._parsedItems=new Map);var e=this.itemsCount;this._kids.push(t._ref),this._parsedItems.set(e,t)},e.prototype._drawTemplate=function(e,i,n){if(e&&i){var r=i._graphics;r._save(),i.rotation===t.PdfRotationAngle.angle90?(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(90)):i.rotation===t.PdfRotationAngle.angle180?(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(-180)):i.rotation===t.PdfRotationAngle.angle270&&(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(270)),r._sw._setTextRenderingMode(t._TextRenderingMode.fill),r._drawTemplate(e,n),r._restore()}},e.prototype._addToOptions=function(t,e){var i;e instanceof qt&&e._listValues.push(t._text),e._options.push([t._value,t._text]),this._parsedItems.size>0?i=this._parsedItems.get(0)._dictionary:(i=t._create(this.page,this.bounds,this),this._addToKid(t),i.update("MK",new _(this._crossReference)),t._mkDictionary.update("BC",[0,0,0]),t._mkDictionary.update("BG",[1,1,1]),i.update("DA","/TiRo 0 Tf 0 0 0 rg"))},e.prototype._addAppearance=function(t,e,i){var n;t.has("AP")?n=t.get("AP"):(n=new _(this._crossReference),t.update("AP",n));var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,e._content),n.update(i,r)},e.prototype._rotateTextBox=function(e,i,n){var r=[0,0,0,0];return n===t.PdfRotationAngle.angle180?r=[i[0]-(e[0]+e[2]),i[1]-(e[1]+e[3]),e[2],e[3]]:n===t.PdfRotationAngle.angle270?r=[e[1],i[0]-(e[0]+e[2]),e[3],e[2]]:n===t.PdfRotationAngle.angle90&&(r=[i[1]-(e[1]+e[3]),e[0],e[3],e[2]]),r},e.prototype._checkIndex=function(t,e){if(t<0||t>=e)throw Error("Index out of range.")},e}(),Ut=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return Dt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},Object.defineProperty(i.prototype,"text",{get:function(){if(void 0===this._text)if(this._isLoaded){var t=ni(this._dictionary,"V",!1,!0,"Parent");if(t)this._text=t;else{var e=this.itemAt(this._defaultIndex);e&&(t=e._dictionary.get("V"))&&(this._text=t)}}else this._text="";return this._text},set:function(t){if(this._isLoaded){if(!this.readOnly){this._dictionary.has("V")&&this._dictionary.get("V")===t||this._dictionary.update("V",t);var e=this.itemAt(this._defaultIndex);!e||e._dictionary.has("V")&&e._dictionary.get("V")===t||e._dictionary.update("V",t)}}else this._text!==t&&(this._dictionary.update("V",t),this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex),i=ni(void 0!==e?e._dictionary:this._dictionary,"Q",!1,!0,"Parent");return void 0!==i?i:t.PdfTextAlignment.left}return this._textAlignment},set:function(e){if(this._isLoaded)this.itemsCount>0?this.itemAt(this._defaultIndex)._dictionary.update("Q",e):this._dictionary.update("Q",e);else if(this._textAlignment!==e){this._textAlignment=e,this.itemAt(this._defaultIndex)._dictionary.update("Q",e),this._stringFormat=new nt(e,t._PdfVerticalAlignment.middle)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){if(void 0===this._defaultValue){var t=ni(this._dictionary,"DV",!1,!0,"Parent");t&&(this._defaultValue=t)}return this._defaultValue},set:function(t){t!==this.defaultValue&&(this._dictionary.update("DV",t),this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiLine",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.multiLine)},set:function(e){e?this._fieldFlags|=t._FieldFlag.multiLine:this._fieldFlags&=~t._FieldFlag.multiLine},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.password)},set:function(e){e?this._fieldFlags|=t._FieldFlag.password:this._fieldFlags&=~t._FieldFlag.password},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollable",{get:function(){return!(0!=(this._fieldFlags&t._FieldFlag.doNotScroll))},set:function(e){e?this._fieldFlags&=~t._FieldFlag.doNotScroll:this._fieldFlags|=t._FieldFlag.doNotScroll},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spellCheck",{get:function(){return!(0!=(this._fieldFlags&t._FieldFlag.doNotSpellCheck))},set:function(e){e?this._fieldFlags&=~t._FieldFlag.doNotSpellCheck:this._fieldFlags|=t._FieldFlag.doNotSpellCheck},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"insertSpaces",{get:function(){var e=this._fieldFlags;return 0!=(t._FieldFlag.comb&e)&&0==(e&t._FieldFlag.multiLine)&&0==(e&t._FieldFlag.password)&&0==(e&t._FieldFlag.fileSelect)},set:function(e){e?this._fieldFlags|=t._FieldFlag.comb:this._fieldFlags&=~t._FieldFlag.comb},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&void 0!==i.highlightMode)e=i.highlightMode;else if(this._dictionary.has("H")){e=fi(this._dictionary.get("H"))}return void 0!==e?e:t.PdfHighlightMode.noHighlighting},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&fi(this._dictionary.get("H"))===t||this._dictionary.update("H",gi(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){if(void 0===this._maxLength){var t=ni(this._dictionary,"MaxLen",!1,!0,"Parent");this._maxLength=void 0!==t&&Number.isInteger(t)?t:0}return this._maxLength},set:function(t){this.maxLength!==t&&(this._dictionary.update("MaxLen",t),this._maxLength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isAutoResizeText",{get:function(){return this._autoResizeText},set:function(t){this._autoResizeText=t;var e=this.itemAt(this._defaultIndex);e&&(e._isAutoResize=t)},enumerable:!0,configurable:!0}),i.prototype._initialize=function(e,i,n){this._crossReference=e._crossReference,this._page=e,this._name=i,this._text="",this._defaultValue="",this._defaultIndex=0,this._spellCheck=!1,this._insertSpaces=!1,this._multiline=!1,this._password=!1,this._scrollable=!1,this._autoResizeText=!1,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Tx")),this._dictionary.update("T",i),this._fieldFlags|=t._FieldFlag.doNotSpellCheck,this._initializeFont(new At(t._PdfFontFamily.helvetica,8)),this._createItem(n)},i.prototype._createItem=function(e){var i=new we;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.left,this._stringFormat=new nt(i.textAlignment,t._PdfVerticalAlignment.middle),i._dictionary.update("MK",new _(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[1,1,1]),i._mkDictionary.update("CA",this.actualName),i._dictionary.update("DA",this._fontName+" 8 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this.itemsCount;if(this._isLoaded)if(e>0)for(var i=0;i<e;i++){(n=this.itemAt(i))&&this._postProcess(t,n)}else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(i=0;i<e;i++){var n;if((n=this.itemAt(i))&&!this._checkFieldFlag(n._dictionary)){var r=this._createAppearance(t,n);t?this._drawTemplate(r,n._page,{x:n.bounds.x,y:n.bounds.y,width:r._size[0],height:r._size[1]}):this._addAppearance(n._dictionary,r,"N"),n._dictionary._updated=!t}}t&&(this._dictionary._updated=!1)}},i.prototype._postProcess=function(e,i){var n,r,a=i||this;if(this._form._setAppearance||this._setAppearance||e&&!a._dictionary.has("AP"))n=this._createAppearance(e,a);else if(a._dictionary.has("AP")){var s=void 0,o=a._dictionary.get("AP");if(o&&o.has("N")){s=o.get("N");var h=o.getRaw("N");h&&(s.reference=h),s&&(n=new it(s,this._crossReference))}}if(n)if(e){var c=a instanceof we?a._getPage():a.page;if(c){var _=c._graphics;_._save(),c.rotation===t.PdfRotationAngle.angle90?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(90)):c.rotation===t.PdfRotationAngle.angle180?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(-180)):c.rotation===t.PdfRotationAngle.angle270&&(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(270)),r={x:a.bounds.x,y:a.bounds.y,width:n._size[0],height:n._size[1]},_._drawTemplate(n,r),_._restore()}a._dictionary._updated=!1}else this._addAppearance(a._dictionary,n,"N")},i.prototype._createAppearance=function(t,e){var i=e.bounds,n=new it([0,0,i.width,i.height],this._crossReference);Ri(n,null),n._writeTransformation=!1;var r=n.graphics,a=new Fe;a.bounds=[0,0,i.width,i.height];var s=e.backColor;t&&(a.backBrush=new Ve(s)),a.foreBrush=new Ve(e.color);var o=e.border;a.borderPen=new We(e.borderColor,o.width),a.borderStyle=o.style,a.borderWidth=o.width;var h=[s[0]-64,s[1]-64,s[2]-64],c=[h[0]>=0?h[0]:0,h[1]>=0?h[1]:0,h[2]>=0?h[2]:0];a.shadowBrush=new Ve(c),a.rotationAngle=e.rotationAngle,a.insertSpaces=this.insertSpaces;var _=this.text;if(this.password){for(var d="",p=0;p<_.length;p++)d+="*";_=d}return a.required=this.required,this.required||(r._sw._beginMarkupSequence("Tx"),r._initializeCoordinates()),this._drawTextBox(r,a,_,this._font,this._stringFormat,this.multiLine,this.scrollable,this.maxLength),this.required||r._sw._endMarkupSequence(),n},i.prototype._drawTextBox=function(e,i,n,r,a,s,o,h){if(void 0!==h)if(i.insertSpaces){var c=0;if(void 0!==h&&h>0){c=i.bounds[2]/h,e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.borderPen,i.backBrush);for(var _=n,d=0;d<h;d++){if(a.alignment===t.PdfTextAlignment.right)n=h-_.length<=d?_[d-(h-_.length)]:"";else if(a.alignment===t.PdfTextAlignment.center&&_.length<h){var p=h/2-Math.ceil(_.length/2);n=d>=p&&d<p+_.length?_[d-p]:""}else n=_.length>d?_[Number.parseInt(d.toString(),10)]:"";i.bounds[2]=c,a.alignment=t.PdfTextAlignment.center,this._drawTextBox(e,i,n,r,a,s,o),i.bounds[0]=i.bounds[0]+c,i.borderWidth&&e._drawLine(i.borderPen,i.bounds[0],i.bounds[1],i.bounds[0],i.bounds[1]+i.bounds[3])}}else this._drawTextBox(e,i,n,r,a,s,o)}else this._drawTextBox(e,i,n,r,a,s,o);else{e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),i.insertSpaces||this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());var l=i.bounds;if(i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.inset?(l[0]=l[0]+4*i.borderWidth,l[2]=l[2]-8*i.borderWidth):(l[0]=l[0]+2*i.borderWidth,l[2]=l[2]-4*i.borderWidth),s){var u=(null==a||0===a.lineSpacing?r._metrics.getHeight():a.lineSpacing)-r._metrics.getAscent();n.indexOf("\n"),0===l[0]&&1===l[1]&&(l[1]=-(l[1]-u)),i.isAutoFontSize&&0!==i.borderWidth&&(l[1]=l[1]+2.5*i.borderWidth)}if(e._page&&void 0!==e._page.rotation&&e._page.rotation!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var f=e._save();if(void 0!==i.pageRotationAngle&&i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(e._size[1],0),e._rotateTransform(90);var g=e._size[1]-(l[0]+l[2]);l=[l[1],g,l[3],l[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),l=[e._size[0]-(l[0]+l[2]),g=e._size[1]-(l[1]+l[3]),l[2],l[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,e._size[0]),e._rotateTransform(270),l=[e._size[0]-(l[1]+l[3]),g=l[0],l[3],l[2]]}if(i.rotationAngle)if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),l=[e._size[1]-(l[1]+l[3]),g=l[0],l[3],l[2]];else if(l[2]>l[3])e._translateTransform(0,e._size[1]),e._rotateTransform(-90),l=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var y=l[0];l[0]=-(l[1]+l[3]),l[1]=y;var m=l[3];l[3]=l[2]>r._metrics.getHeight()?l[2]:r._metrics.getHeight(),l[2]=m,e._rotateTransform(-90)}else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),l=[l[1],g=e._size[0]-(l[0]+l[2]),l[3],l[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),l=[e._size[0]-(l[0]+l[2]),g=e._size[1]-(l[1]+l[3]),l[2],l[3]]}e._drawString(n,r,l,null,i.foreBrush,a),e._restore(f)}else e._drawString(n,r,l,null,i.foreBrush,a);e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())}},i}(jt),Vt=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return Dt(i,e),Object.defineProperty(i.prototype,"text",{get:function(){if(this._isLoaded){if(void 0===this._text){var t=this.itemAt(this._defaultIndex);t&&t._mkDictionary&&t._mkDictionary.has("CA")?this._text=t._mkDictionary.get("CA"):this._mkDictionary&&this._mkDictionary.has("CA")&&(this._text=this._mkDictionary.get("CA"))}if(void 0===this._text){var e=ni(this._dictionary,"V",!1,!0,"Parent");e&&(this._text=e)}}return void 0===this._text&&(this._text=""),this._text},set:function(t){this._isLoaded&&!this.readOnly&&((e=this.itemAt(this._defaultIndex))&&e._dictionary?this._assignText(e._dictionary,t):this._assignText(this._dictionary,t));if(!this._isLoaded&&this._text!==t){var e=this.itemAt(this._defaultIndex);this._assignText(e._dictionary,t),this._text=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex);e&&e._dictionary&&e._dictionary.has("Q")?this._textAlignment=e._dictionary.get("Q"):this._dictionary.has("Q")?this._textAlignment=this._dictionary.get("Q"):this._textAlignment=t.PdfTextAlignment.left}else void 0===this._textAlignment&&(this._textAlignment=t.PdfTextAlignment.left);return this._textAlignment},set:function(e){if(this._isLoaded&&!this.readOnly){var i=this.itemAt(this._defaultIndex);i&&i._dictionary?i._dictionary.update("Q",e):this._dictionary.update("Q",e)}this._isLoaded||this._textAlignment===e||(this._textAlignment=e,this.itemAt(this._defaultIndex)._dictionary.update("Q",e),this._stringFormat=new nt(e,t._PdfVerticalAlignment.middle))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&void 0!==i.highlightMode)e=i.highlightMode;else if(this._dictionary.has("H")){e=fi(this._dictionary.get("H"))}return void 0!==e?e:t.PdfHighlightMode.invert},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&fi(this._dictionary.get("H"))===t||this._dictionary.update("H",gi(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),i.prototype._assignText=function(t,e){var i;t.has("MK")?i=t.get("MK"):(i=new _(this._crossReference),t.set("MK",i)),i.update("CA",e),t._updated=!0},i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},i.prototype._initialize=function(e,i,n){this._crossReference=e._crossReference,this._page=e,this._name=i,this._defaultIndex=0,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Btn")),this._dictionary.update("T",i),this._fieldFlags|=t._FieldFlag.pushButton,this._initializeFont(new At(t._PdfFontFamily.helvetica,8)),this._createItem(n)},i.prototype._createItem=function(e){var i=new we;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.center,this._stringFormat=new nt(i.textAlignment,t._PdfVerticalAlignment.middle),i._dictionary.update("MK",new _(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[.827451,.827451,.827451]),i._mkDictionary.update("CA",void 0!==this._name&&null!==this._name?this._name:this._actualName),i._dictionary.update("DA",this._fontName+" 8 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this.itemsCount;if(this._isLoaded)if(e>0)for(var i=0;i<e;i++){(n=this.itemAt(i))&&this._postProcess(t,n)}else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(i=0;i<e;i++){var n;if((n=this.itemAt(i))&&!this._checkFieldFlag(n._dictionary)){var r=this._createAppearance(n);if(t)this._drawTemplate(r,n._getPage(),{x:n.bounds.x,y:n.bounds.y,width:r._size[0],height:r._size[1]});else{this._addAppearance(n._dictionary,r,"N");var a=this._createAppearance(n,!0);a&&this._addAppearance(n._dictionary,a,"D")}n._dictionary._updated=!t}}t&&(this._dictionary._updated=!1)}},i.prototype._postProcess=function(e,i){var n,r,a=i||this;if(this._form._setAppearance||this._setAppearance||e&&!a._dictionary.has("AP"))n=this._createAppearance(a);else if(a._dictionary.has("AP")){var s=void 0,o=a._dictionary.get("AP");if(o&&o.has("N")){s=o.get("N");var h=o.getRaw("N");h&&(s.reference=h),s&&(n=new it(s,this._crossReference))}}if(n)if(e){var c=a instanceof we?a._getPage():a.page;if(c){var _=c._graphics;_._save(),c.rotation===t.PdfRotationAngle.angle90?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(90)):c.rotation===t.PdfRotationAngle.angle180?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(-180)):c.rotation===t.PdfRotationAngle.angle270&&(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(270)),r={x:a.bounds.x,y:a.bounds.y,width:n._size[0],height:n._size[1]},_._drawTemplate(n,r),_._restore()}a._dictionary._updated=!1}else this._addAppearance(a._dictionary,n,"N")},i.prototype._createAppearance=function(t,e){void 0===e&&(e=!1);var i=t.bounds,n=new it([0,0,i.width,i.height],this._crossReference),r=new Fe;r.bounds=[0,0,i.width,i.height];var a=t.backColor;r.backBrush=new Ve(a),r.foreBrush=new Ve(t.color);var s=t.border;r.borderPen=new We(t.borderColor,s.width),r.borderStyle=s.style,r.borderWidth=s.width;var o=[a[0]-64,a[1]-64,a[2]-64],h=[o[0]>=0?o[0]:0,o[1]>=0?o[1]:0,o[2]>=0?o[2]:0];return r.shadowBrush=new Ve(h),r.rotationAngle=t.rotationAngle,e?this._drawPressedButton(n.graphics,r,this.text,this._font,this._stringFormat):this._drawButton(n.graphics,r,this.text,this._font,this._stringFormat),n},i.prototype._drawButton=function(e,i,n,r,a){this._drawRectangularControl(e,i);var s=i.bounds;if(e._page&&void 0!==e._page.rotation&&e._page.rotation!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var o=e._save();if(void 0!==i.pageRotationAngle&&i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(e._size[1],0),e._rotateTransform(90);var h=e._size[1]-(s[0]+s[2]);s=[s[1],h,s[3],s[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),s=[e._size[0]-(s[0]+s[2]),h=e._size[1]-(s[1]+s[3]),s[2],s[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,e._size[0]),e._rotateTransform(270),s=[e._size[0]-(s[1]+s[3]),h=s[0],s[3],s[2]]}if(i.rotationAngle)if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),s=[e._size[1]-(s[1]+s[3]),h=s[0],s[3],s[2]];else if(s[2]>s[3])e._translateTransform(0,e._size[1]),e._rotateTransform(-90),s=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var c=s[0];s[0]=-(s[1]+s[3]),s[1]=c;var _=s[3];s[3]=s[2]>r._metrics.getHeight()?s[2]:r._metrics.getHeight(),s[2]=_,e._rotateTransform(-90)}else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),s=[s[1],h=e._size[0]-(s[0]+s[2]),s[3],s[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),s=[e._size[0]-(s[0]+s[2]),h=e._size[1]-(s[1]+s[3]),s[2],s[3]]}e._drawString(n,r,s,null,i.foreBrush,a),e._restore(o)}else e._drawString(n,r,s,null,i.foreBrush,a)},i.prototype._drawPressedButton=function(e,i,n,r,a){switch(i.borderStyle){case t.PdfBorderStyle.inset:e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.shadowBrush);break;default:e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush)}this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth);var s=[i.borderWidth,i.borderWidth,i.bounds[2]-i.borderWidth,i.bounds[3]-i.borderWidth];switch(e._drawString(n,r,s,null,i.foreBrush,a),i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush);break;default:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}},i}(jt),Wt=function(e){function i(t,i,n){var r=e.call(this)||this;return n&&t&&i&&r._initialize(n,t,i),r}return Dt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},i.prototype.itemAt=function(t){if(t<0||t>=this.itemsCount)throw Error("Index out of range.");var e;if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0,n=this._kids[Number.parseInt(t.toString(),10)];n&&(i=this._crossReference._fetch(n)),i&&((e=Se._load(i,this._crossReference,this))._isLoaded=!0,this._parsedItems.set(t,e))}return e},Object.defineProperty(i.prototype,"checked",{get:function(){return this.itemsCount>0&&this.itemAt(this._defaultIndex).checked},set:function(t){this.checked!==t&&(this.itemsCount>0&&(this.itemAt(this._defaultIndex).checked=t),t?this._dictionary.update("V",a.get("Yes")):this._dictionary.has("V")&&delete this._dictionary._map.V,this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),i.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._defaultIndex=0,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Btn")),this._dictionary.update("T",e),this._createItem(i)},i.prototype._createItem=function(e){var i=new Se;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.center,this._stringFormat=new nt(i.textAlignment,t._PdfVerticalAlignment.middle),i._dictionary.update("MK",new _(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[1,1,1]),i.style=t.PdfCheckBoxStyle.check,i._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(e){void 0===e&&(e=!1);var i=this.itemsCount;if(this._isLoaded)if(i>0)for(var n=0;n<i;n++){if((o=this.itemAt(n))&&!this._checkFieldFlag(o._dictionary))if(e){var r=void 0,a=o.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;r=this._setAppearance||this._form._setAppearance||!o._dictionary.has("AP")?this._createAppearance(o,a):ki(a,this),this._drawTemplate(r,o._getPage(),o.bounds)}else(this._setAppearance||this._form._setAppearance||!o._isLoaded)&&(o._postProcess(o.checked?"Yes":"Off"),this._drawAppearance(o));o._dictionary._updated=!e}else{var s=this.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;this._drawTemplate(ki(s,this),this.page,this.bounds)}else for(n=0;n<i;n++){var o;a=(o=this.itemAt(n)).checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;if(o._postProcess(o.checked?"Yes":"Off"),e){r=this._createAppearance(o,a);this._drawTemplate(r,o._getPage(),o.bounds)}else this._drawAppearance(o);o._dictionary._updated=!e}this._dictionary._updated=!e},i.prototype._createAppearance=function(t,e){var i=t.bounds,n=new Fe;n.bounds=[0,0,i.width,i.height];var r=t.backColor;n.backBrush=new Ve(r),n.foreBrush=new Ve(t.color);var a=t.border;n.borderPen=new We(t.borderColor,a.width),n.borderStyle=a.style,n.borderWidth=a.width;var s=[r[0]-64,r[1]-64,r[2]-64],o=[s[0]>=0?s[0]:0,s[1]>=0?s[1]:0,s[2]>=0?s[2]:0];n.shadowBrush=new Ve(o),n.rotationAngle=t.rotationAngle;var h=new it(n.bounds,this._crossReference),c=h.graphics;return this._drawCheckBox(c,n,Ii(t._style),e),h},i.prototype._drawAppearance=function(e){var i;if(e._dictionary.has("AP"))i=this._dictionary.get("AP");else{var n=this._crossReference._getNextReference();i=new _(this._crossReference),this._crossReference._cacheMap.set(n,i),e._dictionary.update("AP",n)}var r=this._createAppearance(e,t._PdfCheckFieldState.checked),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r._content);var s=this._createAppearance(e,t._PdfCheckFieldState.unchecked),o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,s._content);var h=new _(this._crossReference);h.update("Yes",a),h.update("Off",o);var c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,h),i.update("N",c);var d=this._createAppearance(e,t._PdfCheckFieldState.pressedChecked),p=this._crossReference._getNextReference();this._crossReference._cacheMap.set(p,d._content);var l=this._createAppearance(e,t._PdfCheckFieldState.pressedUnchecked),u=this._crossReference._getNextReference();this._crossReference._cacheMap.set(u,l._content);var f=new _(this._crossReference);f.update("Yes",p),f.update("Off",u);var g=this._crossReference._getNextReference();this._crossReference._cacheMap.set(g,f),i.update("D",g),e._dictionary._updated=!0},i}(jt),Ht=function(e){function i(t,i){var n=e.call(this)||this;return n._selectedIndex=-1,t&&i&&n._initialize(t,i),n}return Dt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a.itemsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){if(t<0||t>=this.itemsCount)throw Error("Index out of range.");var e;if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0,n=this._kids[Number.parseInt(t.toString(),10)];n&&(i=this._crossReference._fetch(n)),i&&((e=Pe._load(i,this._crossReference,this))._index=t,this._parsedItems.set(t,e))}return e},Object.defineProperty(i.prototype,"checked",{get:function(){var t=!1;return this.itemsCount>0&&(t=this.itemAt(this._defaultIndex).checked),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._isLoaded&&-1===this._selectedIndex&&(this._selectedIndex=this._obtainSelectedIndex()),this._selectedIndex},set:function(t){if(this.selectedIndex!==t){this._selectedIndex=t;var e=this.itemAt(t),i=a.get(e.value);this._dictionary.update("V",i),this._dictionary.update("DV",i)}},enumerable:!0,configurable:!0}),i.prototype.add=function(t,e){return t instanceof Pe?(t._field=this,t._dictionary.update("Parent",this._ref),t._setField(this),this.itemsCount):new Pe(t,e,this)},i.prototype._initialize=function(e,i){this._crossReference=e._crossReference,this._page=e,this._name=i,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Btn")),this._dictionary.update("T",i),this._fieldFlags|=t._FieldFlag.radio},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this.itemsCount,i=t.length<=e?t.length:e,n=0;n<i;n++)t[Number.parseInt(n.toString(),10)]&&(this.itemAt(n)._optionValue=t[Number.parseInt(n.toString(),10)])}},i.prototype._obtainSelectedIndex=function(){for(var t=-1,e=0;e<this.itemsCount;++e){var i=this.itemAt(e);if(i){var n=ni(i._dictionary,"V",!1,!0,"Parent");if(n&&i._dictionary.has("AS")){var r=i._dictionary.get("AS");if(r&&"off"!==r.name.toLowerCase()){if(n instanceof a&&"off"!==n.name.toLowerCase()){r.name!==n.name&&i._optionValue!==n.name||(t=e);break}if("string"==typeof n&&"off"!==n.toLowerCase()){r.name!==n&&i._optionValue!==n||(t=e);break}}}}}return t},i.prototype._doPostProcess=function(e){void 0===e&&(e=!1);var i=this.itemsCount;if(this._isLoaded)if(i>0)for(var n=0;n<i;n++){if((h=this.itemAt(n))&&!this._checkFieldFlag(h._dictionary))if(e){var r=void 0,s=-1!==this.selectedIndex?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;r=this._setAppearance||this._form._setAppearance||!h._dictionary.has("AP")?this._createAppearance(h,s):ki(s,this),this._drawTemplate(r,h._getPage(),h.bounds)}else(this._setAppearance||this._form._setAppearance||!h._isLoaded)&&(h._postProcess(this.selectedIndex===n?h.value:"Off"),this._drawAppearance(h));h._dictionary._updated=!e}else{var o=-1!==this.selectedIndex?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;this._drawTemplate(ki(o,this),this.page,this.bounds)}else for(n=0;n<i;n++){var h=this.itemAt(n);s=this.selectedIndex===n?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;if(h._dictionary.update("AS",a.get(this.selectedIndex===n?h.value:"Off")),e){r=this._createAppearance(h,s);this._drawTemplate(r,h._getPage(),h.bounds)}else h._postProcess(this.selectedIndex===n?h.value:"Off"),this._drawAppearance(h);h._dictionary._updated=!e}this._dictionary._updated=!e},i.prototype._createAppearance=function(t,e){var i=t.bounds,n=new Fe;n.bounds=[0,0,i.width,i.height];var r=t.backColor;n.backBrush=new Ve(r),n.foreBrush=new Ve(t.color);var a=t.border;n.borderPen=new We(t.borderColor,a.width),n.borderStyle=a.style,n.borderWidth=a.width;var s=[r[0]-64,r[1]-64,r[2]-64],o=[s[0]>=0?s[0]:0,s[1]>=0?s[1]:0,s[2]>=0?s[2]:0];n.shadowBrush=new Ve(o),n.rotationAngle=t.rotationAngle;var h=new it(n.bounds,this._crossReference),c=h.graphics;return this._drawRadioButton(c,n,Ii(t._style),e),h},i.prototype._drawAppearance=function(e){var i;if(e._dictionary.has("AP"))i=e._dictionary.get("AP");else{var n=this._crossReference._getNextReference();i=new _(this._crossReference),this._crossReference._cacheMap.set(n,i),e._dictionary.update("AP",n)}var r=this._createAppearance(e,t._PdfCheckFieldState.checked),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r._content);var s=this._createAppearance(e,t._PdfCheckFieldState.unchecked),o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,s._content);var h=new _(this._crossReference);h.update(e.value,a),h.update("Off",o);var c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,h),i.update("N",c);var d=this._createAppearance(e,t._PdfCheckFieldState.pressedChecked),p=this._crossReference._getNextReference();this._crossReference._cacheMap.set(p,d._content);var l=this._createAppearance(e,t._PdfCheckFieldState.pressedUnchecked),u=this._crossReference._getNextReference();this._crossReference._cacheMap.set(u,l._content);var f=new _(this._crossReference);f.update(e.value,p),f.update("Off",u);var g=this._crossReference._getNextReference();this._crossReference._cacheMap.set(g,f),i.update("D",g),e._dictionary._updated=!0},i}(jt),Gt=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return Dt(i,e),Object.defineProperty(i.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=ai(this._dictionary,this.page)),t||(this._bounds?this._bounds:t)},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded?void 0===e||this._dictionary.has("Rect")?this._dictionary.update("Rect",hi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t):e?(e._page=this.page,e.bounds=t):this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){var t=this._dictionary.get("I");return 1===t.length?t[0]:t},set:function(t){var e=this,i=this._options.length;"number"==typeof t?(this._checkIndex(t,i),this._dictionary.update("I",[t])):(t.forEach((function(t){e._checkIndex(t,i)})),this._dictionary.update("I",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiSelect",{get:function(){return this._isLoaded?0!=(this._fieldFlags&t._FieldFlag.multiSelect):this._multiSelect},set:function(e){this.multiSelect!==e&&(this._multiSelect=e,e?this._fieldFlags|=t._FieldFlag.multiSelect:this._fieldFlags&=~t._FieldFlag.multiSelect)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_options",{get:function(){return this._optionArray||(this._dictionary.has("Opt")?this._optionArray=this._dictionary.getArray("Opt"):(this._optionArray=[],this._dictionary.update("Opt",this._optionArray))),this._optionArray},enumerable:!0,configurable:!0}),i._load=function(t,e,n,r){var a=new i;a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids"));var s=a._dictionary.getArray("Opt");return a._listValues=new Array(s.length),a._defaultIndex=0,a._parsedItems=new Map,a.itemsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){var e;if(t<this.itemsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;(n=this._kids[Number.parseInt(t.toString(),10)])&&(i=this._crossReference._fetch(n)),i&&((e=Ae._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}else if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{i=void 0;var n=void 0;(n=1===this.itemsCount?this._kids[0]:this._kids[Number.parseInt(t.toString(),10)])&&(i=this._crossReference._fetch(n)),i&&((e=Ae._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}return e},i.prototype.addItem=function(t){return this._addToOptions(t,this),this._listValues.length-1},i.prototype._initialize=function(e,i,n){this._crossReference=e._crossReference,this._page=e,this._name=i,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Ch")),this._dictionary.update("T",i),this._parsedItems=new Map,this._listValues=[],this._kids=[],this.bounds=n,this._fieldFlags|=t._FieldFlag.combo},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this.itemsCount,i=t.length<=e?t.length:e,n=0;n<i;n++){var r=t[Number.parseInt(n.toString(),10)][1];r&&(this.itemAt(n)._text=r||"")}}},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this.itemsCount;if(this._kids&&this._kids.length>0)if(e>1)for(var i=0;i<e;i++){if((a=this.itemAt(i))&&!this._checkFieldFlag(a._dictionary)){var n=this._createAppearance(a);if(t)(r=a._getPage())&&this._drawTemplate(n,r,a.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}}else{var r,a=this.itemAt(0);n=this._createAppearance();if(t)(r=this.page)&&this._drawTemplate(n,r,this.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}this._dictionary._updated=!t}},i.prototype._createAppearance=function(e){var i=new Fe;if(e){var n=e.bounds,r=e._getPage();e._isLoaded&&r&&void 0!==r.rotation&&r.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],r.size,r.rotation):i.bounds=[0,0,n.width,n.height];var a=e.backColor;i.backBrush=new Ve(a),i.foreBrush=new Ve(e.color);var s=e.border;i.borderPen=new We(e.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new Ve(o),i.rotationAngle=e.rotationAngle;var h=void 0!==e.textAlignment?e.textAlignment:t.PdfTextAlignment.left,c=this.multiSelect?t._PdfVerticalAlignment.top:t._PdfVerticalAlignment.middle;i.stringFormat=new nt(h,c)}else{n=this.bounds;this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],this.page.size,this.page.rotation):i.bounds=[0,0,n.width,n.height];a=this.backColor;i.backBrush=new Ve(a),i.foreBrush=new Ve(this.color);s=this.border;i.borderPen=new We(this.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var _;o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new Ve(o),i.rotationAngle=this.rotationAngle,i.stringFormat=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.middle)}i.required=this.required;var d=new it(i.bounds,this._crossReference),p=d.graphics;if(p._sw._clear(),this.required||(p._sw._beginMarkupSequence("Tx"),p._initializeCoordinates()),this._isLoaded){var l=void 0;e&&(l=this._obtainFont(e)),null==l&&(l=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular)),this._drawComboBox(p,i,l,i.stringFormat)}else this._font||(this._font=new At(t._PdfFontFamily.timesRoman,this._getFontHeight(t._PdfFontFamily.helvetica))),this._drawComboBox(p,i,this._font,i.stringFormat);return this.required||p._sw._endMarkupSequence(),d},i.prototype._drawComboBox=function(e,i,n,r){e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());var a=this._options,s=this._dictionary.get("I"),o=-1;if(s&&s.length>0&&(o=s[0]),o>0&&o<a.length){var h=a[Number.parseInt(o.toString(),10)],c=[0,0],_=i.borderWidth,d=2*_,p=i.borderStyle===t.PdfBorderStyle.inset||i.borderStyle===t.PdfBorderStyle.beveled;p?(c[0]=2*d,c[1]=2*_):(c[0]=d+2,c[1]=1*_+1);var l=i.foreBrush,u=i.bounds,f=u[2]-d,g=u;if(g[3]-=p?d:_,e._setClip(g,t._PdfFillMode.winding),0===i.rotationAngle){var y=u[0]+_;p&&(y+=_,f-=d),l=new Ve([153,193,218]),e._drawRectangle(y,c[1],f,u[3],l),l=new Ve([0,0,0])}var m=h[1]?h[1]:h[0],b=[c[0],c[1],f-c[0],u[3]];if(i.rotationAngle>0){var v=e._save();if(90===i.rotationAngle)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),g=[e._size[1]-(g[1]+g[3]),g[0],g[3]+g[2],g[2]];else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),g=[g[1],e._size[0]-(g[0]+g[2]),g[3]+g[2],g[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),g=[e._size[0]-(g[0]+g[2]),e._size[1]-(g[1]+g[3]),g[2],g[3]]}y=u[0]+_;p&&(y+=_,f-=d),l=new Ve([153,193,218]),e._drawRectangle(y,c[1],f,u[3],l),l=new Ve([0,0,0]),e._drawString(m,n,b,null,l,r),e._restore(v)}else e._drawString(m,n,b,null,l,r)}e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())},i.prototype._obtainFont=function(e){var i="",n=1;if(e&&(e._dictionary.has("DS")||e._dictionary.has("DA"))){if(e._dictionary.has("DS"))for(var r=e._dictionary.get("DS").split(";"),a=0;a<r.length;a++){var s=r[Number.parseInt(a.toString(),10)].split(":");if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-family"))i=s[1];else if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-size"))s[1].endsWith("pt")&&(n=Number.parseFloat(s[1].replace("pt","")));else if(-1===r[Number.parseInt(a.toString(),10)].indexOf("font-style")&&-1!==r[Number.parseInt(a.toString(),10)].indexOf("font")){for(var o=s[1].split(" "),h=0;h<o.length;h++)""===o[Number.parseInt(h.toString(),10)]||o[Number.parseInt(h.toString(),10)].endsWith("pt")||(i+=o[Number.parseInt(h.toString(),10)]+" "),o[Number.parseInt(h.toString(),10)].endsWith("pt")&&(n=Number.parseFloat(o[Number.parseInt(h.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-2);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var c=e._dictionary.get("DA");if(c&&""!==c&&-1!==c.indexOf("Tf")){var _=c.split(" ");for(a=0;a<_.length;a++)if(-1!==_[Number.parseInt(a.toString(),10)].indexOf("Tf")){for(i=_[a-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);n=Number.parseFloat(_[a-1])}var d=0;if(0===n){var p=new At(t._PdfFontFamily.helvetica,d);null!==p&&(d=this._getFontHeight(p._fontFamily),(Number.isNaN(d)||0===d)&&(d=12),p._size=d,n=d)}}}switch(i=i.trim()){case"Helv":this._pdfFont=new At(t._PdfFontFamily.helvetica,n,t._PdfFontStyle.regular);break;case"Courier":case"Cour":this._pdfFont=new At(t._PdfFontFamily.courier,n,t._PdfFontStyle.regular);break;case"Symb":this._pdfFont=new At(t._PdfFontFamily.symbol,n,t._PdfFontStyle.regular);break;case"TiRo":this._pdfFont=new At(t._PdfFontFamily.timesRoman,n,t._PdfFontStyle.regular);break;case"ZaDb":this._pdfFont=new At(t._PdfFontFamily.zapfDingbats,n,t._PdfFontStyle.regular);break;default:this._pdfFont=new At(t._PdfFontFamily.helvetica,n,t._PdfFontStyle.regular)}}return this._pdfFont},i.prototype._getFontHeight=function(e){var i,n,r,a,s,o=this._dictionary.get("I"),h=this.border.width;if(this._isLoaded){n=new At(e,12),r=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt"),s=this.bounds;var c=[];if(o&&o.length>0)o.forEach((function(t){c.push(n._measureString(a[Number.parseInt(t.toString(),10)][1],r,[0,0],0,0)[0])}));else if(a.length>0)for(var _=n._measureString(a[0][1],r,[0,0],0,0)[0],d=1;d<a.length;++d){var p=n._measureString(a[Number.parseInt(d.toString(),10)][1],r,[0,0],0,0)[0];_=Math.max(_,p),c.push(_)}i=c.length>0?12*(s.width-4*h)/c.sort()[c.length-1]:12}else{if(i=0,!(o&&o.length>0))return i;n=new At(e,12),r=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt");p=n._measureString(a[o[0]][1],r,[0,0],0,0)[0];s=this.bounds,i=p?12*(s.width-4*h)/p:12}var l=0;if(o&&o.length>0){if(12!==i){n=new At(e,i);var u=a[o[0]][1],f=n._measureString(u,r,[0,0],0,0);if(f[0]>s.width||f[1]>s.height){p=s.width-4*h;var g=s.height-4*h;for(d=1;d<=s.height;d++){n._size=d;var y=n._measureString(u,r,[0,0],0,0);if(y[0]>s.width||y[1]>g){l=d;do{l-=.001,n._size=l;var m=n._getLineWidth(u,r);if(l<.248){n._size=.248;break}if(y=n._measureString(u,r,[0,0],0,0),m<p&&y[1]<g){n._size=l;break}}while(l>.248);i=l;break}}}}}else i>12&&(i=12);return i},i}(jt),qt=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return Dt(i,e),Object.defineProperty(i.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=ai(this._dictionary,this.page)),t||(this._bounds?this._bounds:t)},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded?void 0===e||this._dictionary.has("Rect")?this._dictionary.update("Rect",hi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t):e?(e._page=this.page,e.bounds=t):this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){var t=this._dictionary.get("I");return 1===t.length?t[0]:t},set:function(t){var e=this,i=this._options.length;"number"==typeof t?(this._checkIndex(t,i),this._dictionary.update("I",[t])):(t.forEach((function(t){e._checkIndex(t,i)})),this._dictionary.update("I",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiSelect",{get:function(){return this._isLoaded?0!=(this._fieldFlags&t._FieldFlag.multiSelect):this._multiSelect},set:function(e){this.multiSelect!==e&&(this._multiSelect=e,e?this._fieldFlags|=t._FieldFlag.multiSelect:this._fieldFlags&=~t._FieldFlag.multiSelect)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_options",{get:function(){return this._optionArray||(this._dictionary.has("Opt")?this._optionArray=this._dictionary.getArray("Opt"):(this._optionArray=[],this._dictionary.update("Opt",this._optionArray))),this._optionArray},enumerable:!0,configurable:!0}),i._load=function(t,e,n,r){var a=new i;a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids"));var s=a._dictionary.getArray("Opt");return a._listValues=new Array(s.length),a._defaultIndex=0,a._parsedItems=new Map,a.itemsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){var e;if(t<this.itemsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;(n=this._kids[Number.parseInt(t.toString(),10)])&&(i=this._crossReference._fetch(n)),i&&((e=Ae._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}else if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{i=void 0;var n=void 0;(n=1===this.itemsCount?this._kids[0]:this._kids[Number.parseInt(t.toString(),10)])&&(i=this._crossReference._fetch(n)),i&&((e=Ae._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}return e},i.prototype.addItem=function(t){return this._addToOptions(t,this),this._listValues.length-1},i.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._dictionary=new _(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",a.get("Ch")),this._dictionary.update("T",e),this._parsedItems=new Map,this._listValues=[],this._kids=[],this.bounds=i},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this._dictionary.get("I"),i=0;i<t.length;i++)null!=e?(this._listValues[Number.parseInt(i.toString(),10)]=t[Number.parseInt(i.toString(),10)][1],i===e?(this.itemAt(i)._text=this._listValues[Number.parseInt(i.toString(),10)],this._selectedIndex=i):this.itemAt(i)._text=this._listValues[Number.parseInt(i.toString(),10)]):this.itemAt(i)._text=""}},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this.itemsCount;if(this._kids&&this._kids.length>0)if(e>1)for(var i=0;i<e;i++){if((a=this.itemAt(i))&&!this._checkFieldFlag(a._dictionary)){var n=this._createAppearance(a);if(t)(r=a._getPage())&&this._drawTemplate(n,r,a.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}}else{var r,a=this.itemAt(0);n=this._createAppearance();if(t)(r=this.page)&&this._drawTemplate(n,r,this.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}this._dictionary._updated=!t}},i.prototype._createAppearance=function(e){var i=new Fe;if(e){var n=e.bounds,r=e._getPage();e._isLoaded&&r&&void 0!==r.rotation&&r.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],r.size,r.rotation):i.bounds=[0,0,n.width,n.height];var a=e.backColor;i.backBrush=new Ve(a),i.foreBrush=new Ve(e.color);var s=e.border;i.borderPen=new We(e.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new Ve(o),i.rotationAngle=e.rotationAngle;var h=void 0!==e.textAlignment?e.textAlignment:t.PdfTextAlignment.left,c=this.multiSelect?t._PdfVerticalAlignment.top:t._PdfVerticalAlignment.middle;i.stringFormat=new nt(h,c)}else{n=this.bounds;this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],this.page.size,this.page.rotation):i.bounds=[0,0,n.width,n.height];a=this.backColor;i.backBrush=new Ve(a),i.foreBrush=new Ve(this.color);s=this.border;i.borderPen=new We(this.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var _;o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new Ve(o),i.rotationAngle=this.rotationAngle,i.stringFormat=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.middle)}i.required=this.required;var d=new it(i.bounds,this._crossReference),p=d.graphics;if(p._sw._clear(),this.required||(p._sw._beginMarkupSequence("Tx"),p._initializeCoordinates()),this._isLoaded){var l=this._obtainFont(e);l||(l=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular)),this._drawListBox(p,i,l,i.stringFormat)}else this._font||(this._font=new At(t._PdfFontFamily.timesRoman,12)),this._drawListBox(p,i,this._font,i.stringFormat);return this.required||p._sw._endMarkupSequence(),d},i.prototype._drawListBox=function(e,i,n,r){e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());for(var a=this._options,s=function(s){var h=a[Number.parseInt(s.toString(),10)],c=[],_=i.borderWidth,d=2*_,p=i.borderStyle===t.PdfBorderStyle.inset||i.borderStyle===t.PdfBorderStyle.beveled;p?(c.push(2*d),c.push((s+2)*_+n._metrics.getHeight()*s)):(c.push(d+2),c.push((s+1)*_+n._metrics.getHeight()*s+1));var l=i.foreBrush,u=i.bounds,f=u[2]-d,g=u;g[3]-=p?d:_,e._setClip(g,t._PdfFillMode.winding);var y=!1;if(o._dictionary.get("I").forEach((function(t){y=y||t===s})),0===i.rotationAngle&&y){var m=u[0]+_;p&&(m+=_,f-=d),l=new Ve([153,193,218]),e._drawRectangle(m,c[1],f,n._metrics.getHeight(),l),l=new Ve([0,0,0])}var b=h[1]?h[1]:h[0],v=[c[0],c[1],f-c[0],n._metrics.getHeight()];if(i.rotationAngle>0){var w=e._save();if(90===i.rotationAngle)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),g=[m=e._size[1]-(g[1]+g[3]),g[0],g[3]+g[2],g[2]];else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),g=[m=g[1],e._size[0]-(g[0]+g[2]),g[3]+g[2],g[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),g=[m=e._size[0]-(g[0]+g[2]),e._size[1]-(g[1]+g[3]),g[2],g[3]]}if(y){m=u[0]+_;p&&(m+=_,f-=d),l=new Ve([153,193,218]),e._drawRectangle(m,c[1],f,n._metrics.getHeight(),l),l=new Ve([0,0,0])}e._drawString(b,n,v,null,l,r),e._restore(w)}else e._drawString(b,n,v,null,l,r)},o=this,h=0;h<a.length;++h)s(h);e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())},i.prototype._obtainFont=function(e){var i="",n=1;if(e._dictionary.has("DS")||e._dictionary.has("DA")){if(e._dictionary.has("DS"))for(var r=e._dictionary.get("DS").split(";"),a=0;a<r.length;a++){var s=r[Number.parseInt(a.toString(),10)].split(":");if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-family"))i=s[1];else if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-size"))s[1].endsWith("pt")&&(n=Number.parseFloat(s[1].replace("pt","")));else if(-1===r[Number.parseInt(a.toString(),10)].indexOf("font-style")&&-1!==r[Number.parseInt(a.toString(),10)].indexOf("font")){for(var o=s[1].split(" "),h=0;h<o.length;h++)""===o[Number.parseInt(h.toString(),10)]||o[Number.parseInt(h.toString(),10)].endsWith("pt")||(i+=o[Number.parseInt(h.toString(),10)]+" "),o[Number.parseInt(h.toString(),10)].endsWith("pt")&&(n=Number.parseFloat(o[Number.parseInt(h.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-2);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var c=e._dictionary.get("DA");if(c&&""!==c&&-1!==c.indexOf("Tf")){var _=c.split(" ");for(a=0;a<_.length;a++)if(-1!==_[Number.parseInt(a.toString(),10)].indexOf("Tf")){for(i=_[a-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);n=Number.parseFloat(_[a-1])}var d=0;if(0===n){var p=new At(t._PdfFontFamily.helvetica,d);null!==p&&(d=this._getFontHeight(p._fontFamily),(Number.isNaN(d)||0===d)&&(d=12),p._size=d,n=d)}}}switch(i=i.trim()){case"Helv":this._font=new At(t._PdfFontFamily.helvetica,n,t._PdfFontStyle.regular);break;case"Courier":case"Cour":this._font=new At(t._PdfFontFamily.courier,n,t._PdfFontStyle.regular);break;case"Symb":this._font=new At(t._PdfFontFamily.symbol,n,t._PdfFontStyle.regular);break;case"TiRo":this._font=new At(t._PdfFontFamily.timesRoman,n,t._PdfFontStyle.regular);break;case"ZaDb":this._font=new At(t._PdfFontFamily.zapfDingbats,n,t._PdfFontStyle.regular);break;default:this._font=new At(t._PdfFontFamily.helvetica,n,t._PdfFontStyle.regular)}}return this._font},i.prototype._getFontHeight=function(e){var i=new At(e,12,t._PdfFontStyle.regular),n=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.middle),r=0;if(this._listValues.length>0){for(var a=i._measureString(this._listValues[0],n,[0,0],0,0)[0],s=1;s<this._listValues.length;++s){var o=i._measureString(this._listValues[Number.parseInt(s.toString(),10)],n,[0,0],0,0)[0];a=a>o?a:o}r=(r=12*(this.bounds.width-4*this.border.width)/a)>12?12:r}return r},i}(jt),Kt=function(e){function i(t,i,n,r){var a=e.call(this)||this;return a._isLoaded=!0,a._form=t,a._dictionary=i,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a}return Dt(i,e),i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=this.itemsCount;if(e>0)for(var i=void 0,n=0;n<e;n++){var r=this.itemAt(n);if(r&&r._dictionary){var a=r._getPage();a&&(i||0!==n||(i=this._getItemTemplate(r._dictionary)),this._flattenSignature(r._dictionary,a,r.bounds,i))}}else this._flattenSignature(this._dictionary,this.page,this.bounds)}},i.prototype._flattenSignature=function(e,i,n,r){var a;if(e.has("AP")){var s=e.get("AP");if(s&&s.has("N")){var o=s.get("N"),h=s.getRaw("N");if(h&&(o.reference=h),o&&(a=r||new it(o,this._crossReference))&&i){var c=(_=i._graphics)._save();i.rotation!==t.PdfRotationAngle.angle0?_._drawTemplate(a,this._calculateTemplateBounds(n,i,a,_)):_._drawTemplate(a,n),_._restore(c)}}}else if(r&&i){var _;c=(_=i._graphics)._save();i.rotation!==t.PdfRotationAngle.angle0?_._drawTemplate(a,this._calculateTemplateBounds(n,i,a,_)):_._drawTemplate(a,n),_._restore(c)}},i.prototype._calculateTemplateBounds=function(t,e,i,n){var r=t.x,a=t.y;if(e){var s=this._obtainGraphicsRotation(n._matrix);90===s?(n._translateTransform(i._size[1],0),n._rotateTransform(90),r=t.x,a=-(e._size[1]-t.y-t.height)):180===s?(n._translateTransform(i._size[0],i._size[1]),n._rotateTransform(180),r=-(e._size[0]-(t.x+i._size[0])),a=-(e._size[1]-t.y-i._size[1])):270===s&&(n._translateTransform(0,i._size[0]),n._rotateTransform(270),r=-(e._size[0]-t.x-t.width),a=t.y)}return{x:r,y:a,width:t.width,height:t.height}},i.prototype._obtainGraphicsRotation=function(t){var e=Math.round(180*Math.atan2(t._matrix._elements[2],t._matrix._elements[0])/Math.PI);switch(e){case-90:e=90;break;case-180:e=180;break;case 90:e=270}return e},i.prototype._getItemTemplate=function(t){var e;if(t.has("AP")){var i=t.get("AP");if(i&&i.has("N")){var n=i.get("N"),r=i.getRaw("N");r&&(n.reference=r),n&&(e=new it(n,this._crossReference))}}return e},i}(jt),Xt=function(){function t(t){var e,i="",n=0;if(t&&""!==t)for(var r=t.split(" "),a=0;a<r.length;a++)switch(r[Number.parseInt(a.toString(),10)]){case"g":e=new Array(Number.parseFloat(r[a-1]));break;case"rg":e=new Array(Number.parseFloat(r[a-3]),Number.parseFloat(r[a-2]),Number.parseFloat(r[a-1]));break;case"k":e=new Array(Number.parseFloat(r[a-4]),Number.parseFloat(r[a-3]),Number.parseFloat(r[a-2]),Number.parseFloat(r[a-1]));break;case"Tf":n=Number.parseFloat(r[a-1]),(i=r[a-2].substring(1)).includes("#2C")&&i.replace("#2C",",")}this.fontName=i,this.fontSize=n,this.color=void 0!==e?_i(e):[0,0,0]}return t.prototype.toString=function(){var t=[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))];return"/"+this.fontName+" "+this.fontSize+" Tf "+t[0].toString()+" "+t[1].toString()+" "+t[2].toString()+" rg"},t}(),Qt=function(){function t(t,e){this._dictionary=new _,this._annotations=t,this._crossReference=t._crossReference,void 0!==e&&(this._bounds=e),this._initialize()}return Object.defineProperty(t.prototype,"_normal",{get:function(){return!this._templateNormal&&this._dictionary.has("AP")&&(this._templateNormal=this._dictionary.get("N")),this._templateNormal},set:function(t){t&&(this._templateNormal=t,this._dictionary.set("N",this._templateNormal))},enumerable:!0,configurable:!0}),t.prototype._initialize=function(){this._normal=new it(this._bounds,this._crossReference)},t.prototype._getNormalTemplate=function(){return this._templateNormal},t}(),Jt=(Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Yt=function(){function e(){this._isLoaded=!1,this._setAppearance=!1,this._isAllRotation=!0}return Object.defineProperty(e.prototype,"author",{get:function(){var t;void 0===this._author&&this._dictionary.has("Author")&&((t=this._dictionary.get("Author"))&&(this._author=t));void 0===this._author&&this._dictionary.has("T")&&((t=this._dictionary.get("T"))&&(this._author=t));return this._author},set:function(t){if(this._isLoaded&&"string"==typeof t&&t!==this.author){var e=!1;this._dictionary.has("T")&&(this._dictionary.update("T",t),this._author=t,e=!0),this._dictionary.has("Author")&&(this._dictionary.update("Author",t),this._author=t,e=!0),e||(this._dictionary.update("T",t),this._author=t)}this._isLoaded||"string"!=typeof t||this._dictionary.update("T",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){if(void 0===this._border){var e,i=new Re;if(i._dictionary=this._dictionary,this._dictionary.has("Border"))(e=this._dictionary.getArray("Border"))&&e.length>=3&&(i._hRadius=e[0],i._vRadius=e[1],i._width=e[2]);if(this._dictionary.has("BS"))if(e=this._dictionary.get("BS")){if(e.has("W")){var n=e.get("W");void 0===n||Number.isNaN(n)||(i._width=n)}if(e.has("S")){var r=e.get("S");if(r)switch(r.name){case"D":i._style=t.PdfBorderStyle.dashed;break;case"B":i._style=t.PdfBorderStyle.beveled;break;case"I":i._style=t.PdfBorderStyle.inset;break;case"U":i._style=t.PdfBorderStyle.underline;break;default:i._style=t.PdfBorderStyle.solid}}if(e.has("D")){var a=e.getArray("D");a&&(i._dash=a)}}this._border=i}return this._border},set:function(t){var e,i,n,r,s,o=this.border;if((!this._isLoaded||void 0!==t.width&&o.width!==t.width)&&(e=t.width),(!this._isLoaded||void 0!==t.hRadius&&o.hRadius!==t.hRadius)&&(i=t.hRadius),(!this._isLoaded||void 0!==t.vRadius&&o.vRadius!==t.vRadius)&&(n=t.vRadius),(!this._isLoaded||void 0!==t.style&&o.style!==t.style)&&(r=t.style),void 0!==t.dash&&o.dash!==t.dash&&(s=t.dash),!this._isWidget&&(this._dictionary.has("Border")||e||n||i)&&(this._border._hRadius=void 0!==i?i:o.hRadius,this._border._vRadius=void 0!==n?n:o.vRadius,this._border._width=void 0!==e?e:o.width,this._dictionary.update("Border",[this._border.hRadius,this._border.vRadius,this._border.width])),this._dictionary.has("BS")||e||r||s){this._border._width=void 0!==e?e:o.width,this._border._style=void 0!==r?r:o.style,this._border._dash=void 0!==s?s:o.dash;var h=this._dictionary.has("BS")?this._dictionary.get("BS"):new _(this._crossReference);h.update("Type",a.get("Border")),h.update("W",this._border.width),h.update("S",di(this._border.style)),void 0!==this._border.dash&&h.update("D",this._border.dash),this._dictionary.update("BS",h),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return void 0===this._annotFlags&&(this._annotFlags=t.PdfAnnotationFlag.default,this._dictionary.has("F")&&(this._annotFlags=this._dictionary.get("F"))),this._annotFlags},set:function(t){void 0!==t&&t!==this._annotFlags&&(this._annotFlags=t,this._dictionary.update("F",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return void 0===this._color&&this._dictionary.has("C")&&(this._color=_i(this._dictionary.getArray("C"))),this._color},set:function(t){if(void 0!==t&&3===t.length){var e=this.color;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerColor",{get:function(){return void 0===this._innerColor&&this._dictionary.has("IC")&&(this._innerColor=_i(this._dictionary.getArray("IC"))),this._innerColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.innerColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._innerColor=t,this._dictionary.update("IC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creationDate",{get:function(){return void 0===this._creationDate&&this._dictionary.has("CreationDate")&&(this._creationDate=this._dictionary.get("CreationDate")),this._creationDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modifiedDate",{get:function(){return void 0===this._modifiedDate&&this._dictionary.has("ModDate")&&(this._modifiedDate=this._dictionary.get("ModDate")),void 0===this._modifiedDate&&this._dictionary.has("M")&&(this._modifiedDate=this._dictionary.get("M")),this._modifiedDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._isLoaded&&(this._bounds=ai(this._dictionary,this._page)),this._bounds},set:function(t){if(t)if(this._isBounds=!0,this._isLoaded){var e=this._page.size;if(e){var i=e[1]-(t.y+t.height),n=i+t.height;this._dictionary.update("Rect",[t.x,i,t.x+t.width,n]),this._bounds=t}}else this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){if(void 0===this._caption){var e=new xe;if(e._dictionary=this._dictionary,this._dictionary.has("Cap")&&(e._cap=this._dictionary.get("Cap")),this._dictionary.has("CP")){var i=this._dictionary.get("CP");i&&(e._type="Top"===i.name?t.PdfLineCaptionType.top:t.PdfLineCaptionType.inline)}this._dictionary.has("CO")&&(e._offset=this._dictionary.getArray("CO")),this._caption=e}return this._caption},set:function(t){var e=this.caption;t&&(this._isLoaded&&t.cap===e.cap||(this._caption.cap=t.cap),this._isLoaded&&t.type===e.type||(this._caption.type=t.type),this._isLoaded&&t.offset===e.offset||(this._caption.offset=t.offset))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){if(void 0===this._opacity&&this._dictionary.has("CA")){var t=this._dictionary.get("CA");void 0!==t&&(this._opacity=t)}return this._opacity},set:function(t){void 0===t||Number.isNaN(t)||(t>=0&&t<=1?(this._dictionary.update("CA",t),this._opacity=t):t<0?this._dictionary.update("CA",0):this._dictionary.update("CA",1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subject",{get:function(){return void 0===this._subject&&(this._subject=this._dictionary.get("Subject","Subj")),this._subject},set:function(t){if("string"==typeof t){var e=!1;this._dictionary.has("Subj")&&(this._dictionary.update("Subj",t),this._subject=t,e=!0),e&&!this._dictionary.has("Subject")||(this._dictionary.update("Subject",t),this._subject=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return void 0===this._name&&this._dictionary.has("NM")&&(this._name=this._dictionary.get("NM")),this._name},set:function(t){"string"==typeof t&&(this._dictionary.update("NM",t),this._name=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return void 0===this._text&&this._dictionary.has("Contents")&&(this._text=this._dictionary.get("Contents")),this._text},set:function(t){"string"==typeof t&&(this._text=this._dictionary.get("Contents"),"Watermark"!==this._dictionary.get("Subtype").name&&(this._dictionary.update("Contents",t),this._text=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return void 0===this._rotate&&this._dictionary.has("Rotate")&&(this._rotate=this._dictionary.get("Rotate")/90),this._rotate},set:function(t){var e=this.rotate;void 0!==t&&void 0!==e&&(t=(t+e)%4),this._dictionary.update("Rotate",90*t),this._rotate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationAngle",{get:function(){var t=this._getRotationAngle();return t<0&&(t=360+t),t>=360&&(t=360-t),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_hasFlags",{get:function(){return this._dictionary.has("F")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_degreeToRadian",{get:function(){return void 0===this._ratio&&(this._ratio=Math.PI/180),this._ratio},enumerable:!0,configurable:!0}),e.prototype.setAppearance=function(t){this._setAppearance=t,t&&(this._dictionary._updated=!0)},Object.defineProperty(e.prototype,"flattenPopUps",{get:function(){return this._isFlattenPopUps},set:function(t){void 0!==t&&(this._isFlattenPopUps=t)},enumerable:!0,configurable:!0}),e.prototype._initialize=function(t,e){this._page=t,this._crossReference=t._crossReference,e&&(this._dictionary=e),this._isLoaded||(this._dictionary.set("P",this._page._ref),this._dictionary.assignXref(this._crossReference))},e.prototype._getRotationAngle=function(){var t=0;return this._dictionary.has("Rotate")?t=this._dictionary.get("Rotate"):this._dictionary.has("Rotation")&&(t=this._dictionary.get("Rotation")),t},e.prototype._getBoundsValue=function(t){var e=t.length,i=[],n=[];if(t&&e>0){for(var r=[],a=0;a<t.length;a++){var s=t[Number.parseInt(a.toString(),10)];r.push(s)}var o=0,h=0;for(a=0;a<r.length;a++)a%2==0?(i[Number.parseInt(o.toString(),10)]=r[Number.parseInt(a.toString(),10)],o++):(n[Number.parseInt(h.toString(),10)]=r[Number.parseInt(a.toString(),10)],h++)}return i.sort((function(t,e){return t>e?1:-1})),n.sort((function(t,e){return t>e?1:-1})),{x:i[0],y:n[0],width:i[i.length-1]-i[0],height:n[n.length-1]-n[0]}},e.prototype._validateTemplateMatrix=function(t){var e=!1;if(t&&t.has("Matrix")){var i=t.getArray("Matrix");if(i&&i.length>3&&void 0!==i[0]&&void 0!==i[1]&&void 0!==i[2]&&void 0!==i[3]&&1===i[0]&&0===i[1]&&0===i[2]&&1===i[3]){e=!0;var n=0,r=0,a=0,s=0;i.length>4&&(a=-i[4],i.length>5&&(s=-i[5]));var o=void 0;this._dictionary.has("Rect")&&(o=this._dictionary.getArray("Rect"))&&o.length>1&&(n=o[0],r=o[1]),n===a&&r===s||0!==a||0!==s||(this._locationDisplaced=!0)}}else e=!0;return e},e.prototype._flattenAnnotationTemplate=function(t,e){var i=this._page._graphics,n=i._save();e||(t._isAnnotationTemplate=!0,t._needScale=!0),void 0!==this.opacity&&this._opacity<1&&i._setTransparency(this._opacity);var r=this._calculateTemplateBounds(this.bounds,this._page,t,e,i);i._drawTemplate(t,r),i._restore(n),this._removeAnnotationFromPage(this._page,this)},e.prototype._calculateTemplateBounds=function(e,i,n,r,a){var s=e,o=e.x,h=e.y,c=e.width,_=e.height;if(!r){var d=this._dictionary.getArray("Rect");d&&(s=si(d))}if(void 0!==i){var p=this._obtainGraphicsRotation(a._matrix);if(90===p)a._translateTransform(n._size[1],0),a._rotateTransform(90),r||void 0!==this._rotate&&this._rotate===t.PdfRotationAngle.angle180?(o=e.x,h=this._locationDisplaced?i._origin&&0!==i._o[1]?e.y+e.height:-(i.size[1]-(e.height+e.y)+(e.height-n._size[1])):-(i.size[1]-e.y-e.height)):(o=e.x,h=-(i.size[1]-(e.height+e.y)+(e.width-n._size[1])),c=e.height,_=e.width);else if(180===p)a._translateTransform(n._size[0],n._size[1]),a._rotateTransform(180),r?(o=-(i.size[0]-(e.x+e.width)),h=-(i.size[1]-e.y-e.height)):(o=-(i.size[0]-(e.x+n._size[0])),h=-(i.size[1]-e.y-n._size[1]),void 0===this.rotate||this._rotate!==t.PdfRotationAngle.angle90&&this._rotate!==t.PdfRotationAngle.angle270||(h=-(i.size[1]-e.y-n._size[1])-(e.width-e.height),c=e.height,_=e.width));else if(270===p)if(a._translateTransform(0,n._size[0]),a._rotateTransform(270),r||void 0!==this.rotate&&this._rotate===t.PdfRotationAngle.angle180)o=-(i.size[0]-e.x-e.width),h=e.y;else{o=-(i.size[0]-s.x-n._size[0]);var l=n._content.dictionary.getArray("Matrix"),u=n._content.dictionary.getArray("BBox");h=l&&u&&l[5]!==u[2]?e.y-(e.height-e.width):e.y+e.height-e.width,c=e.height,_=e.width}else 0===p&&(r||void 0===this.rotate||this._rotate!==t.PdfRotationAngle.angle90&&this._rotate!==t.PdfRotationAngle.angle270||(o=e.x,h=e.y+e.height-e.width,c=e.height,_=e.width))}return{x:o,y:h,width:c,height:_}},e.prototype._obtainGraphicsRotation=function(t){var e=Math.atan2(t._matrix._elements[2],t._matrix._elements[0]),i=Math.round(180*e/Math.PI);switch(i){case-90:i=90;break;case-180:i=180;break;case 90:i=270}return i},e.prototype._removeAnnotationFromPage=function(t,e){var i=[];t._pageDictionary&&t._pageDictionary.has("Annots")&&(i=t._pageDictionary.get("Annots")),e._dictionary.set("P",t._ref);var n=i.indexOf(e._ref);-1!==n&&(i.splice(n,1),this._crossReference._cacheMap.has(e._ref)&&this._crossReference._cacheMap.delete(e._ref)),t._pageDictionary.set("Annots",i)},e.prototype._drawCloudStyle=function(t,e,i,n,r,a,s){if(this._isClockWise(a)){for(var o=[],h=a.length-1;h>=0;h--)o.push(a[Number.parseInt(h.toString(),10)]);a=o}var c=[],_=2*n*r,d=a[a.length-1];for(h=0;h<a.length;h++){var p=a[Number.parseInt(h.toString(),10)],l=p[0]-d[0],u=p[1]-d[1],f=Math.sqrt(l*l+u*u);l/=f,u/=f;for(var g=0;g+.1*_<f;g+=_){var y=new Ne;y.point=[d[0]+g*l,d[1]+g*u],c.push(y)}d=p}var m=c[c.length-1];for(h=0;h<c.length;h++){var b=c[Number.parseInt(h.toString(),10)],v=this._getIntersectionDegrees(m.point,b.point,n);m.endAngle=v[0],b.startAngle=v[1],m=b}var w=new Ft;for(h=0;h<c.length;h++){var S=(R=c[Number.parseInt(h.toString(),10)]).startAngle%360,P=R.endAngle%360,A=0;if(S>0&&P<0)A=180-S+(180-(P<0?-P:P));else if(S<0&&P>0)A=-S+P;else if(S>0&&P>0){A=S>P?360-(S-P):P-S}else if(S<0&&P<0){A=S>P?360-(S-P):-(S+-P)}A<0&&(A=-A),R.endAngle=A,w._addArc(R.point[0]-n,R.point[1]-n,2*n,2*n,S,A)}w._closeFigure();var x,k=[];if(s)for(h=0;h<w._points.length;h++)k.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);s?((x=new Ft)._points=k,x._pathTypes=w._pathTypes):((x=new Ft)._points=w._points,x._pathTypes=w._pathTypes),null!==e&&t._drawPath(x,null,e);var T=180/(3*Math.PI);w=new Ft;for(h=0;h<c.length;h++){var R=c[Number.parseInt(h.toString(),10)];w._addArc(R.point[0]-n,R.point[1]-n,2*n,2*n,R.startAngle,R.endAngle+T)}if(w._closeFigure(),k=[],s)for(h=0;h<w._points.length;h++)k.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);s?((x=new Ft)._points=k,x._pathTypes=w._pathTypes):((x=new Ft)._points=w._points,x._pathTypes=w._pathTypes),t._drawPath(x,i,null)},e.prototype._isClockWise=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[Number.parseInt(i.toString(),10)],r=t[(i+1)%t.length];e+=(r[0]-n[0])*(r[1]+n[1])}return e>0},e.prototype._getIntersectionDegrees=function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],a=.5*Math.sqrt(n*n+r*r)/i;a<-1?a=-1:a>1&&(a=1);var s=Math.atan2(r,n),o=Math.acos(a);return[(s-o)*(180/Math.PI),(Math.PI+s+o)*(180/Math.PI)]},e.prototype._obtainStyle=function(e,i,n,r){var a=this.border.dash;if(a&&a.length>0){for(var s=[],o=!1,h=0;h<a.length;h++)s[Number.parseInt(h.toString(),10)]=a[Number.parseInt(h.toString(),10)],s[Number.parseInt(h.toString(),10)]>0&&(o=!0);o&&this.border.style===t.PdfBorderStyle.dashed&&(e._dashStyle=t._PdfDashStyle.dash,e._dashPattern=s)}if(r)if(r instanceof Fe){var c;if(!this._isBounds&&this._dictionary.has("RD"))(c=this._dictionary.getArray("RD"))&&(i[0]=i[0]+c[0],i[1]=i[1]+n+c[1],i[2]=i[2]-(c[0]+c[2]),i[3]=i[3]-(c[1]+c[3]));else i[0]=i[0]+n,i[1]=i[1]+n,i[2]=i[2]-this.border.width,i[3]=i[3]-this.border.width;r.bounds=i}else if(0!==r.intensity&&r.style===t.PdfBorderEffectStyle.cloudy){var _=5*r.intensity;i[0]=i[0]+_+n,i[1]=i[1]+_+n,i[2]=i[2]-2*_-2*n,i[3]=i[3]-2*_-2*n}else i[0]=i[0]+n,i[1]=i[1]+n,i[2]=i[2]-this.border.width,i[3]=this.bounds.height-this.border.width;else!this._isBounds&&this._dictionary.has("RD")?(c=this._dictionary.getArray("RD"))&&(i[0]=i[0]+c[0],i[1]=i[1]+n+c[1],i[2]=i[2]-2*c[2],i[3]=i[3]-this.border.width,i[3]=i[3]-2*c[3]):(i[1]=i[1]+n,i[3]=this.bounds.height-this.border.width);return i},e.prototype._createRectangleAppearance=function(e){var i=this.border.width,n=this._dictionary.getArray("RD");if(!n&&0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy){var r={x:this.bounds.x-5*e.intensity-i/2,y:this.bounds.y-5*e.intensity-i/2,width:this.bounds.width+10*e.intensity+i,height:this.bounds.height+10*e.intensity+i};n=[(a=5*e.intensity)+i/2,a+i/2,a+i/2,a+i/2],this._dictionary.set("RD",n),this.bounds=r}if(!this._isBounds&&n){r={x:this.bounds.x+n[0],y:this.bounds.y+n[1],width:this.bounds.width-2*n[2],height:this.bounds.height-2*n[3]};if(0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy){r.x=r.x-5*e.intensity-i/2,r.y=r.y-5*e.intensity-i/2,r.width=r.width+10*e.intensity+i,r.height=r.height+10*e.intensity+i;var a=5*e.intensity;this._dictionary.set("RD",[a+i/2,a+i/2,a+i/2,a+i/2])}else delete this._dictionary._map.RD;this.bounds=r}var s=i/2,o=[0,0,this.bounds.width,this.bounds.height],h=new it(o,this._crossReference);Ri(h,null),0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy&&(h._writeTransformation=!1);var c=h.graphics,_=new Fe;this.innerColor&&(_.backBrush=new Ve(this._innerColor)),i>0&&this.color&&(_.borderPen=new We(this._color,i)),this.color&&(_.foreBrush=new Ve(this._color));var d=this._obtainStyle(_.borderPen,o,s,e);return void 0!==this.opacity&&this._opacity<1&&(c._save(),c._setTransparency(this._opacity)),0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy?this._drawRectangleAppearance(d,c,_,e.intensity):c._drawRectangle(d[0],d[1],d[2],d[3],_.borderPen,_.backBrush),void 0!==this.opacity&&this._opacity<1&&c._restore(),h},e.prototype._drawRectangleAppearance=function(t,e,i,n){var r=new Ft;r._addRectangle(t[0],t[1],t[2],t[3]);var a=4.25*n;if(a>0){for(var s=[],o=0;o<r._points.length;o++){var h=[r._points[Number.parseInt(o.toString(),10)][0],-r._points[Number.parseInt(o.toString(),10)][1]];s.push(h)}(r=new Ft)._addPolygon(s),this._drawCloudStyle(e,i.backBrush,i.borderPen,a,.833,r._points,!1)}else e._drawRectangle(t[0],t[1],t[2],t[3],i.borderPen,i.backBrush)},e.prototype._createCircleAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],e=new it(t,this._crossReference);Ri(e,null),this._dictionary.has("BE")&&(e._writeTransformation=!1);var i=e.graphics,n=this.border.width,r=new We(this.color,n),a=new Fe;this.innerColor&&(a.backBrush=new Ve(this._innerColor)),n>0&&(a.borderPen=r),this.color&&(a.foreBrush=new Ve(this._color)),a.borderWidth=n;var s=n/2,o=this._obtainStyle(r,t,s);return void 0!==this.opacity&&this._opacity<1&&(i._save(),i._setTransparency(this._opacity)),this._dictionary.has("BE")?this._drawCircleAppearance(o,s,i,a):i._drawEllipse(o[0]+s,o[1],o[2]-n,o[3],a.borderPen,a.backBrush),void 0!==this._opacity&&this._opacity<1&&i._restore(),e},e.prototype._drawCircleAppearance=function(t,e,i,n){var r=0;if(this._dictionary.has("RD")){var a=this._dictionary.getArray("RD");a&&a.length>0&&(r=a[0])}if(r>0){var s=[t[0]+e,-t[1]-t[3],t[2]-this.border.width,t[3]],o=s[0],h=s[1],c=s[0]+s[2],_=s[1]+s[3],d=[];d.push([c,_]),d.push([o,_]),d.push([o,h]),d.push([c,h]);var p=[];p.push([c,h+s[3]/2]),p.push([o+s[2]/2,_]),p.push([o,h+s[3]/2]),p.push([o+s[2]/2,h]);var l=[];l.push([o+s[2]/2,_]),l.push([o,h+s[3]/2]),l.push([o+s[2]/2,h]),l.push([c,h+s[3]/2]);for(var u=[],f=0;f<d.length;f++)this._createBezier(p[Number.parseInt(f.toString(),10)],d[Number.parseInt(f.toString(),10)],l[Number.parseInt(f.toString(),10)],u);this._drawCloudStyle(i,n.backBrush,n.borderPen,r,.833,u,!1)}else i._drawEllipse(t[0]+e,-t[1],t[2]-this.border.width,-t[3],n.borderPen,n.backBrush)},e.prototype._createBezier=function(t,e,i,n){n.push(t),this._populateBezierPoints(t,e,i,0,n),n.push(i)},e.prototype._populateBezierPoints=function(t,e,i,n,r){if(n<2){var a=this._midPoint(t,e),s=this._midPoint(e,i),o=this._midPoint(a,s);n++,this._populateBezierPoints(t,a,o,n,r),r.push(o),this._populateBezierPoints(o,s,i,n,r)}},e.prototype._midPoint=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.prototype._getAngle=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=0;if(n-e==0)a=r>i?90:270;else{var s=(r-i)/(n-e);a=Math.atan(s)*(180/Math.PI),(n-e<0||r-i<0)&&(a+=180),n-e>0&&r-i<0&&(a-=180),a<0&&(a+=360)}return a},e.prototype._getAxisValue=function(t,e,i){return[t[0]+Math.cos(e*this._degreeToRadian)*i,t[1]+Math.sin(e*this._degreeToRadian)*i]},e.prototype._drawLineEndStyle=function(e,i,n,r,a,s,o,h){var c,_,d,p,l,u,f,g;switch(s){case t.PdfLineEndingStyle.square:i._drawRectangle(e[0]-3*o,-(e[1]+3*o),6*o,6*o,r,a);break;case t.PdfLineEndingStyle.circle:i._drawEllipse(e[0]-3*o,-(e[1]+3*o),6*o,6*o,r,a);break;case t.PdfLineEndingStyle.openArrow:c=h?30:150,_=9*o,d=this._getAxisValue(e,n,h?o:-o),p=this._getAxisValue(d,n+c,_),l=this._getAxisValue(d,n-c,_),(g=new Ft)._pen=r,g._addLine(d[0],-d[1],p[0],-p[1]),g._addLine(d[0],-d[1],l[0],-l[1]),i._stateControl(r,null,null),i._buildUpPath(g._points,g._pathTypes),i._drawGraphicsPath(r,null,g._fillMode,!1);break;case t.PdfLineEndingStyle.closedArrow:c=h?30:150,_=9*o,d=this._getAxisValue(e,n,h?o:-o),p=this._getAxisValue(d,n+c,_),l=this._getAxisValue(d,n-c,_),i._drawPolygon([[d[0],-d[1]],[p[0],-p[1]],[l[0],-l[1]]],r,a);break;case t.PdfLineEndingStyle.rOpenArrow:c=h?150:30,_=9*o,d=this._getAxisValue(e,n,h?-o:o),p=this._getAxisValue(d,n+c,_),l=this._getAxisValue(d,n-c,_),(g=new Ft)._pen=r,g._addLine(d[0],-d[1],p[0],-p[1]),g._addLine(d[0],-d[1],l[0],-l[1]),i._stateControl(r,null,null),i._buildUpPath(g._points,g._pathTypes),i._drawGraphicsPath(r,null,g._fillMode,!1);break;case t.PdfLineEndingStyle.rClosedArrow:c=h?150:30,_=9*o,d=this._getAxisValue(e,n,h?-o:o),p=this._getAxisValue(d,n+c,_),l=this._getAxisValue(d,n-c,_),i._drawPolygon([[d[0],-d[1]],[p[0],-p[1]],[l[0],-l[1]]],r,a);break;case t.PdfLineEndingStyle.slash:_=9*o,p=this._getAxisValue(d,n+60,_),l=this._getAxisValue(d,n-120,_),i._drawLine(r,e[0],-e[1],p[0],-p[1]),i._drawLine(r,e[0],-e[1],l[0],-l[1]);break;case t.PdfLineEndingStyle.diamond:_=3*o,p=this._getAxisValue(e,180,_),l=this._getAxisValue(e,90,_),u=this._getAxisValue(e,0,_),f=this._getAxisValue(e,-90,_),i._drawPolygon([[p[0],-p[1]],[l[0],-l[1]],[u[0],-u[1]],[f[0],-f[1]]],r,a);break;case t.PdfLineEndingStyle.butt:_=3*o,p=this._getAxisValue(e,n+90,_),l=this._getAxisValue(e,n-90,_),i._drawLine(r,p[0],-p[1],l[0],-l[1])}},e.prototype._drawLineStyle=function(t,e,i,n,r,a,s,o){0===o&&(o=1,r=null),this._drawLineEndStyle(t,i,n,r,a,s.begin,o,!0),this._drawLineEndStyle(e,i,n,r,a,s.end,o,!1)},e.prototype._obtainFontDetails=function(){var e,i="",n=t._PdfFontStyle.regular;if(this._dictionary.has("DS")||this._dictionary.has("DA")){var r=void 0;if(this._dictionary.has("DS"))for(var a=this._dictionary.get("DS").split(";"),s=0;s<a.length;s++){var o=a[Number.parseInt(s.toString(),10)].split(":");if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-family"))i=o[1];else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-size"))o[1].endsWith("pt")&&(e=Number.parseFloat(o[1].replace("pt","")));else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-style")||-1!==a[Number.parseInt(s.toString(),10)].indexOf("style"))r=a[Number.parseInt(s.toString(),10)];else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font")){for(var h=o[1].split(" "),c=0;c<h.length;c++)""===h[Number.parseInt(c.toString(),10)]||h[Number.parseInt(c.toString(),10)].endsWith("pt")||(i+=h[Number.parseInt(c.toString(),10)]+" "),h[Number.parseInt(c.toString(),10)].endsWith("pt")&&(e=Number.parseFloat(h[Number.parseInt(c.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-1);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var _=this._dictionary.get("DA");if(_&&""!==_&&-1!==_.indexOf("Tf")){var d=_.split(" ");for(s=0;s<d.length;s++)if(-1!==d[Number.parseInt(s.toString(),10)].indexOf("Tf")){for(i=d[s-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);e=Number.parseFloat(d[s-1])}}}if(r&&""!==r)r.split(",").forEach((function(e){switch(e.toLowerCase()){case"bold":n|=t._PdfFontStyle.bold;break;case"italic":n|=t._PdfFontStyle.italic;break;case"strikeout":n|=t._PdfFontStyle.strikeout;break;case"underline":n|=t._PdfFontStyle.underline}}));i&&(i=i.trim())}return{name:i,size:e,style:n}},e.prototype._mapFont=function(e,i,n){var r=e||"",a=void 0!==i?i:1;if(this._dictionary.has("DS")||this._dictionary.has("DA"))switch(r){case"Helvetica":this._pdfFont=new At(t._PdfFontFamily.helvetica,a,n);break;case"Courier":this._pdfFont=new At(t._PdfFontFamily.courier,a,n);break;case"Symbol":this._pdfFont=new At(t._PdfFontFamily.symbol,a,n);break;case"TimesRoman":this._pdfFont=new At(t._PdfFontFamily.timesRoman,a,n);break;case"ZapfDingbats":this._pdfFont=new At(t._PdfFontFamily.zapfDingbats,a,n);break;case"MonotypeSungLight":this._pdfFont=new xt(t._PdfCjkFontFamily.monotypeSungLight,a,n);break;case"SinoTypeSongLight":this._pdfFont=new xt(t._PdfCjkFontFamily.sinoTypeSongLight,a,n);break;case"MonotypeHeiMedium":this._pdfFont=new xt(t._PdfCjkFontFamily.monotypeHeiMedium,a,n);break;case"HanyangSystemsGothicMedium":this._pdfFont=new xt(t._PdfCjkFontFamily.hanyangSystemsGothicMedium,a,n);break;case"HanyangSystemsShinMyeongJoMedium":this._pdfFont=new xt(t._PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium,a,n);break;case"HeiseiKakuGothicW5":this._pdfFont=new xt(t._PdfCjkFontFamily.heiseiKakuGothicW5,a,n);break;case"HeiseiMinchoW3":this._pdfFont=new xt(t._PdfCjkFontFamily.heiseiMinchoW3,a,n);break;default:this._pdfFont=new At(t._PdfFontFamily.helvetica,a,n)}return this._pdfFont},e.prototype._obtainFont=function(){var t=this._obtainFontDetails();return this._mapFont(t.name,t.size,t.style)},e.prototype._getEqualPdfGraphicsUnit=function(e,i){var n;switch(e){case t.PdfMeasurementUnit.inch:n=t.PdfGraphicsUnit.inch,i="in";break;case t.PdfMeasurementUnit.centimeter:n=t.PdfGraphicsUnit.centimeter,i="cm";break;case t.PdfMeasurementUnit.millimeter:n=t.PdfGraphicsUnit.millimeter,i="mm";break;case t.PdfMeasurementUnit.pica:n=t.PdfGraphicsUnit.pica,i="p";break;case t.PdfMeasurementUnit.point:n=t.PdfGraphicsUnit.point,i="pt";break;default:n=t.PdfGraphicsUnit.inch,i="in"}return{graphicsUnit:n,unitString:i}},e.prototype._createMeasureDictionary=function(t){var e=new _;e.set("C",1),e.set("D",100),e.set("F",a.get("D")),e.set("RD","."),e.set("RT",""),e.set("SS",""),e.set("U",t);var i=new _;i.set("C",1),i.set("D",100),i.set("F",a.get("D")),i.set("RD","."),i.set("RT",""),i.set("SS",""),i.set("U","sq "+t);var n=new _;"in"===t?n.set("C",.0138889):"cm"===t?n.set("C",.0352778):"mm"===t?n.set("C",.352778):"pt"===t?n.set("C",1):"p"===t&&n.set("C",.0833333),n.set("D",100),n.set("F",a.get("D")),n.set("RD","."),n.set("RT",""),n.set("SS",""),n.set("U",t);var r=new _;return r.set("A",[i]),r.set("D",[e]),r.set("R","1 "+t+" = 1 "+t),r.set("Type",a.get("Measure")),r.set("X",[n]),r},e.prototype._colorToHex=function(t){return"#"+this._componentToHex(t[0])+this._componentToHex(t[1])+this._componentToHex(t[2])},e.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},e.prototype._getRotatedBounds=function(t,e){if(t.width>0&&t.height>0){var i=new Ee;i._rotate(e);var n=[];n.push([t.x,t.y]),n.push([t.x+t.width,t.y]),n.push([t.x+t.width,t.y+t.height]),n.push([t.x,t.y+t.height]);for(var r=0;r<n.length;r++)n[Number.parseInt(r.toString(),10)]=i._matrix._transform(n[Number.parseInt(r.toString(),10)]);var a=new Ft;a._addRectangle(t.x,t.y,t.width,t.height);for(r=0;r<4;r++)a._points[Number.parseInt(r.toString(),10)]=n[Number.parseInt(r.toString(),10)];var s=n[0][0],o=n[3][0],h=n[0][1],c=n[3][1];for(r=0;r<4;r++)n[Number.parseInt(r.toString(),10)][0]<s&&(s=n[Number.parseInt(r.toString(),10)][0]),n[Number.parseInt(r.toString(),10)][0]>o&&(o=n[Number.parseInt(r.toString(),10)][0]),n[Number.parseInt(r.toString(),10)][1]<h&&(h=n[Number.parseInt(r.toString(),10)][1]),n[Number.parseInt(r.toString(),10)][1]>c&&(c=n[Number.parseInt(r.toString(),10)][1]);return{x:t.x,y:t.y,width:o-s,height:c-h}}return t},e.prototype._flattenPopUp=function(){this._flattenPop(this._page,this.color,this.bounds,this.border,this.author,this.subject,this.text)},e.prototype._flattenPop=function(e,i,n,r,a,s,o){var h,c=n,_=[(h=e.size)[0]-180,c.y+142<h[1]?c.y:h[1]-142,180,142];if(this._dictionary.has("Popup")&&this._dictionary.get("Popup")){var d=this._dictionary.getArray("Rect");if(d&&4===d.length){var p=d[0],l=d[1];_=[p,l,d[2]-p,d[3]-l]}}void 0===i&&(i=[0,0,0]);var u=new Ve(i),f=r.width/2,g=new We([0,0,0],1),y=0,m=new Ve(this._getForeColor(i));if(null!=a&&""!==a)y=this._drawAuthor(a,s,_,u,m,e,y,r);else if(null!=s&&""!==s){var b=[_[0]+f,_[1]+f,_[2]-r.width,40];this._saveGraphics(e,t._PdfBlendMode.hardLight),e._graphics._drawRectangle(b[0],b[1],b[2],b[3],g,u),e._graphics._restore();var v=[b[0]+11,b[1],b[2],b[3]/2];v=[v[0],v[1]+v[3]-2,v[2],b[3]/2],this._saveGraphics(e,t._PdfBlendMode.normal),this._drawSubject(s,v,e),e._graphics._restore(),y=40}else{this._saveGraphics(e,t._PdfBlendMode.hardLight);b=[_[0]+f,_[1]+f,_[2]-r.width,20];e._graphics._drawRectangle(b[0],b[1],b[2],b[3],g,u),y=20,e._graphics._restore()}var w=[_[0]+f,_[1]+f+y,_[2]-r.width,_[3]-(y+r.width)];this._saveGraphics(e,t._PdfBlendMode.hardLight),e._graphics._drawRectangle(w[0],w[1],w[2],w[3],new We([0,0,0],1),new Ve([255,255,255])),w[0]+=11,w[1]+=5,w[2]-=22,e._graphics._restore(),this._saveGraphics(e,t._PdfBlendMode.normal);var S=new At(t._PdfFontFamily.helvetica,10.5);null!=o&&""!==o&&e._graphics._drawString(o,S,w,null,new Ve([0,0,0]),null),e._graphics._restore()},e.prototype._flattenLoadedPopUp=function(){var e="";this._dictionary.has("Contents")&&(e=this._dictionary.get("Contents"));var i=this.author,n=this.subject,r=new We([0,0,0],1);if(this._dictionary.has("Popup")){var a=this._getRectangleBoundsValue();void 0===this.color&&(this.color=[0,0,0]);var s=new Ve(this.color),o=this.border.width/2,h=0,c=new Ve(this._getForeColor(this.color));if(void 0!==this.author&&null!==this.author&&""!==this.author)h=this._drawAuthor(this.author,this.subject,a,s,c,this._page,h,this.border);else if(void 0!==this.subject&&null!==this.subject&&""!==this.subject){var _=[a[0]+o,a[1]+o,a[2]-this.border.width,40];this._saveGraphics(this._page,t._PdfBlendMode.hardLight),this._page._graphics._drawRectangle(_[0],_[1],_[2],_[3],r,s),this._page._graphics._restore();var d=[_[0]+11,_[1],_[2],_[3]/2];d=[d[0],d[1]+d[3]-2,d[2],_[3]/2],this._saveGraphics(this._page,t._PdfBlendMode.normal),this._drawSubject(this.subject,d,this._page),h=40,this._page._graphics._restore()}else{this._saveGraphics(this._page,t._PdfBlendMode.hardLight);_=[a[0]+o,a[1]+o,a[2]-this.border.width,20];this._page._graphics._drawRectangle(_[0],_[1],_[2],_[3],r,s),h=20,this._page._graphics._restore()}this._saveGraphics(this._page,t._PdfBlendMode.hardLight);var p=[a[0]+o,a[1]+o+h,a[2]-this.border.width,a[3]-(h+this.border.width)];if(this._page._graphics._drawRectangle(p[0],p[1],p[2],p[3],r,new Ve([255,255,255])),p[0]+=11,p[1]+=5,p[2]-=22,this._page._graphics._restore(),this._saveGraphics(this._page,t._PdfBlendMode.normal),this._page._graphics._restore(),null!=e&&""!==e){var l=new At(t._PdfFontFamily.helvetica,10.5);this._page._graphics._drawString(e,l,p,null,new Ve([0,0,0]),null)}this._page._graphics._restore(),this._removeAnnotationFromPage(this._page,this)}else this._flattenPop(this._page,this.color,this.bounds,this.border,i,n,e),this._removeAnnotationFromPage(this._page,this)},e.prototype._getRectangleBoundsValue=function(){if(this._dictionary.has("Popup")){var t=this._dictionary.get("Popup").getArray("Rect");return null!==t?(null!==this._page?0===t[1]&&0===t[3]?t[1]=t[1]+t[3]:t[1]=this._page._size[1]-(t[1]+t[3]):t[1]=t[1]-t[3],t):[0,0,0,0]}return[0,0,0,0]},e.prototype._getForeColor=function(t){return(t[0]+t[1]+t[2])/3>128?[0,0,0]:[255,255,255]},e.prototype._drawAuthor=function(e,i,n,r,a,s,o,h){var c=this.border.width/2,_=new We([0,0,0],1),d=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.middle),p=new At(t._PdfFontFamily.helvetica,10.5,t._PdfFontStyle.bold),l=[n[0]+c,n[1]+c,n[2]-h.width,20];if(null!=i&&""!==i){l[3]+=20,o=l[3],this._saveGraphics(s,t._PdfBlendMode.hardLight),s._graphics._drawRectangle(l[0],l[1],l[2],l[3],_,r),s._graphics._restore();var u=[l[0]+11,l[1],l[2],l[3]/2];this._saveGraphics(this._page,t._PdfBlendMode.normal),s._graphics._drawString(e,p,u,null,a,d),u=[u[0],u[1]+u[3]-2,u[2],l[3]/2],this._drawSubject(i,u,s),s._graphics._restore()}else{this._saveGraphics(s,t._PdfBlendMode.hardLight),s._graphics._drawRectangle(l[0],l[1],l[2],l[3],_,r),s._graphics._restore();u=[l[0]+11,l[1],l[2],l[3]];this._saveGraphics(s,t._PdfBlendMode.normal),s._graphics._drawString(e,new At(t._PdfFontFamily.helvetica,10.5),u,null,a,d),o=l[3],s._graphics._restore()}return o},e.prototype._drawSubject=function(e,i,n){var r=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.middle),a=new At(t._PdfFontFamily.helvetica,10.5,t._PdfFontStyle.bold);n._graphics._drawString(e,a,i,null,new Ve([0,0,0]),r)},e.prototype._saveGraphics=function(t,e){t._graphics._save(),t._graphics._setTransparency(.8,.8,e)},e}(),Zt=function(e){function i(i){var n=e.call(this)||this;return n._unit=t.PdfMeasurementUnit.centimeter,n._unitString="",n._dictionary=new _,n._dictionary.update("Type",a.get("Annot")),n._dictionary.update("Subtype",a.get("Line")),void 0!==i&&(n.linePoints=i),n._type=t.PdfAnnotationType.lineAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"linePoints",{get:function(){if(void 0===this._linePoints&&this._dictionary.has("L")){var t=this._dictionary.getArray("L");t&&(this._linePoints=t)}return this._linePoints},set:function(t){if(Array.isArray(t)&&(void 0===this._linePoints||Ye(t,this._linePoints))){if(4!==t.length)throw new Error("Line points length should be 4.");this._dictionary.update("L",t),this._linePoints=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderExt",{get:function(){if(void 0===this._leaderExt&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._leaderExt=t)}return this._leaderExt},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LeaderExt should be non negative number");this._dictionary.update("LLE",t),this._leaderExt=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderLine",{get:function(){if(void 0===this._leaderLine&&this._dictionary.has("LL")){var t=this._dictionary.get("LL");void 0!==t&&(this._leaderLine=t)}return this._leaderLine},set:function(t){Number.isNaN(t)||0===this.leaderExt||(this._dictionary.update("LL",t),this._leaderLine=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineEndingStyle",{get:function(){if(void 0===this._lineEndingStyle){var t=new ke;if(t._dictionary=this._dictionary,this._dictionary.has("LE")){var e=this._dictionary.getArray("LE");e&&Array.isArray(e)&&(t._begin=ui(e[0].name),t._end=ui(e[1].name))}this._lineEndingStyle=t}return this._lineEndingStyle},set:function(t){var e=this.lineEndingStyle;e.begin===t.begin&&e.end===t.end||(e.begin=t.begin,e.end=t.end)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderOffset",{get:function(){if(void 0===this._leaderOffset&&this._dictionary.has("LLO")){var t=this._dictionary.get("LLO");void 0!==t&&t>=0&&(this._leaderOffset=t)}return this._leaderOffset},set:function(t){Number.isNaN(t)||(this._dictionary.update("LLO",t),this._leaderOffset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineIntent",{get:function(){if(void 0===this._lineIntent&&this._dictionary.has("IT")){var e=this._dictionary.get("IT");e&&(this._lineIntent="LineDimension"===e.name?t.PdfLineIntent.lineDimension:t.PdfLineIntent.lineArrow)}return this._lineIntent},set:function(e){void 0!==e&&e!==this.lineIntent&&(this._lineIntent=e,this._dictionary.update("IT",a.get(e===t.PdfLineIntent.lineDimension?"LineDimension":"LineArrow")))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&(this._isLoaded||(this._measure=t,this.caption.cap=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Ni(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.linePoints||null===this.linePoints)throw new Error("Line points cannot be null or undefined");var e;if(this._dictionary.has("Cap")||this._dictionary.set("Cap",!1),this._dictionary.has("CP")||this._dictionary.set("CP",a.get("Inline")),this._dictionary.has("LE")||(this.lineEndingStyle=new ke),this._dictionary.has("LL")||(this.leaderLine=0),this._dictionary.has("LLE")||(this.leaderExt=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}if(void 0===e&&(e=1),this._measure)this._appearanceTemplate=this._createLineMeasureAppearance(t);else{this._setAppearance&&(this._appearanceTemplate=this._createAppearance());var n=this._dictionary.has("LLO")?this.leaderOffset:0,r=this._calculateLineBounds(this.linePoints,this.leaderExt,this.leaderLine,n,this.lineEndingStyle,this.border.width);this._bounds={x:r.x-8,y:r.y-8,width:r.width+16,height:r.height+16};var s=[this._bounds.x,this._bounds.y,this._bounds.x+this._bounds.width,this._bounds.y+this._bounds.height];this._dictionary.update("Rect",s)}},i.prototype._doPostProcess=function(t){var e,i;(void 0===t&&(t=!1),this._isLoaded)?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createLineMeasureAppearance(t):this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((s=e.getRaw("N"))&&(i.reference=s),this._appearanceTemplate=new it(i,this._crossReference))):(this._postProcess(t),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((s=e.getRaw("N"))&&(i.reference=s),this._appearanceTemplate=new it(i,this._crossReference)):this._appearanceTemplate=this._createAppearance()));if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var n=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,n)}if(!t&&this._setAppearance&&!this.measure){var r=void 0;if(this._dictionary.has("AP"))r=this._dictionary.get("AP");else{var a=this._crossReference._getNextReference();r=new _(this._crossReference),this._crossReference._cacheMap.set(a,r),this._dictionary.update("AP",a)}var s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,this._appearanceTemplate._content),r.update("N",s)}},i.prototype._createLineMeasureAppearance=function(e){for(var i=[0,0,0,0],n=this._convertToUnit(),r=this._obtainLinePoints(),s=[],o=0;o<r.length;o+=2)s.push([r[Number.parseInt(o.toString(),10)],r[o+1]]);var h=new Ft;h._points=s,h._pathTypes=[0,1];var c=h._getBounds();this._bounds={x:c[0],y:c[1],width:c[2],height:c[3]};var d,p=this.leaderLine<0?-this._leaderLine:this._leaderLine,l=new We(void 0!==this.color?this._color:[0,0,0],this.border.width);this.innerColor&&(d=new Ve(this._innerColor)),i=this._obtainLineBounds();var u=new it(i,this._crossReference);Ri(u,null);var f=new Fe;u._writeTransformation=!1;var g=u.graphics,y=this.border.width/2;f.borderPen=l,f.backBrush=d,f.foreBrush=new Ve(this.color);var m=this._obtainLinePoints(),b=this._obtainFont();if(void 0!==m&&4===m.length){var v=m[0],w=m[1],S=m[2],P=m[3];this.border.style===t.PdfBorderStyle.dashed?l._dashStyle=t._PdfDashStyle.dash:this.border.style===t.PdfBorderStyle.dot&&(l._dashStyle=t._PdfDashStyle.dot);var A=new Ve(void 0!==this.color?this.color:[0,0,0]);null==b&&(b=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular));var x=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),k=b._measureString(n.toFixed(2)+" "+this._unitString,x,[0,0],0,0),T=0;T=S-v==0?P>w?90:270:this._getAngle([v,w,S,P]),g._save();var R=[v,w],I=[S,P],F=this._leaderLine<0?T+180:T,N=void 0!==this.leaderOffset?p+this.leaderOffset:p,C=this._getAxisValue(R,F+90,N),B=this._getAxisValue(I,F+90,N),M=Math.sqrt(Math.pow(B[0]-C[0],2)+Math.pow(B[1]-C[1],2)),L=M/2-(k[0]/2+y),O=this._getAxisValue(C,T,L),E=this._getAxisValue(B,T+180,L),z=void 0,D=void 0;z=this.lineEndingStyle.begin===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(C,T,this.border.width):C,D=this.lineEndingStyle.end===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(B,T,-this.border.width):B,this.caption.type===t.PdfLineCaptionType.top?g._drawLine(l,z[0],-z[1],D[0],-D[1]):(g._drawLine(l,z[0],-z[1],O[0],-O[1]),g._drawLine(l,D[0],-D[1],E[0],-E[1]));var j=[a.get(li(this.lineEndingStyle.begin)),a.get(li(this.lineEndingStyle.end))],U=this.bounds.width;this._setLineEndingStyles(C,B,g,T,l,d,j,U);var V=this._getAxisValue(C,F+90,this._leaderExt);g._drawLine(l,C[0],-C[1],V[0],-V[1]);var W=this._getAxisValue(B,F+90,this._leaderExt);g._drawLine(l,B[0],-B[1],W[0],-W[1]);var H=this._getAxisValue(C,F-90,p);g._drawLine(l,C[0],-C[1],H[0],-H[1]);var G=this._getAxisValue(B,F-90,p);g._drawLine(l,B[0],-B[1],G[0],-G[1]);var q=M/2,K=this._getAxisValue(C,T,q),X=void 0;X=this.caption.type===t.PdfLineCaptionType.top?this._getAxisValue(K,T+90,b._metrics.getHeight()):this._getAxisValue(K,T+90,b._metrics.getHeight()/2),g._translateTransform(X[0],-X[1]),g._rotateTransform(this._calculateAngle(m[0],m[1],m[2],m[3])),g._drawString(n.toFixed(2)+" "+this._unitString,b,[-k[0]/2,0,0,0],null,A),g._restore()}if(void 0!==e&&!e||!this._isLoaded){u._content.dictionary._updated=!0;var Q=new _,J=this._crossReference._getNextReference();this._crossReference._cacheMap.set(J,g._template._content),g._template._content.reference=J,Q.set("N",J),Q._updated=!0,this._dictionary.set("AP",Q);var Y=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height],Z=this._page.size;Y[1]=Z[1]-(this.bounds.y+this.bounds.height),this._isBounds&&(i=Y),this._dictionary.update("Rect",[Y[0],Y[1],Y[2],Y[3]]);var $="font:"+b._metrics._postScriptName+" "+b._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",$);var tt=this._createMeasureDictionary(this._unitString),et=this._crossReference._getNextReference();this._crossReference._cacheMap.set(et,tt),tt._updated=!0,this._dictionary.update("Measure",et);var rt=[];if(rt.push(a.get(li(this.lineEndingStyle.begin))),rt.push(a.get(li(this.lineEndingStyle.end))),this._dictionary.update("LE",rt),null===this._linePoints)throw new Error("LinePoints cannot be null");this._dictionary.update("L",this._linePoints),this._dictionary.update("C",[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))]);N=this._dictionary.has("LLO")?this.leaderOffset:0;this._dictionary.update("Subtype",new a("Line")),this._dictionary.update("Contents",(this.text?this.text:"")+" "+n.toFixed(2)+" "+this._unitString),this._dictionary.update("IT",new a("LineDimension")),this._dictionary.update("LLE",this.leaderExt),this._dictionary.update("LLO",N),this._dictionary.update("LL",this.leaderLine),this._dictionary.update("CP",a.get(this.caption.type===t.PdfLineCaptionType.top?"Top":"Inline")),this._dictionary.update("Cap",this.caption.cap);var at=[i[0],i[1],i[0]+i[2],i[1]+i[3]];this._dictionary.update("Rect",at)}return u},i.prototype._calculateAngle=function(t,e,i,n){return-Math.atan2(n-e,i-t)*(180/Math.PI)},i.prototype._setLineEndingStyles=function(t,e,i,n,r,a,s,o){var h=[0,0];0===o&&(o=1,r=null),a&&!a._color&&(a=null);for(var c=0;c<s.length;c++){var _=s[Number.parseInt(c.toString(),10)];if(h=0===c?t:e,null!==_){var d=void 0,p=void 0,l=void 0,u=void 0,f=void 0,g=void 0,y=void 0,m=void 0,b=void 0,v=void 0;switch(_.name){case"Square":d=[h[0]-3*o,-(h[1]+3*o),6*o,6*o],i._drawRectangle(d[0],d[1],d[2],d[3],r,a);break;case"Circle":d=[h[0]-3*o,-(h[1]+3*o),6*o,6*o],i._drawEllipse(d[0],d[1],d[2],d[3],r,a);break;case"OpenArrow":p=0===c?30:150,l=9*o,u=0===c?this._getAxisValue(h,n,o):this._getAxisValue(h,n,-o),f=this._getAxisValue(u,n+p,l),g=this._getAxisValue(u,n-p,l),(b=new Ft)._pen=r,b._addLine(u[0],-u[1],f[0],-f[1]),b._addLine(u[0],-u[1],g[0],-g[1]),i._drawPath(b,r);break;case"ClosedArrow":p=0===c?30:150,l=9*o,u=0===c?this._getAxisValue(h,n,o):this._getAxisValue(h,n,-o),f=this._getAxisValue(u,n+p,l),g=this._getAxisValue(u,n-p,l),(v=[]).push([u[0],-u[1]]),v.push([f[0],-f[1]]),v.push([g[0],-g[1]]),i._drawPolygon(v,r,a);break;case"ROpenArrow":p=0===c?150:30,l=9*o,u=0===c?this._getAxisValue(h,n,-o):this._getAxisValue(h,n,o),f=this._getAxisValue(u,n+p,l),g=this._getAxisValue(u,n-p,l),(b=new Ft)._pen=r,b._addLine(u[0],-u[1],f[0],-f[1]),b._addLine(u[0],-u[1],g[0],-g[1]),i._drawPath(b,r);break;case"RClosedArrow":p=0===c?150:30,l=9*o,u=0===c?this._getAxisValue(h,n,-o):this._getAxisValue(h,n,o),f=this._getAxisValue(u,n+p,l),g=this._getAxisValue(u,n-p,l),(v=[]).push([u[0],-u[1]]),v.push([f[0],-f[1]]),v.push([g[0],-g[1]]),i._drawPolygon(v,r,a);break;case"Slash":l=9*o,f=this._getAxisValue(h,n+60,l),g=this._getAxisValue(h,n-120,l),i._drawLine(r,h[0],-h[1],f[0],-f[1]),i._drawLine(r,h[0],-h[1],g[0],-g[1]);break;case"Diamond":l=3*o,f=this._getAxisValue(h,180,l),g=this._getAxisValue(h,90,l),y=this._getAxisValue(h,0,l),m=this._getAxisValue(h,-90,l),(v=[]).push([f[0],-f[1]]),v.push([g[0],-g[1]]),v.push([y[0],-y[1]]),v.push([m[0],-m[1]]),i._drawPolygon(v,r,a);break;case"Butt":l=3*o,f=this._getAxisValue(h,n+90,l),g=this._getAxisValue(h,n-90,l),i._drawLine(r,f[0],-f[1],g[0],-g[1])}}}},i.prototype._calculateLineBounds=function(t,e,i,n,r,a){var s={x:0,y:0,width:0,height:0};if(t&&4===t.length){var o=this._getAngle(t),h=0,c=0;if(i<0?(h=-i,c=o+180):(h=i,c=o),0!==n){var _=this._getAxisValue([t[0],t[1]],c+90,n),d=this._getAxisValue([t[2],t[3]],c+90,n);t[0]=_[0],t[1]=_[1],t[2]=d[0],t[3]=d[1]}var p=this._getAxisValue([t[0],t[1]],c+90,h+n),l=this._getAxisValue([t[2],t[3]],c+90,h+n),u=this._getAxisValue([t[0],t[1]],c+90,e+h+n),f=this._getAxisValue([t[2],t[3]],c+90,e+h+n),g=this._getLinePoint(r.begin,a),y=this._getLinePoint(r.end,a),m=[],b=[];c>=45&&c<=135||c>=225&&c<=315?(m[0]=g.y,b[0]=g.x,m[1]=y.y,b[1]=y.x):(m[0]=g.x,b[0]=g.y,m[1]=y.x,b[1]=y.y);var v=Math.max(m[0],m[1]),w=Math.max(b[0],b[1]);0===v&&(v=1),0===w&&(w=1),p[0]===Math.min(p[0],l[0])?(p[0]-=v*a,l[0]+=v*a,p[0]=Math.min(p[0],t[0]),p[0]=Math.min(p[0],u[0]),l[0]=Math.max(l[0],t[2]),l[0]=Math.max(l[0],f[0])):(p[0]+=v*a,l[0]-=v*a,p[0]=Math.max(p[0],t[0]),p[0]=Math.max(p[0],u[0]),l[0]=Math.min(l[0],t[2]),l[0]=Math.min(l[0],f[0])),p[1]===Math.min(p[1],l[1])?(p[1]-=w*a,l[1]+=w*a,p[1]=Math.min(p[1],t[1]),p[1]=Math.min(p[1],u[1]),l[1]=Math.max(l[1],t[3]),l[1]=Math.max(l[1],f[1])):(p[1]+=w*a,l[1]-=w*a,p[1]=Math.max(p[1],t[1]),p[1]=Math.max(p[1],u[1]),l[1]=Math.min(l[1],t[3]),l[1]=Math.min(l[1],f[1])),s=this._getBounds([{x:p[0],y:p[1]},{x:l[0],y:l[1]}])}return s},i.prototype._getLinePoint=function(e,i){var n={x:0,y:0};if(e)switch(e){case t.PdfLineEndingStyle.square:case t.PdfLineEndingStyle.circle:case t.PdfLineEndingStyle.diamond:n.x=3,n.y=3;break;case t.PdfLineEndingStyle.openArrow:case t.PdfLineEndingStyle.closedArrow:n.x=1,n.y=5;break;case t.PdfLineEndingStyle.rOpenArrow:case t.PdfLineEndingStyle.rClosedArrow:n.x=9+i/2,n.y=5+i/2;break;case t.PdfLineEndingStyle.slash:n.x=5,n.y=9;break;case t.PdfLineEndingStyle.butt:n.x=1,n.y=3;break;default:n.x=0,n.y=0}return n},i.prototype._getBounds=function(t){var e={x:0,y:0,width:0,height:0};if(t.length>0){for(var i=t[0].x,n=t[0].x,r=t[0].y,a=t[0].y,s=1;s<t.length;++s){var o=t[Number.parseInt(s.toString(),10)];i=Math.min(o.x,i),n=Math.max(o.x,n),r=Math.min(o.y,r),a=Math.max(o.y,a)}e.x=i,e.y=r,e.width=n-i,e.height=a-r}return e},i.prototype._obtainLineBounds=function(){var t=this.bounds;if(void 0!==this.linePoints&&4===this._linePoints.length){var e=this._dictionary.has("LLO")?this.leaderOffset:0,i=this._dictionary.has("LLE")?this.leaderExt:0,n=this._dictionary.has("LL")?this.leaderLine:0;t={x:(t=this._calculateLineBounds(this._linePoints,i,n,e,this.lineEndingStyle,this.border.width)).x-8,y:t.y-8,width:t.width+16,height:t.height+16}}return[t.x,t.y,t.width,t.height]},i.prototype._createAppearance=function(){var e=new it(this._obtainLineBounds(),this._crossReference);Ri(e,null),e._writeTransformation=!1;var i=e.graphics,n=new We(void 0!==this.color?this._color:[0,0,0],this.border.width);this.border.style===t.PdfBorderStyle.dashed?n._dashStyle=t._PdfDashStyle.dash:this.border.style===t.PdfBorderStyle.dot&&(n._dashStyle=t._PdfDashStyle.dot);var r=new Ve(void 0!==this.innerColor?this._innerColor:[0,0,0]),a=this._obtainFont();null==a&&(a=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular)),this.text||this._dictionary.has("Contents")||(this.text=this.subject);var s=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),o=a._measureString(this.text?this.text:"",s,[0,0],0,0)[0];if(void 0!==this.linePoints&&4===this._linePoints.length){var h=this._getAngle(this._linePoints),c=0,_=0;this.leaderLine<0?(c=-this.leaderLine,_=h+180):(c=this.leaderLine,_=h);var d=void 0!==this.leaderOffset?c+this.leaderOffset:c,p=this._getAxisValue([this._linePoints[0],this._linePoints[1]],_+90,d),l=this._getAxisValue([this._linePoints[2],this._linePoints[3]],_+90,d),u=Math.sqrt(Math.pow(l[0]-p[0],2)+Math.pow(l[1]-p[1],2)),f=u/2-(o/2+this.border.width),g=this._getAxisValue(p,h,f),y=this._getAxisValue(l,h+180,f),m=this.lineEndingStyle.begin===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(p,h,this.border.width):p,b=this.lineEndingStyle.end===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(l,h,-this.border.width):l;if(this.opacity&&this._opacity<1){var v=i._save();i._setTransparency(this._opacity),this._drawLine(i,n,m,b,g,y),i._restore(v)}else this._drawLine(i,n,m,b,g,y);this._drawLineStyle(p,l,i,h,n,r,this.lineEndingStyle,this.border.width);var w=void 0!==this.leaderExt?this._leaderExt:0,S=this._getAxisValue(p,_+90,w);i._drawLine(n,p[0],-p[1],S[0],-S[1]);var P=this._getAxisValue(l,_+90,w);i._drawLine(n,l[0],-l[1],P[0],-P[1]);var A=this._getAxisValue(p,_-90,c);i._drawLine(n,p[0],-p[1],A[0],-A[1]);var x=this._getAxisValue(l,_-90,c);i._drawLine(n,l[0],-l[1],x[0],-x[1]);var k=u/2,T=this._getAxisValue(p,h,k),R=void 0,I=a._metrics.getHeight();R=this.caption.type===t.PdfLineCaptionType.top?this._dictionary.has("Measure")?this._getAxisValue(T,h+90,2*I):this._getAxisValue(T,h+90,I):this._dictionary.has("Measure")?this._getAxisValue(T,h+90,I/2*3):this._getAxisValue(T,h+90,I/2),i._translateTransform(R[0],-R[1]),i._rotateTransform(-h),this.caption.cap&&i._drawString(this.text,a,[-o/2,0,0,0],null,r),i._restore()}return e},i.prototype._drawLine=function(e,i,n,r,a,s){void 0===this.text||""===this._text||this.caption.type===t.PdfLineCaptionType.top||!this.caption.cap&&this.caption.type===t.PdfLineCaptionType.inline?e._drawLine(i,n[0],-n[1],r[0],-r[1]):(e._drawLine(i,n[0],-n[1],a[0],-a[1]),e._drawLine(i,r[0],-r[1],s[0],-s[1]))},i.prototype._convertToUnit=function(){for(var e=this._obtainLinePoints(),i=new Array(e.length/2),n=0,r=0;r<e.length;r+=2)i[Number.parseInt(n.toString(),10)]=[e[Number.parseInt(r.toString(),10)],e[r+1]],n++;var a=Math.sqrt(Math.pow(i[1][0]-i[0][0],2)+Math.pow(i[1][1]-i[0][1],2)),s=this._getEqualPdfGraphicsUnit(this._unit,this._unitString);return this._unitString=s.unitString,(new He)._convertUnits(a,t.PdfGraphicsUnit.point,s.graphicsUnit)},i.prototype._obtainLinePoints=function(){var t=[];if(this.linePoints)for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];return t},i}(Yt),$t=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._unit=t.PdfMeasurementUnit.centimeter,o._measureType=t.PdfCircleMeasurementType.diameter,o._unitString="",o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Circle")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.circleAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&(this._isLoaded||(this._measure=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Ni(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measureType",{get:function(){if(this._dictionary.has("Contents")){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Ni(this._unitString);var i=e.substring(0,e.length-2);(new He)._convertUnits(this.bounds.width/2,t.PdfGraphicsUnit.point,Mi(this._unitString)).toString()===i?this._measureType=t.PdfCircleMeasurementType.radius:this._measureType=t.PdfCircleMeasurementType.diameter}return this._measureType},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._measureType=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}if(this._dictionary.has("C")||(this.color=[0,0,0]),void 0===e&&(e=1),this._measure)this._appearanceTemplate=this._createCircleMeasureAppearance(t);else{(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance());var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])}},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createCircleMeasureAppearance(t):this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createCircleAppearance();if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance&&!this.measure){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new _(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i.prototype._createCircleMeasureAppearance=function(e){var i=this.border.width,n=this._obtainFont();n||(n=new At(t._PdfFontFamily.helvetica,8,t._PdfFontStyle.regular));var r=this._convertToUnit(),s=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),o=r.toFixed(2)+" "+this._unitString,h=n._measureString(o,s,[0,0],0,0),c=new We(this.color,i),d=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height];d[1]=d[1]-d[3];var p=new it(d,this._crossReference),l=new Fe;p._writeTransformation=!1;var u=p.graphics,f=i/2;l.borderPen=c,this.innerColor&&(l.backBrush=new Ve(this._innerColor)),l.foreBrush=new Ve(this.color);var g=[d[0],-d[1]-d[3],d[2],d[3]];if(u._save(),u._drawEllipse(g[0]+f,g[1]+f,g[2]-i,g[3]-i,new We(this.color,this.border.width)),this._measureType===t.PdfCircleMeasurementType.diameter){u._save(),u._translateTransform(d[0],-d[1]);var y=d[3]/2-h[0]/2;u._drawLine(l.borderPen,0,-d[3]/2,d[0]+d[2],-d[3]/2),u._translateTransform(y,-d[3]/2-n._metrics.getHeight()),u._drawString(r.toFixed(2)+" "+this._unitString,n,[0,0,0,0],null,l.foreBrush),u._restore()}else{u._save(),u._translateTransform(d[0],-d[1]);y=d[2]/2+(d[2]/4-h[0]/2);u._drawLine(l.borderPen,d[2]/2,-d[3]/2,d[0]+d[2],-d[3]/2),u._translateTransform(y,-d[3]/2-n._metrics.getHeight()),u._drawString(r.toFixed(2)+" "+this._unitString,n,[0,0,0,0],null,l.foreBrush),u._restore()}if(u._restore(),void 0!==e&&!e||!this._isLoaded){var m=new _;u._template._content.dictionary._updated=!0;var b=this._crossReference._getNextReference();this._crossReference._cacheMap.set(b,u._template._content),u._template._content.reference=b,m.set("N",b),m._updated=!0,this._dictionary.set("AP",m);var v=this._page.size,w=[this.bounds.x,v[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._isBounds&&(d=w),this._dictionary.update("Rect",[w[0],w[1],w[0]+w[2],w[1]+w[3]]),!this._dictionary.has("Measure")){var S=this._createMeasureDictionary(this._unitString),P=this._crossReference._getNextReference();this._crossReference._cacheMap.set(P,S),S._updated=!0,this._dictionary.update("Measure",P)}this._dictionary.update("Subtype",new a("Circle")),this._dictionary.update("Contents",(this.text?this.text:"")+" "+r.toFixed(2)+" "+this._unitString);var A="font:"+n._metrics._postScriptName+" "+n._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",A)}return p},i.prototype._convertToUnit=function(){var e=new He,i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString);this._unitString=i.unitString;var n=e._convertUnits(this.bounds.width/2,t.PdfGraphicsUnit.point,i.graphicsUnit);return this._measureType===t.PdfCircleMeasurementType.diameter&&(n*=2),n},i}(Yt),te=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Circle")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.ellipseAnnotation,o}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}this._dictionary.has("C")||(this.color=[0,0,0]),void 0===e&&(e=1),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance());var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createCircleAppearance();if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new _(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i}(Yt),ee=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._unit=t.PdfMeasurementUnit.centimeter,o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Square")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.squareAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=pi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){void 0!==t&&(this._isLoaded||(this._measure=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Ni(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var i;this._dictionary.has("BS")?i=this.border.width:((n=new _(this._crossReference)).set("Type",a.get("Border")),this._dictionary.set("BS",n));if(this._dictionary.has("C")||(this.color=[0,0,0]),void 0===i&&(i=1),this._measure)this._appearanceTemplate=this._createSquareMeasureAppearance(e);else{(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect));var n,r=this._page.size,s=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._dictionary.update("Rect",[s[0],s[1],s[0]+s[2],s[1]+s[3]]),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)(n=new _(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&n.set("S",a.get("C")),this._dictionary.update("BE",n)}},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createSquareMeasureAppearance(t):this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance&&!this.measure){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new _(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i.prototype._createSquareMeasureAppearance=function(e){var i=this.border.width,n=this._obtainFont();null==n&&(n=new At(t._PdfFontFamily.helvetica,8,t._PdfFontStyle.regular));var r,s=this._calculateAreaOfSquare(),o=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),h=s.toFixed(2)+" sq "+this._unitString,c=n._measureString(h,o,[0,0],0,0),d=new We(this.color,i);this.innerColor&&(r=new Ve(this._innerColor));var p=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height],l=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],u=new Qt(this,l);p[1]=p[1]-p[3],u._normal=new it(p,this._crossReference);var f=u._normal,g=new Fe;f._writeTransformation=!1;var y=u._normal.graphics,m=i/2;g.borderPen=d,g.backBrush=r,g.foreBrush=new Ve(this.color);var b=[p[0],-p[1]-p[3],p[2],p[3]];y._drawRectangle(b[0]+m,b[1]+m,b[2]-i,b[3]-i,new We(this.color,this.border.width)),y._save(),y._translateTransform(p[0],-p[1]);var v=p[2]/2-c[0]/2,w=p[3]/2-c[1]/2;if(y._translateTransform(v,-w-n._metrics.getHeight()),y._drawString(s.toFixed(2)+" sq "+this._unitString,n,[0,0,0,0],null,g.foreBrush),y._restore(),void 0!==e&&!e||!this._isLoaded){var S=new _,P=y._template._content;P.dictionary._updated=!0;var A=this._crossReference._getNextReference();this._crossReference._cacheMap.set(A,P),y._template._content.reference=A,S.set("N",A),S._updated=!0,this._dictionary.set("AP",S);var x=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],k=this._page.size;if(x[1]=k[1]-(this.bounds.y+this.bounds.height),x[2]=this.bounds.x+this.bounds.width,x[3]=k[1]-this.bounds.y,this._isBounds&&(p=x),this._dictionary.update("Rect",[x[0],x[1],x[2],x[3]]),!this._dictionary.has("Measure")){var T=this._crossReference._getNextReference(),R=this._createMeasureDictionary(this._unitString);this._crossReference._cacheMap.set(T,R),R._updated=!0,this._dictionary.update("Measure",T)}var I="font:"+n._metrics._postScriptName+" "+n._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",I);var F=this.text?this.text:"";this._dictionary.update("Contents",F+" "+s.toFixed(2)+" sq "+this._unitString),this._dictionary.update("Subject","Area Measurement"),this._dictionary.update("MeasurementTypes",129),this._dictionary.update("Subtype",new a("Square")),this._dictionary.update("IT",new a("SquareDimension"));var N=this._dictionary.getArray("Rect"),C=new Array(2*N.length);C[0]=N[0],C[1]=N[3],C[2]=N[0],C[3]=N[1],C[4]=N[2],C[5]=N[1],C[6]=N[2],C[7]=N[3],this._dictionary.update("Vertices",C)}return f},i.prototype._calculateAreaOfSquare=function(){var e,i,n=new He;if(this.bounds.width===this.bounds.height){i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString,e=(r=n._convertUnits(this.bounds.width,t.PdfGraphicsUnit.point,i.graphicsUnit))*r}else{i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString;var r=n._convertUnits(this.bounds.width,t.PdfGraphicsUnit.point,i.graphicsUnit);i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString,e=r*n._convertUnits(this.bounds.height,t.PdfGraphicsUnit.point,i.graphicsUnit)}return e},i}(Yt),ie=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Square")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.rectangleAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=pi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t,this._isModified=this._dictionary.has("AP"))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var i;this._dictionary.has("BS")?i=this.border.width:((n=new _(this._crossReference)).set("Type",a.get("Border")),this._dictionary.set("BS",n));this._dictionary.has("C")||(this.color=[0,0,0]),void 0===i&&(i=1),(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect));var n,r=this._page.size,s=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];(this._dictionary.update("Rect",[s[0],s[1],s[0]+s[2],s[1]+s[3]]),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)&&((n=new _(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&n.set("S",a.get("C")),this._dictionary.update("BE",n))},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new _(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i}(Yt),ne=function(e){function i(i){var n=e.call(this)||this;return n._dictionary=new _,n._dictionary.update("Type",a.get("Annot")),n._dictionary.update("Subtype",a.get("Polygon")),void 0!==i&&(n._points=i),n._type=t.PdfAnnotationType.polygonAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=pi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineExtension",{get:function(){if(void 0===this._lineExtension&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._lineExtension=t)}return this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var i;(this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))?i=this.border.width:((o=new _(this._crossReference)).set("Type",a.get("Border")),this._dictionary.set("BS",o));void 0===i&&(i=1);for(var n=[],r=0;r<this._points.length;r++){var s=this._points[Number.parseInt(r.toString(),10)];n.push(s)}n[0]===n[n.length-2]&&n[1]===n[n.length-1]||(n[n.length]=this._points[0],n[n.length]=this._points[1]),this._points=n;var o,h=this._getBoundsValue(this._points),c=[h.x,h.y,h.x+h.width,h.y+h.height];(this._dictionary.update("Rect",c),this._dictionary.update("LLE",this._lineExtension),(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(e)),this._dictionary.update("Vertices",this._points),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)&&((o=new _(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&o.set("S",a.get("C")),this._dictionary.update("BE",o))},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(t)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createPolygonAppearance(t);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&this._isLoaded&&this._flattenLoadedPopUp(),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new _(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),s.update("N",n)}},i.prototype._createPolygonAppearance=function(e){if(void 0!==e&&e){var i=void 0;this.color&&this.border.width>0&&(i=new We(this.color,this.border.width));var n=void 0;this.innerColor&&(n=new Ve(this.innerColor));var r=this._page._graphics;if(i||n){var a=void 0;if(void 0!==this.opacity&&this._opacity<1&&(a=r._save(),r._setTransparency(this._opacity)),0!==this.borderEffect.intensity&&this.borderEffect.style===t.PdfBorderEffectStyle.cloudy){var s=4*this.borderEffect.intensity+.5*this.border.width;(p=new Ft)._addPolygon(this._getLinePoints()),this._drawCloudStyle(r,n,i,s,.833,p._points,!1)}else r._drawPolygon(this._getLinePoints(),i,n);void 0!==this.opacity&&this._opacity<1&&r._restore(a)}return r._template}var o=void 0,h={x:0,y:0,width:0,height:0};void 0===this._points&&this._dictionary.has("Vertices")?(this._points=this._dictionary.get("Vertices"),o=this._getBoundsValue(this._points)):o=this._getBoundsValue(this._points),void 0!==this._borderEffect&&void 0!==this.borderEffect.intensity&&0!==this.borderEffect.intensity&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy?(h.x=o.x-5*this.borderEffect.intensity-this.border.width,h.y=o.y-5*this.borderEffect.intensity-this.border.width,h.width=o.width+10*this.borderEffect.intensity+2*this.border.width,h.height=o.height+10*this.borderEffect.intensity+2*this.border.width):(h.x=o.x-this.border.width,h.y=o.y-this.border.width,h.width=o.width+2*this.border.width,h.height=o.height+2*this.border.width);var c=new Qt(this,[h.x,h.y,h.width,h.height]);c._normal=new it([h.x,h.y,h.width,h.height],this._crossReference);var _=c._normal;Ri(_,null),_._writeTransformation=!1;r=c._normal.graphics;var d=new Fe;if(this.innerColor&&(d.backBrush=new Ve(this._innerColor)),this.border.width>0&&this.color&&(d.borderPen=new We(this._color,this.border.width)),this.color&&(d.foreBrush=new Ve(this._color)),void 0!==this.opacity&&this._opacity<1?(r._save(),r._setTransparency(this._opacity)):r._save(),0!==this.borderEffect.intensity&&this.borderEffect.style===t.PdfBorderEffectStyle.cloudy){var p;s=4*this.borderEffect.intensity+.5*this.border.width;(p=new Ft)._addPolygon(this._getLinePoints()),this._drawCloudStyle(r,d.backBrush,d.borderPen,s,.833,p._points,!1)}else r._drawPolygon(this._getLinePoints(),d.borderPen,d.backBrush);return void 0!==this.opacity&&this._opacity<1&&r._restore(),r._restore(),this._isBounds&&(_._content.dictionary._updated=!0,this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)),this._dictionary.update("Rect",[h.x,h.y,h.x+h.width,h.y+h.height]),_},i.prototype._getLinePoints=function(){var e,i=this._page.size,n=i[1],r=i[0];if(this._dictionary.has("Vertices")&&!this._isBounds){var a=void 0;this._page._pageDictionary.has("Rotate")&&(a=this._page._pageDictionary.get("Rotate")),this._page.rotation&&(this._page.rotation===t.PdfRotationAngle.angle90?a=90:this._page.rotation===t.PdfRotationAngle.angle180?a=180:this._page.rotation===t.PdfRotationAngle.angle270&&(a=270));var s=this._dictionary.getArray("Vertices");if(s){var o=[];s.forEach((function(t){o.push(t)})),e=[];for(var h=0;h<o.length;h+=2)e.push([o[Number.parseInt(h.toString(),10)],n-o[h+1]]);if(a)if(270===a)for(var c=0;c<e.length;c++){var _=e[Number.parseInt(c.toString(),10)][0];e[Number.parseInt(c.toString(),10)][0]=e[Number.parseInt(c.toString(),10)][1],e[Number.parseInt(c.toString(),10)][1]=r-_}else if(90===a)for(c=0;c<e.length;c++){_=e[Number.parseInt(c.toString(),10)][0];0!==this._page._origin[1]?e[Number.parseInt(c.toString(),10)][0]=n-(e[Number.parseInt(c.toString(),10)][1]-n):e[Number.parseInt(c.toString(),10)][0]=n-e[Number.parseInt(c.toString(),10)][1],e[Number.parseInt(c.toString(),10)][1]=_}else if(180===a)for(c=0;c<e.length;c++){_=e[Number.parseInt(c.toString(),10)][0];e[Number.parseInt(c.toString(),10)][0]=r-_,e[Number.parseInt(c.toString(),10)][1]=n-e[Number.parseInt(c.toString(),10)][1]}}}else if(null!==this._points){var d=[];this._points.forEach((function(t){d.push(t)})),e=[];for(h=0;h<d.length;h+=2)e.push([d[Number.parseInt(h.toString(),10)],-d[h+1]])}return e},i}(Yt),re=function(e){function i(i){var n=e.call(this)||this;return n._dictionary=new _,n._dictionary.update("Type",a.get("Annot")),n._dictionary.update("Subtype",a.get("PolyLine")),void 0!==i&&(n._points=i),n._type=t.PdfAnnotationType.polyLineAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"beginLineStyle",{get:function(){return this._beginLine},set:function(t){if(t!==this._beginLine&&(this._beginLine=t,this._dictionary)){var e=[];e.push(a.get(li(t))),e.push(a.get(li(this.endLineStyle))),this._dictionary.update("LE",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endLineStyle",{get:function(){return this._endLine},set:function(t){if(t!==this._endLine&&(this._endLine=t,this._dictionary)){var e=[];e.push(a.get(li(this.beginLineStyle))),e.push(a.get(li(t))),this._dictionary.update("LE",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineExtension",{get:function(){if(void 0===this._lineExtension&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._lineExtension=t)}return this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var e;if(this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}void 0===e&&(e=1);var n=this._getLinePoints(),r=[];r.push(0);for(var s=1;s<n.length;s++)r.push(1);this._polylinePoints=n,this._pathTypes=r;var o=new Ft;o._points=n,o._pathTypes=r,this._dictionary.update("Vertices",this._points);var h=[];h.push(a.get(li(this.beginLineStyle))),h.push(a.get(li(this.endLineStyle))),this._dictionary.update("LE",h),this._dictionary.update("LLE",this._lineExtension);var c=this._getBoundsValue(this._points),d=[c.x,c.y,c.x+c.width,c.y+c.height];this._dictionary.update("Rect",d),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t))},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createPolyLineAppearance(t);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&this._isLoaded&&this._flattenLoadedPopUp(),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new _(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),s.update("N",n)}},i.prototype._createPolyLineAppearance=function(t){if(void 0!==t&&t){var e=void 0;this.color&&this.border.width>0&&(e=new We(this.color,this.border.width));var i=this._page._graphics;if(e){var n=void 0;void 0!==this.opacity&&this._opacity<1&&(n=i._save(),i._setTransparency(this._opacity));var r=this._getLinePoints(),s=[];s.push(0);for(var o=1;o<r.length;o++)s.push(1);(l=new Ft)._points=r,l._pathTypes=s,i._drawPath(l,e),void 0!==this.opacity&&this._opacity<1&&i._restore(n)}return i._template}var h=void 0,c={x:0,y:0,width:0,height:0};void 0===this._points&&this._dictionary.has("Vertices")?(this._points=this._dictionary.get("Vertices"),h=this._getBoundsValue(this._points)):h=this._getBoundsValue(this._points),c.x=h.x-this.border.width,c.y=h.y-this.border.width,c.width=h.width+2*this.border.width,c.height=h.height+2*this.border.width;var _=new Qt(this,[c.x,c.y,c.width,c.height]);_._normal=new it([c.x,c.y,c.width,c.height],this._crossReference);var d=_._normal;Ri(d,null),d._writeTransformation=!1;i=_._normal.graphics;var p=new Fe;this.innerColor&&(p.backBrush=new Ve(this._innerColor)),this.border.width>0&&this.color&&(p.borderPen=new We(this._color,this.border.width)),this.color&&(p.foreBrush=new Ve(this._color)),void 0!==this.opacity&&this._opacity<1?(i._save(),i._setTransparency(this._opacity)):i._save();var l=new Ft;if(void 0!==this._polylinePoints&&null!==this._polylinePoints?l._points=this._polylinePoints:l._points=this._getLinePoints(),void 0!==this._pathTypes&&null!==this._polylinePoints)l._pathTypes=this._pathTypes;else{this._pathTypes=[],this._pathTypes.push(0);for(o=1;o<l._points.length;o++)this._pathTypes.push(1);l._pathTypes=this._pathTypes}if(i._drawPath(l,p.borderPen,p.backBrush),void 0!==this.opacity&&this._opacity<1&&i._restore(),i._restore(),this._isBounds){d._content.dictionary._updated=!0;var u=[];u.push(a.get(li(this.beginLineStyle))),u.push(a.get(li(this.endLineStyle))),this._dictionary.update("LE",u),this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)}return this._dictionary.update("Rect",[c.x,c.y,c.x+c.width,c.y+c.height]),d},i.prototype._getLinePoints=function(){var t;if(this._dictionary.has("Vertices")&&!this._isBounds){var e=this._dictionary.getArray("Vertices");if(e){t=[];for(var i=this._page.size[1],n=0;n<e.length;n+=2)t.push([e[Number.parseInt(n.toString(),10)],i-e[n+1]])}}else if(null!==this._points){var r=[];this._points.forEach((function(t){r.push(t)})),t=[];for(n=0;n<r.length;n+=2)t.push([r[Number.parseInt(n.toString(),10)],-r[n+1]])}return t},i}(Yt),ae=function(e){function i(i){var n=e.call(this)||this;if(n._linePoints=[],n._firstIntersectionPoint=[0,0],n._secondIntersectionPoint=[0,0],n._dictionary=new _,n._dictionary.update("Type",a.get("Annot")),n._dictionary.update("Subtype",a.get("PolyLine")),void 0!==i&&i.length>0){if(i.length>6)throw new Error("Points length should not be greater than 3");n._pointArray=i;for(var r=0;r<i.length;r++)n._linePoints.push(i[Number.parseInt(r.toString(),10)][0]),n._linePoints.push(i[Number.parseInt(r.toString(),10)][1])}return n._type=t.PdfAnnotationType.angleMeasurementAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&!this._isLoaded&&(this._measure=t,this.caption.cap=!0)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(!this._pointArray)throw new Error("Points cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new _(this._crossReference);e.set("Type",a.get("Border")),this._dictionary.set("BS",e)}this._dictionary.has("C")||(this.color=[0,0,0]),void 0===t&&(t=1),this._appearanceTemplate=this._createAngleMeasureAppearance()},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if(t||(this._appearanceTemplate=this._createAngleMeasureAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createAngleMeasureAppearance();if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i.prototype._createAngleMeasureAppearance=function(){var e=this.border.width,i=this._obtainFont();null==i&&(i=new At(t._PdfFontFamily.helvetica,8,t._PdfFontStyle.regular));var n=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),r=this._calculateAngle()*(180/Math.PI);r<0&&(r=-r),r>180&&(r=360-r),this._dictionary.update("Vertices",this._linePoints);var s="font:"+i._metrics._postScriptName+" "+i._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",s),this.text===" "+r.toFixed(2)+""?this._dictionary.update("Contents",this.text):this._dictionary.update("Contents",(this.text?this.text:"")+" "+r.toFixed(2)+""),this._dictionary.update("Subject","Area Measurement"),this._dictionary.update("MeasurementTypes",1152),this._dictionary.update("Subtype",new a("PolyLine")),this._dictionary.update("IT",new a("PolyLineAngle"));var o=new _,h=[],c=[],d=[],p=[],l=[];o.set("Type",a.get("measureDictionary")),o.set("R","1 in = 1 in"),o.set("Subtype","RL"),o.set("TargetUnitConversion",.1388889);var u=new _;u.set("U","in"),u.set("Type","NumberFormat"),u.set("C",1),u.set("D",1),u.set("SS",""),h.push(u);var f=new _;f.set("U",""),f.set("Type","NumberFormat"),f.set("C",1),f.set("D",1),f.set("FD",!0),f.set("SS",""),c.push(f);var g=new _;g.set("U","sq in"),g.set("Type","NumberFormat"),g.set("C",1),g.set("D",1),g.set("FD",!0),g.set("SS",""),d.push(g);var y=new _;y.set("U","cu in"),y.set("Type","NumberFormat"),y.set("C",1),y.set("D",1),y.set("FD",!0),y.set("SS",""),l.push(y);var m=new _;m.set("U","in"),m.set("Type","NumberFormat"),m.set("C",1),m.set("D",1),m.set("SS",""),p.push(m),o.set("D",h),o.set("T",c),o.set("A",d),o.set("X",p),o.set("V",l);var b=this._crossReference._getNextReference();this._crossReference._cacheMap.set(b,o),o._updated=!0,this._dictionary.update("Measure",b);var v=[0,0,0,0],w=this._getAngleBoundsValue(),S=this._obtainLinePoints(),P=[];P.push(0);for(var A=1;A<S.length;A++)P.push(1);(new Ft)._addRectangle(S[1][0]-this._radius,-(S[1][1]+this._radius),2*this._radius,2*this._radius);var x=i._measureString(r.toString()+"",n,[0,0],0,0),k=[(this._firstIntersectionPoint[0]+this._secondIntersectionPoint[0])/2,(this._firstIntersectionPoint[1]+this._secondIntersectionPoint[1])/2],T=[S[1][0],-S[1][1]],R=S[1][0]+this._radius*Math.cos((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),I=S[1][1]+this._radius*Math.sin((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),F=[k[0],k[1]],N=F[0]-T[0],C=F[1]-T[1],B=Math.atan2(C,N)*(180/Math.PI),M=!1,L=!1,O=!1,E=!1;B>0?B<45?L=!0:B>=45&&B<135?O=!0:M=!0:0===(B=-B)?(new Ft)._addRectangle(w[0],w[1],w[2],w[3]):B<45?L=!0:B>=45&&B<135?E=!0:M=!0,0===v[0]&&0===v[1]&&0===v[2]&&0===v[3]&&(v=w);var z=new Ft;z._pathTypes=P,z._points=S,this._dictionary.set("Rect",[v[0],v[1],v[0]+v[2],v[1]+v[3]]);var D=new Qt(this,w);D._normal=new it(v,this._crossReference);var j=D._normal;j._writeTransformation=!1;var U=D._normal.graphics,V=e/2,W=new We(this._color,V);this.border.style===t.PdfBorderStyle.dashed&&(W._dashStyle=t._PdfDashStyle.dash);var H=new Ve(this._color);U._save(),z._addArc(S[1][0]-this._radius,S[1][1]-this._radius,2*this._radius,2*this._radius,this._startAngle,this._sweepAngle),U._drawPath(z,W),O?U._drawString(r.toString()+"",i,[R-x[0]/2,-(-I+i._metrics.getHeight()+2),0,0],null,H):L?U._drawString(r.toString()+"",i,[R+2,-(-I+i._metrics.getHeight()/2),0,0],null,H):M?U._drawString(r.toString()+"",i,[R-x[0]-2,-(-I+i._metrics.getHeight()/2),0,0],null,H):E&&U._drawString(r.toString()+"",i,[R-x[0]/2,I+2,0,0],null,H),U._restore(),U._template._content.dictionary._updated=!0;var G=this._crossReference._getNextReference();this._crossReference._cacheMap.set(G,U._template._content),U._template._content.reference=G;var q=new _;return q.set("N",G),q._updated=!0,this._dictionary.set("AP",q),j},i.prototype._getAngleBoundsValue=function(){for(var t=this._obtainLinePoints(),e=0;e<t.length;e++)t[Number.parseInt(e.toString(),10)][1]=-t[Number.parseInt(e.toString(),10)][1];var i=new Ft;return i._points=t,i._pathTypes=[0,1,1],i._getBounds()},i.prototype._obtainLinePoints=function(){var t,e;if(this._linePoints){t=new Array(this._linePoints.length);for(var i=0;i<this._linePoints.length;i++)t[Number.parseInt(i.toString(),10)]=this._linePoints[Number.parseInt(i.toString(),10)];e=new Array(t.length/2);for(var n=0,r=0;r<t.length;r+=2)e[Number.parseInt(n.toString(),10)]=[t[Number.parseInt(r.toString(),10)],-t[r+1]],n++}return e},i.prototype._calculateAngle=function(){var t=[0,0];void 0!==this._linePoints&&0===this._linePoints.length&&this._isLoaded&&this._dictionary.has("Vertices")&&(this._linePoints=this._dictionary.get("Vertices"));for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];for(var i=[],n=0;n<t.length;n+=2)i.push([t[Number.parseInt(n.toString(),10)],t[n+1]]);var r=i[0],a=i[1],s=i[2],o=Math.sqrt(Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2)),h=Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2));this._radius=Math.min(o,h)/4;var c,_,d=new Ft;d._points=i,d._pathTypes=[0,1,1];var p=this._findLineCircleIntersectionPoints(a[0],a[1],this._radius,r,a,c,_);c=p.first,_=p.second,0===this._firstIntersectionPoint[0]&&0===this._firstIntersectionPoint[1]&&(this._firstIntersectionPoint=_),c=[0,0],_=[0,0],c=(p=this._findLineCircleIntersectionPoints(a[0],a[1],this._radius,s,a,c,_)).first,_=p.second,0===this._secondIntersectionPoint[0]&&0===this._secondIntersectionPoint[1]&&(this._secondIntersectionPoint=_);var l=this._firstIntersectionPoint[0]-a[0],u=this._firstIntersectionPoint[1]-a[1],f=Math.atan2(u,l)*(180/Math.PI);l=this._secondIntersectionPoint[0]-a[0],u=this._secondIntersectionPoint[1]-a[1];var g=Math.atan2(u,l)*(180/Math.PI);return g=g>0?g=360-g:-g,180===(f=f>0?f=360-f:-f)&&0===g?(this._startAngle=f,this._sweepAngle=180):0===f&&180===g?(this._startAngle=g,this._sweepAngle=180):f<180?f>g?(this._startAngle=g,this._sweepAngle=f-g):f+180<g?(this._startAngle=g,this._sweepAngle=360-g+f):(this._startAngle=f,this._sweepAngle=g-f):f<g?(this._startAngle=f,this._sweepAngle=g-f):f-180>g?(this._startAngle=f,this._sweepAngle=360-f+g):(this._startAngle=g,this._sweepAngle=f-g),Math.atan2(s[0]-a[0],s[1]-a[1])-Math.atan2(r[0]-a[0],r[1]-a[1])},i.prototype._findLineCircleIntersectionPoints=function(t,e,i,n,r,a,s){var o=r[0]-n[0],h=r[1]-n[1],c=o*o+h*h,_=2*(o*(n[0]-t)+h*(n[1]-e)),d=_*_-4*c*((n[0]-t)*(n[0]-t)+(n[1]-e)*(n[1]-e)-i*i);if(c<=1e-7||d<0)a=[Number.NaN,Number.NaN],s=[Number.NaN,Number.NaN];else if(0===d){var p=-_/(2*c);a=[n[0]+p*o,n[1]+p*h],s=[Number.NaN,Number.NaN]}else{p=(-_+Math.sqrt(d))/(2*c);a=[n[0]+p*o,n[1]+p*h],p=(-_-Math.sqrt(d))/(2*c),s=[n[0]+p*o,n[1]+p*h]}return{first:a,second:s}},i}(Yt),se=function(e){function i(i,n){var r=e.call(this)||this;return r._inkPointsCollection=[],r._dictionary=new _,r._dictionary.update("Type",a.get("Annot")),r._dictionary.update("Subtype",a.get("Ink")),void 0!==i&&(r._points=i),void 0!==n&&(r._linePoints=n),r._type=t.PdfAnnotationType.inkAnnotation,r}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((s=new _(this._crossReference)).set("Type",a.get("Border")),this._dictionary.set("BS",s));this._dictionary.has("C")||(this.color=[0,0,0]),void 0===t&&(t=1);var e=this._addInkPoints(),i=[e[0],e[1],e[0]+e[2],e[1]+e[3]];if(this._dictionary.update("Rect",i),this._setAppearance){var n=new Qt(this,e);n._normal=new it(e,this._crossReference);var r=n._normal;Ri(r,null),r._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(r);var s=new _;this._appearanceTemplate._content.dictionary._updated=!0;var o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=o,s.set("N",o),s._updated=!0,this._dictionary.set("AP",s)}},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isFlatten=t,this._isLoaded){if(this._setAppearance||t&&!this._dictionary.has("AP")){0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection());var e=this._getInkBoundsValue();if(Ri(a=new it(e,this._crossReference),null),a._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(a),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]]),!t){var i=new _;this._appearanceTemplate._content.dictionary._updated=!0;var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=n,i.set("N",n),i._updated=!0,this._dictionary.set("AP",i)}}if(!this._appearanceTemplate&&t&&this._dictionary.has("AP"))if((i=this._dictionary.get("AP"))&&i.has("N")){var r=i.get("N");n=i.getRaw("N");r&&(n&&(r.reference=n),this._appearanceTemplate=new it(r,this._crossReference))}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((i=this._dictionary.get("AP"))&&i.has("N")){r=i.get("N"),n=i.getRaw("N");r&&(n&&(r.reference=n),this._appearanceTemplate=new it(r,this._crossReference))}}else{0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection());var a;e=this._getInkBoundsValue();Ri(a=new it(e,this._crossReference),null),a._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(a),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])}if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var s=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var o=this._appearanceTemplate._content.dictionary.getArray("BBox");o&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-o[0],-o[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,s)}},i.prototype._createInkAppearance=function(t){var e=t.graphics;if(null!==this._inkPointsCollection&&this._inkPointsCollection.length>0)for(var i=0;i<this._inkPointsCollection.length;i++)if(this._inkPointsCollection[Number.parseInt(i.toString(),10)].length%2==0){var n=this._inkPointsCollection[Number.parseInt(i.toString(),10)];if(2===n.length)n=[n[0]-.5,n[1]-.5,n[0]+.5,n[1]+.5];for(var r=new Array(n.length/2),a=0,s=0;s<n.length;s+=2)r[Number.parseInt(a.toString(),10)]=[n[Number.parseInt(s.toString(),10)],n[s+1]],a++;var o=a+2*a-2,h=new Array(o),c=[],_=[],d=this._getControlPoints(r,c,_);c=d.controlP1,_=d.controlP2;for(var p=0,l=0;l<o-1;l+=3)h[Number.parseInt(l.toString(),10)]=r[Number.parseInt(p.toString(),10)],h[l+1]=c[Number.parseInt(p.toString(),10)],h[l+2]=_[Number.parseInt(p.toString(),10)],p++;if(h[o-1]=r[r.length-1],null!==h){for(var u=h,f=0;f<u.length;f++){var g=u[Number.parseInt(f.toString(),10)];u[Number.parseInt(f.toString(),10)]=[g[0],-g[1]]}var y=new Ft,m=null;if(2===r.length){var b=r[1][0]-r[0][0],v=r[1][1]-r[0][1];y._addEllipse(r[0][0]+.5,-(r[0][1]+v+.5),b,v),(m=new Ft)._pathTypes=y._pathTypes,m._points=y._points}else y._addBezierPoints(u),(m=new Ft)._pathTypes=y._pathTypes,m._points=u;var w=new We(this.color,this.border.width);e._drawPath(m,w)}}return t},i.prototype._getControlPoints=function(t,e,i){if(null===t)throw new Error("pointCollection");var n=t.length-1;if(n<1)throw new Error("At least two knot PointFs required pointCollection");1===n&&((e=new Array(1))[0][0]=(2*t[0][0]+t[1][0])/3,e[0][1]=(2*t[0][1]+t[1][1])/3,(i=new Array(1))[0][0]=2*e[0][0]-t[0][0],i[0][1]=2*e[0][1]-t[0][1]);for(var r=[],a=1;a<n-1;++a)r[Number.parseInt(a.toString(),10)]=4*t[Number.parseInt(a.toString(),10)][0]+2*t[a+1][0];r[0]=t[0][0]+2*t[1][0],r[n-1]=(8*t[n-1][0]+t[Number.parseInt(n.toString(),10)][0])/2;var s=this._getSingleControlPoint(r);for(a=1;a<n-1;++a)r[Number.parseInt(a.toString(),10)]=4*t[Number.parseInt(a.toString(),10)][1]+2*t[a+1][1];r[0]=t[0][1]+2*t[1][1],r[n-1]=(8*t[n-1][1]+t[Number.parseInt(n.toString(),10)][1])/2;var o=this._getSingleControlPoint(r);e=new Array(n),i=new Array(n);for(a=0;a<n;++a)if(e[Number.parseInt(a.toString(),10)]=[s[Number.parseInt(a.toString(),10)],o[Number.parseInt(a.toString(),10)]],a<n-1)i[Number.parseInt(a.toString(),10)]=[2*t[a+1][0]-s[a+1],2*t[a+1][1]-o[a+1]];else{var h=(t[Number.parseInt(n.toString(),10)][0]+s[n-1])/2,c=(t[Number.parseInt(n.toString(),10)][1]+o[n-1])/2;i[Number.parseInt(a.toString(),10)]=[h,c]}return{controlP1:e,controlP2:i}},i.prototype._getSingleControlPoint=function(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var a=1;a<e;a++)n[Number.parseInt(a.toString(),10)]=1/r,r=(a<e-1?4:3.5)-n[Number.parseInt(a.toString(),10)],i[Number.parseInt(a.toString(),10)]=(t[Number.parseInt(a.toString(),10)]-i[a-1])/r;for(a=1;a<e;a++)i[e-a-1]-=n[e-a]*i[e-a];return i},i.prototype._addInkPoints=function(){var t=[];if(null!==this._linePoints&&this._inkPointsCollection.push(this._linePoints),null!==this._inkPointsCollection)for(var e=0;e<this._inkPointsCollection.length;e++){var i=this._inkPointsCollection[Number.parseInt(e.toString(),10)];t.push(i)}return this._dictionary.update("InkList",t),this._getInkBoundsValue()},i.prototype._getInkBoundsValue=function(){var t=[0,0,0,0];t=void 0===this.bounds?[this._points[0],this._points[1],this._points[2],this._points[3]]:[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];var e=this.border.width;if(null!==this._inkPointsCollection&&this._inkPointsCollection.length>0){for(var i=[],n=0;n<this._inkPointsCollection.length;n++){var r=this._inkPointsCollection[Number.parseInt(n.toString(),10)];if(null!==r&&r.length%2==0)for(var a=0;a<r.length;a++)i.push(r[Number.parseInt(a.toString(),10)])}var s=!1;this._isLoaded||2!==i.length||(s=!0,i.push(i[0]+1),i.push(i[1]+1));var o=new Array(i.length/2),h=0;for(a=0;a<i.length;a+=2)o[Number.parseInt(h.toString(),10)]=[i[Number.parseInt(a.toString(),10)],i[a+1]],h++;if(this._isLoaded)if(!this._isFlatten&&o.length>0){var c=0,_=0,d=0,p=0,l=!0;for(n=0;n<o.length;n++){var u=o[Number.parseInt(n.toString(),10)];l?(c=u[0],_=u[1],l=!1):(u[0]<c?c=u[1]:u[0]>d&&(d=u[0]),u[1]<_?_=u[1]:u[1]>p&&(p=u[1]))}t=[c,_,d-c,p-_],!this._isLoaded&&this._setAppearance&&(t[0]=t[0]-e,t[1]=t[1]-e,t[2]=t[2]+2*e,t[3]=t[3]+2*e)}else t=void 0===this._points&&o.length>0?this._dictionary.get("Rect"):this._points;else if(o.length>5){for(c=0,_=0,d=0,p=0,l=!0,n=0;n<o.length;n++){u=o[Number.parseInt(n.toString(),10)];l?(c=u[0],_=u[1],d=u[0],p=u[1],l=!1):(u[0]<c?c=u[0]:u[0]>d&&(d=u[0]),u[1]<_?_=u[1]:u[1]>p&&(p=u[1]))}if(t[2]<d&&(d=t[2]),t[3]<p&&(p=t[3]),t=[c,_,d,p],!this._isLoaded&&this._setAppearance){var f=s?2:3;t[0]=t[0]-e,t[1]=t[1]-e,t[2]=t[2]+f*e,t[3]=t[3]+f*e}}else t=void 0===this._points&&o.length>0?this._dictionary.get("Rect"):this._points}return t},i.prototype._obtainInkListCollection=function(){var t=[];if(this._dictionary.has("InkList"))for(var e=this._dictionary.get("InkList"),i=[],n=0;n<e.length;n++){for(var r=e[Number.parseInt(n.toString(),10)],a=0;a<r.length;a++)i.push(r[Number.parseInt(a.toString(),10)]);t.push(i)}return t},i}(Yt),oe=function(e){function i(i,n,r,s,o){var h=e.call(this)||this;return h._icon=t.PdfPopupIcon.note,h._iconString="",h._stateModel=t.PdfAnnotationStateModel.none,h._state=t.PdfAnnotationState.none,h._open=!1,h._dictionary=new _,h._dictionary.update("Type",a.get("Annot")),h._dictionary.update("Subtype",a.get("Text")),void 0!==i&&(h.text=i),void 0!==n&&void 0!==r&&void 0!==s&&void 0!==o&&(h.bounds={x:n,y:r,width:s,height:o}),h._type=t.PdfAnnotationType.popupAnnotation,h}return Jt(i,e),Object.defineProperty(i.prototype,"open",{get:function(){return void 0===this._open&&this._dictionary.has("Open")&&(this._open=this._dictionary.get("Open")),this._open},set:function(t){void 0!==t&&(this._open=t,this._dictionary.update("Open",this._open))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Oi(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",a.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stateModel",{get:function(){return this._dictionary.has("StateModel")&&(this._stateModel=this._dictionary.get("StateModel")),this._stateModel},set:function(t){void 0!==t&&(this._stateModel=t,this._dictionary.update("StateModel",zi(this._stateModel)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._dictionary.has("State")&&(this._state=this._dictionary.get("State")),this._state},set:function(t){void 0!==t&&(this._state=t,this._dictionary.update("State",Ei(this._state)))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((i=new _(this._crossReference)).set("Type",a.get("Border")),this._dictionary.set("BS",i));void 0===t&&(t=1);var e=[this.bounds.x,this.bounds.y,this.bounds.x+this.bounds.width,this.bounds.y+this.bounds.height];if(this._dictionary.update("Rect",e),this._setAppearance){this._appearanceTemplate=this._createPopupAppearance();var i=new _;this._appearanceTemplate._content.dictionary._updated=!0;var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=n,i.set("N",n),i._updated=!0,this._dictionary.set("AP",i)}var r=this._page.size,s=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[s[0],s[1],s[0]+s[2],s[1]+s[3]])},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if(!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");if(i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference)),null!==this._appearanceTemplate){var r=this._page._graphics._save();this.opacity<1&&this._page._graphics._setTransparency(this.opacity),this._page._graphics._drawTemplate(this._appearanceTemplate,this.bounds),this._page._graphics._restore(r)}}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))}}else this._appearanceTemplate=this._createPopupAppearance();if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var a=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var s=this._appearanceTemplate._content.dictionary.getArray("BBox");s&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-s[0],-s[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,a)}},i.prototype._createPopupAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],e=new Qt(this,t);e._normal=new it(t,this._crossReference);var i=e._normal;Ri(i,null);var n=e._normal.graphics;if(this._dictionary.has("Name")&&("Comment"===this._dictionary.get("Name").name&&this._dictionary.has("Rect")&&null!==this._dictionary.getArray("Rect"))){var r=new We([0,0,0],.3),a=new Ve(this.color),s=new We([255,255,255],1),o=new Array;o.push([6,8]),o.push([9,8]),o.push([4,12]);var h=new Ft;0===this.color[0]&&0===this.color[0]&&0===this.color[0]&&(a=new Ve([255,215,0])),n._save();var c=new it([0,0,15,14],this._crossReference);c.graphics._drawRectangle(0,0,15,14,r,a),c.graphics._drawPolygon(o,r,new Ve([255,255,255])),h._addEllipse(2,2,11,8),c.graphics._drawPath(h,r,new Ve([255,255,255])),c.graphics._drawArc(2,2,11,8,108,12.7,s),c.graphics._drawLine(r,4,12,6.5,10),n._drawTemplate(c,{x:0,y:0,width:this.bounds.width,height:this.bounds.height}),n._restore()}return i},i.prototype._obtainIconName=function(e){switch(e){case t.PdfPopupIcon.note:this._iconString="Note";break;case t.PdfPopupIcon.comment:this._iconString="Comment";break;case t.PdfPopupIcon.help:this._iconString="Help";break;case t.PdfPopupIcon.insert:this._iconString="Insert";break;case t.PdfPopupIcon.key:this._iconString="Key";break;case t.PdfPopupIcon.newParagraph:this._iconString="NewParagraph";break;case t.PdfPopupIcon.paragraph:this._iconString="Paragraph"}return this._iconString},i}(Yt),he=function(e){function i(i,n,r,s,o){var h=e.call(this)||this;return h._dictionary=new _,h._dictionary.update("Type",a.get("Annot")),h._dictionary.update("Subtype",a.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(h.bounds={x:i,y:n,width:r,height:s}),null!=o&&(h._fileName=o),h._type=t.PdfAnnotationType.fileLinkAnnotation,h}return Jt(i,e),Object.defineProperty(i.prototype,"action",{get:function(){if(void 0===this._action&&this._dictionary.has("Next")){var t=this._dictionary.get("Next");t&&t.has("JS")&&(this._action=t.get("JS"))}return this._action},set:function(t){this._isLoaded||"string"!=typeof t||(this._action=t)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new _(this._crossReference);e.set("Type",a.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._addAction();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]])},i.prototype._addAction=function(){var t=new _;t.set("Type",a.get("Action")),t.set("S",a.get("Launch"));var e=new _;if(e.set("Type",a.get("Filespec")),e.set("UF",this._fileName),void 0!==this._action){var i=new _;i.set("Type",a.get("Action")),i.set("S",a.get("JavaScript")),i.set("JS",this._action);var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,i),i._updated=!0,t.set("Next",[n])}var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,e),e._updated=!0,t.set("F",r),t._updated=!0,this._dictionary.set("A",t)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),ce=function(e){function i(i,n,r,s,o){var h=e.call(this)||this;return h._dictionary=new _,h._dictionary.update("Type",a.get("Annot")),h._dictionary.update("Subtype",a.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(h.bounds={x:i,y:n,width:r,height:s}),null!=o&&(h._uri=o),h._type=t.PdfAnnotationType.uriAnnotation,h}return Jt(i,e),Object.defineProperty(i.prototype,"uri",{get:function(){if(void 0===this._uri&&this._dictionary.has("A")){var t=this._dictionary.get("A");t.has("URI")&&(this._uri=t.get("URI"))}return this._uri},set:function(t){if("string"==typeof t)if(this._isLoaded&&this._dictionary.has("A")){var e=this._dictionary.get("A");e.has("URI")&&(this._uri=t,e.update("URI",t))}else this._uri=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new _(this._crossReference);e.set("Type",a.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._addAction();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]])},i.prototype._addAction=function(){var t=new _;t.set("Type",a.get("Action")),t.set("S",a.get("URI")),void 0!==this._uri&&t.set("URI",this._uri),t._updated=!0,this._dictionary.set("A",t)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),_e=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.documentLinkAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"destination",{get:function(){return this._destination},set:function(t){null!==t&&(this._destination=t)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._addDocument();var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])},i.prototype._addDocument=function(){this._dictionary.set("Dest",this.destination._array)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),de=function(e){function i(i,n,r,s,o,h,c){var d=e.call(this)||this;return d._dictionary=new _,d._dictionary.update("Type",a.get("Annot")),d._dictionary.update("Subtype",a.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(d.bounds={x:i,y:n,width:r,height:s}),null!=o&&("string"==typeof o?d._textWebLink=o:d._pen=o),null!=h&&(h instanceof We?d._pen=h:h instanceof Ve&&(d._brush=h)),null!=c&&(d._brush=c),d._type=t.PdfAnnotationType.textWebLinkAnnotation,d}return Jt(i,e),Object.defineProperty(i.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"url",{get:function(){if(void 0===this._url&&this._dictionary.has("A")){var t=this._dictionary.get("A");t.has("URI")&&(this._url=t.get("URI"))}return this._url},set:function(t){if("string"==typeof t)if(this._isLoaded&&this._dictionary.has("A")){var e=this._dictionary.get("A");e.has("URI")&&(this._url=t,e.update("URI",t))}else this._url=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._addAction();var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])},i.prototype._addAction=function(){var e=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];void 0!==this.font&&null!==this.font||(this.font=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular),this._font=this.font);var i=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.top);this._page._graphics._drawString(this._textWebLink,this.font,e,this._pen,this._brush,i);var n=new _;n.set("Type",a.get("Action")),n.set("S",a.get("URI")),void 0!==this._url&&n.set("URI",this._url),n._updated=!0,this._dictionary.set("A",n),this._dictionary.update("Border",[0,0,0])},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),pe=function(e){function i(i,n,r,s,o,h){var c=e.call(this)||this;return c._icon=t.PdfAttachmentIcon.pushPin,c._iconString="",c._dictionary=new _,c._dictionary.update("Type",a.get("Annot")),c._dictionary.update("Subtype",a.get("FileAttachment")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(c.bounds={x:i,y:n,width:r,height:s}),void 0!==o&&(c._fileName=o),c._stream=new K("string"==typeof h?ei(h):h),c._type=t.PdfAnnotationType.fileAttachmentAnnotation,c}return Jt(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Di(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",a.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]]),this._addAttachment()},i.prototype._addAttachment=function(){var t=new _;t.set("Type",a.get("Filespec")),t.set("Desc",this._fileName),t.set("F",this._fileName),t.set("UF",this._fileName);var e=new _;e.set("Type",a.get("EmbeddedFile"));var i=new _,n=new Date;i.set("CreationDate",n.toTimeString()),i.set("ModDate",(new Date).toTimeString()),i.set("Size",this._stream.length),e.set("Params",i),this._stream.dictionary=new _,this._stream.dictionary=e,e._crossReference=this._crossReference;var r=[this._crossReference._newLine.charCodeAt(0),this._crossReference._newLine.charCodeAt(1),37,80,68,70,45];e._crossReference._writeObject(this._stream,r);var s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,this._stream),e._updated=!0;var o=new _;o.set("F",s),t.set("EF",o);var h=this._crossReference._getNextReference();this._crossReference._cacheMap.set(h,t),t._updated=!0,this._dictionary.update("FS",h)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i.prototype._obtainIconName=function(e){switch(e){case t.PdfAttachmentIcon.pushPin:this._iconString="PushPin";break;case t.PdfAttachmentIcon.tag:this._iconString="Tag";break;case t.PdfAttachmentIcon.graph:this._iconString="Graph";break;case t.PdfAttachmentIcon.paperClip:this._iconString="Paperclip"}return this._iconString},i}(Yt),le=function(e){function i(){var i=e.call(this)||this;return i._type=t.PdfAnnotationType.movieAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),ue=function(e){function i(i,n,r,s,o){var h=e.call(this)||this;return h._textMarkupType=t.PdfTextMarkupAnnotationType.highlight,h._markupText="",h._quadPoints=new Array(8),h._boundsCollection=[],h._dictionary=new _,h._dictionary.update("Type",a.get("Annot")),void 0!==i&&(h._markupText=i),void 0!==n&&void 0!==r&&void 0!==s&&void 0!==o&&(h.bounds={x:n,y:r,width:s,height:o},h._boundsCollection.push([h.bounds.x,h.bounds.y,h.bounds.width,h.bounds.height])),h._type=t.PdfAnnotationType.textMarkupAnnotation,h}return Jt(i,e),Object.defineProperty(i.prototype,"textMarkUpColor",{get:function(){return void 0===this._textMarkUpColor&&this._dictionary.has("C")&&(this._textMarkUpColor=_i(this._dictionary.getArray("C"))),this._textMarkUpColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.color;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._textMarkUpColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textMarkupType",{get:function(){if(this._dictionary.has("Subtype")){var t=this._dictionary.get("Subtype");this._textMarkupType=Ci(t.name)}return this._textMarkupType},set:function(t){void 0!==t&&(this._textMarkupType=t,this._dictionary.update("Subtype",a.get(Bi(t))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsCollection",{get:function(){if(this._isLoaded){var t=[];if(this._dictionary.has("QuadPoints")){var e=this._dictionary.getArray("QuadPoints");if(e&&e.length>0)for(var i=e.length/8,n=0;n<i;n++){var r=e[4+8*n]-e[8*n],a=e[5+8*n]-e[1+8*n],s=Math.sqrt(r*r+a*a);r=e[6+8*n]-e[4+8*n],a=e[7+8*n]-e[5+8*n];var o=Math.sqrt(r*r+a*a),h=[e[8*n],this._page.size[1]-e[1+8*n],o,s];t.push(h)}}return t}return this._boundsCollection},set:function(t){if(!this._isLoaded&&void 0!==t)if(this._boundsCollection.length>0){this._quadPoints=new Array(8+8*t.length);for(var e=0;e<t.length;e++)this._boundsCollection.push(t[Number.parseInt(e.toString(),10)])}else this._quadPoints=new Array(8),this._boundsCollection=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((n=new _(this._crossReference)).set("Type",a.get("Border")),n.set("W",this.border.width),this._dictionary.set("BS",n));void 0===t&&(t=1);var e=this._page.size;this._setQuadPoints(e);var i=[this.bounds.x,e[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._dictionary.update("Subtype",a.get(Bi(this._textMarkupType))),this._dictionary.update("Rect",[i[0],i[1],i[0]+i[2],i[1]+i[3]]),this._setAppearance){this._appearanceTemplate=this._createMarkupAppearance();var n=new _;this._appearanceTemplate._content.dictionary._updated=!0;var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=r,n.set("N",r),n._updated=!0,this._dictionary.set("AP",n)}null!==this._markupText&&this._dictionary.set("T",this._markupText)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createMarkupAppearance(),!t)){var e=new _;this._appearanceTemplate._content.dictionary._updated=!0;var i=this._crossReference._getNextReference();this._crossReference._cacheMap.set(i,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=i,e.set("N",i),e._updated=!0,this._dictionary.set("AP",e)}if(!this._appearanceTemplate&&t&&this._dictionary.has("AP"))if((e=this._dictionary.get("AP"))&&e.has("N"))if(n=e.get("N"))(i=e.getRaw("N"))&&(n.reference=i),this._appearanceTemplate=new it(n,this._crossReference)}else{var n;if(this._postProcess(),!this._appearanceTemplate)if(t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N"))if(n=e.get("N"))(i=e.getRaw("N"))&&(n.reference=i),this._appearanceTemplate=new it(n,this._crossReference)}else this._appearanceTemplate=this._createMarkupAppearance()}if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i.prototype._createMarkupAppearance=function(){var e,i,n=0;if(this._boundsCollection.length>1){for(var r=new Ft,a=0;a<this._boundsCollection.length;a++){var s=[];s[0]=this._boundsCollection[Number.parseInt(a.toString(),10)][0],s[1]=this._boundsCollection[Number.parseInt(a.toString(),10)][1],s[2]=this._boundsCollection[Number.parseInt(a.toString(),10)][2],s[3]=this._boundsCollection[Number.parseInt(a.toString(),10)][3],r._addRectangle(s[0],s[1],s[2],s[3])}var o=r._getBounds();i={x:o[0],y:o[1],width:o[2],height:o[3]},this.bounds=i,e=i.width,n=i.height}else if(this._dictionary.has("QuadPoints")){var h=this._dictionary.get("QuadPoints");if(null!==this._quadPoints)for(a=0;a<h.length/8;a++)if(this._isLoaded){for(var c=new Array,_=0,d=0;d<h.length;){var p=h[Number.parseInt(d.toString(),10)],l=h[d+1];c[Number.parseInt(_.toString(),10)]=[p,l],d+=2,_++}var u=new Ft;u._addLines(c);var f=u._getBounds();i={x:f[0],y:f[1],width:f[2],height:f[3]},this.bounds=i,e=i.width,n=i.height}else{var g=Math.floor(h[4+8*a])-Math.floor(h[0+8*a]),y=Math.floor(h[5+8*a])-Math.floor(h[1+8*a]);n=Math.sqrt(g*g+y*y),g=Math.floor(h[6+8*a])-Math.floor(h[4+8*a]),y=Math.floor(h[7+8*a])-Math.floor(h[5+8*a]),e=Math.sqrt(g*g+y*y),this.bounds={x:this.bounds.x,y:this.bounds.y,width:e,height:n}}}var m=new it([0,0,e,n],this._crossReference);Ri(m,null);var b,v,w=m.graphics;void 0!==this._opacity&&w._setTransparency(this._opacity,this._opacity,t._PdfBlendMode.multiply),this.textMarkUpColor&&(b=new We(this._textMarkUpColor,this.border.width),v=new Ve(this._textMarkUpColor));var S,P=0,A=0,x=0,k=0;if(this._boundsCollection.length>1)for(a=0;a<this._boundsCollection.length;a++){var T=this._boundsCollection[Number.parseInt(a.toString(),10)];this.textMarkupType===t.PdfTextMarkupAnnotationType.highlight?w._drawRectangle(T[0]-i.x,T[1]-i.y,T[2],T[3],v):this.textMarkupType===t.PdfTextMarkupAnnotationType.underline?(P=T[0]-i.x,A=T[1]-i.y+(T[3]-T[3]/2/3),x=T[2]+(T[0]-i.x),k=T[1]-i.y+(T[3]-T[3]/2/3),w._drawLine(b,P,A,x,k)):this.textMarkupType===t.PdfTextMarkupAnnotationType.strikeOut?(P=T[0]-i.x,A=T[1]-i.y+(T[3]-T[3]/2),x=T[2]+(T[0]-i.x),k=T[1]-i.y+(T[3]-T[3]/2),w._drawLine(b,P,A,x,k)):this.textMarkupType===t.PdfTextMarkupAnnotationType.squiggly&&(b._width=.02*T[3],w._save(),w._translateTransform(T[0]-i.x,T[1]-i.y),w._setClip([0,0,T[2],T[3]]),w._drawPath(this._drawSquiggly(Math.round(T[2]),Math.round(T[3])),b),w._restore())}else this.textMarkupType===t.PdfTextMarkupAnnotationType.highlight?w._drawRectangle(0,0,e,n,b,v):this.textMarkupType===t.PdfTextMarkupAnnotationType.underline?w._drawLine(b,0,n-n/2/3,e,n-n/2/3):this.textMarkupType===t.PdfTextMarkupAnnotationType.strikeOut?w._drawLine(b,0,n/2,e,n/2):this.textMarkupType===t.PdfTextMarkupAnnotationType.squiggly&&(b._width=.02*n,w._drawPath(this._drawSquiggly(Math.round(e),Math.round(n)),b));return S=this._isLoaded?[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height]:[this.bounds.x,this._page.size[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height],this._dictionary.update("Rect",[S[0],S[1],S[0]+S[2],S[1]+S[3]]),m},i.prototype._drawSquiggly=function(t,e){(t%2!=0||Math.round(t)>t)&&(t+=1);for(var i=new Ft,n=new Array,r=16*Math.ceil(t/e),a=t/(r/2),s=parseFloat((.6*(a+a)).toFixed(2)),o=s,h=0,c=0;c<r;c++){var _=[h,parseFloat((e-s+o-.02*e).toFixed(2))];n.push(_),o=0===o?s:0,h+=a}return i._addLines(n),i},i.prototype._setQuadPoints=function(t){var e=[],i=t[1];this._boundsCollection[0]=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];for(var n=this._quadPoints.length/8,r=0;r<n;r++){var a=this._boundsCollection[Number.parseInt(r.toString(),10)][0],s=this._boundsCollection[Number.parseInt(r.toString(),10)][1];e[0+8*r]=a,e[1+8*r]=i-s,e[2+8*r]=a+this._boundsCollection[Number.parseInt(r.toString(),10)][2],e[3+8*r]=i-s,e[4+8*r]=a,e[5+8*r]=e[1+8*r]-this._boundsCollection[Number.parseInt(r.toString(),10)][3],e[6+8*r]=a+this._boundsCollection[Number.parseInt(r.toString(),10)][2],e[7+8*r]=e[5+8*r]}this._points=e,this._dictionary.set("QuadPoints",this._points)},i}(Yt),fe=function(e){function i(i,n,r,s,o){var h=e.call(this)||this;return h._watermarkText="",h._dictionary=new _,h._dictionary.update("Type",a.get("Annot")),h._dictionary.update("Subtype",a.get("Watermark")),void 0!==i&&(h._watermarkText=i,h.text=i),void 0!==n&&void 0!==r&&void 0!==s&&void 0!==o&&(h.bounds={x:n,y:r,width:s,height:o}),h._type=t.PdfAnnotationType.watermarkAnnotation,h}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new _(this._crossReference);e.set("Type",a.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._appearanceTemplate=this._createWatermarkAppearance();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]]),void 0!==this.opacity&&1!==this._opacity&&this._dictionary.set("CA",this._opacity)},i.prototype._createWatermarkAppearance=function(){var e=this._obtainFont();e||(e=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular)),this._rotateAngle=this._getRotationAngle(),(void 0!==this.rotate&&this._rotate!==t.PdfRotationAngle.angle0||this._rotateAngle!==t.PdfRotationAngle.angle0)&&(0===this._rotateAngle&&(this._rotateAngle=90*this.rotate),this.bounds=this._getRotatedBounds(this.bounds,this._rotateAngle));var i=[0,0,this.bounds.width,this.bounds.height],n=new Qt(this,i);n._normal=new it(i,this._crossReference);var r=n._normal;Ri(r,this._rotateAngle);var a,s=n._normal.graphics,o=this.border.width/2,h=new nt(t.PdfTextAlignment.left,t._PdfVerticalAlignment.top),c=new We(this.color,o);this.innerColor&&(a=new Ve(this._innerColor)),this._isLoaded?(this._dictionary.has("Contents")&&(this._watermarkText=this._dictionary.get("Contents")),this._dictionary.update("Contents",this._watermarkText)):this._dictionary.update("Contents",this._watermarkText),void 0!==this._watermarkText&&s._drawString(this._watermarkText,e,[0,0,0,0],c,a,h);var d=new _;s._template._content.dictionary._updated=!0;var p=this._crossReference._getNextReference();return this._crossReference._cacheMap.set(p,s._template._content),s._template._content.reference=p,d.set("N",p),d._updated=!0,this._dictionary.set("AP",d),r},i.prototype._doPostProcess=function(t){var e,i,n;(void 0===t&&(t=!1),this._isLoaded)?(t||(this._appearanceTemplate=this._createWatermarkAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference)):this._appearanceTemplate=this._createWatermarkAppearance()));if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i}(Yt),ge=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._icon=t.PdfRubberStampAnnotationIcon.draft,o._stampWidth=0,o._iconString="",o.rotateAngle=0,o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Stamp")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.rubberStampAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Li(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",a.get("#"+this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new _(this._crossReference);e.set("Type",a.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._appearanceTemplate=this._createRubberStampAppearance()},i.prototype._doPostProcess=function(t){var e,i,n;(void 0===t&&(t=!1),this._isLoaded)?(t||(this._appearanceTemplate=this._createRubberStampAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference)):this._appearanceTemplate=this._createRubberStampAppearance()));if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i.prototype._createRubberStampAppearance=function(){var e=[0,0,this.bounds.width,this.bounds.height],i=new Ve(this._obtainBackGroundColor()),n=new We(this._obtainBorderColor(),this.border.width);this._iconString=this._obtainIconName(this._icon),this._dictionary.update("Name",a.get("#"+this._iconString));var r=this._obtainFont();null==r&&(r=new At(t._PdfFontFamily.helvetica,8,t._PdfFontStyle.regular));var s=new nt;s.alignment=t.PdfTextAlignment.center,s.lineAlignment=t._PdfVerticalAlignment.middle;var o=new Qt(this,e);o._normal=new it(e,this._crossReference);var h=o._normal;void 0===this._rotate||this._rotate===t.PdfRotationAngle.angle0&&0===this._getRotationAngle()||(this.rotateAngle=this._getRotationAngle(),0===this.rotateAngle&&(this.rotateAngle=90*this.rotate),this.bounds=this._getRotatedBounds(this.bounds,this.rotateAngle)),Ri(h,this.rotateAngle);var c=h.graphics;c._save(),c._scaleTransform(h._size[0]/(this._stampWidth+4),h._size[1]/28);var d=new At(t._PdfFontFamily.helvetica,20,t._PdfFontStyle.italic|t._PdfFontStyle.bold);this._drawRubberStamp(c,n,i,d,s),c._restore();var p=new _;c._template._content.dictionary._updated=!0;var l=this._crossReference._getNextReference();this._crossReference._cacheMap.set(l,c._template._content),c._template._content.reference=l,p.set("N",l),p._updated=!0,this._dictionary.set("AP",p),this._dictionary.set("Border",[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))]);var u=this._page.size,f=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height];return f[1]=u[1]-(this.bounds.y+this.bounds.height),this._dictionary.set("Rect",[f[0],f[1],f[0]+f[2],f[1]+f[3]]),h},i.prototype._obtainIconName=function(e){switch(e){case t.PdfRubberStampAnnotationIcon.approved:this._iconString="Approved",this._stampWidth=126;break;case t.PdfRubberStampAnnotationIcon.asIs:this._iconString="AsIs",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.confidential:this._iconString="Confidential",this._stampWidth=166;break;case t.PdfRubberStampAnnotationIcon.departmental:this._iconString="Departmental",this._stampWidth=186;break;case t.PdfRubberStampAnnotationIcon.draft:this._iconString="Draft",this._stampWidth=90;break;case t.PdfRubberStampAnnotationIcon.experimental:this._iconString="Experimental",this._stampWidth=176;break;case t.PdfRubberStampAnnotationIcon.expired:this._iconString="Expired",this._stampWidth=116;break;case t.PdfRubberStampAnnotationIcon.final:this._iconString="Final",this._stampWidth=90;break;case t.PdfRubberStampAnnotationIcon.forComment:this._iconString="ForComment",this._stampWidth=166;break;case t.PdfRubberStampAnnotationIcon.forPublicRelease:this._iconString="ForPublicRelease",this._stampWidth=240;break;case t.PdfRubberStampAnnotationIcon.notApproved:this._iconString="NotApproved",this._stampWidth=186;break;case t.PdfRubberStampAnnotationIcon.notForPublicRelease:this._iconString="NotForPublicRelease",this._stampWidth=290;break;case t.PdfRubberStampAnnotationIcon.sold:this._iconString="Sold",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.topSecret:this._iconString="TopSecret",this._stampWidth=146;break;case t.PdfRubberStampAnnotationIcon.completed:this._iconString="Completed",this._stampWidth=136;break;case t.PdfRubberStampAnnotationIcon.void:this._iconString="Void",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.informationOnly:this._iconString="InformationOnly",this._stampWidth=230;break;case t.PdfRubberStampAnnotationIcon.preliminaryResults:this._iconString="PreliminaryResults",this._stampWidth=260}return this._iconString},i.prototype._obtainBackGroundColor=function(){return this._icon===t.PdfRubberStampAnnotationIcon.notApproved||this._icon===t.PdfRubberStampAnnotationIcon.void?[251,222,221]:this._icon===t.PdfRubberStampAnnotationIcon.approved||this._icon===t.PdfRubberStampAnnotationIcon.final||this._icon===t.PdfRubberStampAnnotationIcon.completed?[229,238,222]:[219,227,240]},i.prototype._obtainBorderColor=function(){return this._icon===t.PdfRubberStampAnnotationIcon.notApproved||this._icon===t.PdfRubberStampAnnotationIcon.void?[151,23,15]:this._icon===t.PdfRubberStampAnnotationIcon.approved||this._icon===t.PdfRubberStampAnnotationIcon.final||this._icon===t.PdfRubberStampAnnotationIcon.completed?[73,110,38]:[24,37,100]},i.prototype._drawRubberStamp=function(t,e,i,n,r){t._drawRoundedRectangle(2,1,this._stampWidth,26,3,e,i);var a=new Ve(this._obtainBorderColor());t._drawString(this._iconString.toUpperCase(),n,[this._stampWidth/2+1,15,0,0],null,a,r)},i}(Yt),ye=function(e){function i(){var i=e.call(this)||this;return i._type=t.PdfAnnotationType.soundAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),me=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._intentString="",o._textAlignment=t.PdfTextAlignment.left,o._cropBoxValueX=0,o._cropBoxValueY=0,o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("FreeText")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.freeTextAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"calloutLines",{get:function(){return void 0!==this._calloutLines?this._calloutLines:this._getCalloutLinePoints()},set:function(t){this._calloutLines=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineEndingStyle",{get:function(){return this._lineEndingStyle=this._obtainLineEndingStyle(),this._lineEndingStyle},set:function(t){void 0!==t&&this._dictionary.update("LE",a.get(li(t))),this._lineEndingStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textMarkUpColor",{get:function(){if(void 0===this._textMarkUpColor){var t=void 0;if(this._dictionary.has("TextColor"))return this._textMarkUpColor=_i(this._dictionary.getArray("TextColor")),this._textMarkUpColor;if(this._dictionary.has("DS"))for(var e=this._dictionary.get("DS").split(";"),i=0;i<e.length;i++)if(-1!==e[Number.parseInt(i.toString(),10)].indexOf("color"))return(t=e[Number.parseInt(i.toString(),10)].split(":")[1]).startsWith("#")&&(t=t.substring(1)),this._textMarkUpColor=ci(t),this._textMarkUpColor;!this._textMarkUpColor&&this._dictionary.has("RC")}return this._textMarkUpColor},set:function(t){void 0!==t&&3===t.length&&(this._textMarkUpColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this._font||(this._font=this._obtainFont()),this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("OC")&&(this._borderColor=_i(this._dictionary.getArray("OC"))),this._borderColor},set:function(t){void 0!==t&&3===t.length&&(this._borderColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"markupText",{get:function(){return void 0===this._markupText&&this._dictionary.has("Contents")&&(this._markupText=this._dictionary.get("Contents")),this._markupText},set:function(t){"string"==typeof t&&(this._dictionary.update("Contents",t),this._markupText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"annotationIntent",{get:function(){return this._dictionary.has("IT")&&(this._annotationIntent=ji(this._dictionary.get("IT").name)),this._annotationIntent},set:function(t){void 0!==t&&(this._annotationIntent=t,this._dictionary.update("IT",a.get(this._obtainAnnotationIntent(this._annotationIntent))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}if(void 0===e&&(e=1),this._updateCropBoxValues(),(t||this._setAppearance)&&(this._appearanceTemplate=this._createAppearance()),!t){var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]]),this._saveFreeTextDictionary()}},i.prototype._updateCropBoxValues=function(){if(this._page){var t=void 0;this._page._pageDictionary.has("CropBox")?t=this._page._pageDictionary.getArray("CropBox"):this._page._pageDictionary.has("MediaBox")&&(t=this._page._pageDictionary.getArray("MediaBox")),t&&(this._cropBoxValueX=t[0],this._cropBoxValueY=t[1])}},i.prototype._doPostProcess=function(t){var e,i;(void 0===t&&(t=!1),this._isLoaded)?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((o=e.getRaw("N"))&&(i.reference=o),this._appearanceTemplate=new it(i,this._crossReference))):(this._postProcess(t),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((o=e.getRaw("N"))&&(i.reference=o),this._appearanceTemplate=new it(i,this._crossReference)):this._appearanceTemplate=this._createAppearance()));if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var n=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var r=this._appearanceTemplate._content.dictionary.getArray("BBox");r&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-r[0],-r[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,n)}if(!t&&this._setAppearance){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new _(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}var o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,this._appearanceTemplate._content),a.update("N",o)}},i.prototype._createAppearance=function(){var e,i=this.border.width/2,n=this._obtainAppearanceBounds(),r=this.rotationAngle;0!==r&&90!==r&&180!==r&&270!==r||(this._isAllRotation=!1),Ri(e=r>0&&this._isAllRotation?new it([0,0,n[2],n[3]],this._crossReference):new it(n,this._crossReference),this._getRotationAngle());var a=new Fe,s=this._obtainText();e._writeTransformation=!1;var o=e.graphics,h=this._obtainTextAlignment(),c=this._obtainColor(),_=new We(c,this.border.width);this.border.width>0&&(a.borderPen=_);var d=this._obtainStyle(_,n,i,a);if(this.color&&(a.foreBrush=new Ve(this._color)),this.textMarkUpColor&&(a.backBrush=new Ve(this._textMarkUpColor)),a.borderWidth=this.border.width,this.calloutLines.length>=2){if(this._drawCallOuts(o,_),this._isLoaded&&void 0===this._lineEndingStyle&&(this._lineEndingStyle=this.lineEndingStyle),this._lineEndingStyle!==t.PdfLineEndingStyle.none){var p=this._obtainLinePoints(),l=this._getAngle(p),u=this._getAxisValue([p[2],p[3]],90,0);this._drawLineEndStyle(u,o,l,_,a.foreBrush,this.lineEndingStyle,this.border.width,!1)}(d=this._dictionary.has("RD")?[d[0],-d[1],d[2],-d[3]]:[this.bounds.x,-(this._page.size[1]-(this.bounds.y+this.bounds.height)),this.bounds.width,-this.bounds.height])[0]=d[0]+this._cropBoxValueX,d[1]=d[1]-this._cropBoxValueY,this._calculateRectangle(d),a.bounds=d}else d=[d[0],-d[1],d[2],-d[3]];this.opacity&&this._opacity<1&&(o._save(),o._setTransparency(this._opacity)),this.rotate&&this._rotate!==t.PdfRotationAngle.angle0&&o._save(),this._drawFreeTextRectangle(o,a,d,h),this._drawFreeMarkUpText(o,a,d,s,h),this.opacity&&this._opacity<1&&o._restore(),this.rotate&&this._rotate!==t.PdfRotationAngle.angle0&&o._restore();var f=this._obtainAppearanceBounds();return this._dictionary.set("Rect",[f[0],f[1],f[0]+f[2],f[1]+f[3]]),e},i.prototype._calculateRectangle=function(t){for(var e=this._obtainAppearanceBounds(),i=[t[0]-e[0],-t[1]-e[1],t[2]-e[2],-t[1]-e[1]-t[3]-e[3]],n=0;n<4;n++)i[Number.parseInt(n.toString(),10)]<0&&(i[Number.parseInt(n.toString(),10)]=-i[Number.parseInt(n.toString(),10)]);this._dictionary.set("RD",i)},i.prototype._obtainAnnotationIntent=function(e){switch(e){case t.PdfAnnotationIntent.none:this._intentString="None";break;case t.PdfAnnotationIntent.freeTextCallout:this._intentString="FreeTextCallout";break;case t.PdfAnnotationIntent.freeTextTypeWriter:this._intentString="FreeTextTypeWriter"}return this._intentString},i.prototype._obtainFont=function(){var t=this._obtainFontDetails();return!t.size&&this._dictionary.has("RC"),this._mapFont(t.name,t.size,t.style)},i.prototype._drawFreeMarkUpText=function(e,i,n,r,a){var s=!1,o=this.rotationAngle;if(this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation?0!==o||this._isAllRotation||(n=[n[0],n[1]+n[3],n[2],n[3]]):n=[n[1]+n[3],-(n[0]+n[2]),-n[3],n[2]]:n=[-(n[0]+n[2]),-n[3],n[2],-n[3]]:n=[-n[1],n[0],-n[3],n[2]],o>0&&this._isAllRotation){s=!0;var h=this.bounds,c=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle),_=this._font._measureString(r,c,[0,0],0,0);o>0&&o<=91?e._translateTransform(_[1],-h.height):o>91&&o<=181?e._translateTransform(h.width-_[1],-(h.height-_[1])):o>181&&o<=271?e._translateTransform(h.width-_[1],-_[1]):o>271&&o<360&&e._translateTransform(_[1],-_[1]),e._rotateTransform(o),i.bounds=[0,0,i.bounds[2],i.bounds[3]]}var d=n;i.borderWidth>0&&(n=[n[0]+1.5*i.borderWidth,n[1]+1.5*i.borderWidth,n[2]-3*i.borderWidth,n[3]>0?n[3]-3*i.borderWidth:-n[3]-3*i.borderWidth]),void 0===this._font&&(this._font=this._obtainFont());var p=this._font._metrics.getHeight()>(n[3]>0?n[3]:-n[3]),l=this._font._metrics.getHeight()<=(d[3]>0?d[3]:-d[3]),u=p&&l;this._drawFreeTextAnnotation(e,i,r,this._font,u?d:n,!0,a,s)},i.prototype._drawFreeTextRectangle=function(e,i,n,r){if(this._dictionary.has("BE")){for(var a=0;a<n.length;a++)n[Number.parseInt(a.toString(),10)]<0&&(n[Number.parseInt(a.toString(),10)]=-n[Number.parseInt(a.toString(),10)]);this._drawAppearance(e,i,n),this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation||e._rotateTransform(-270):e._rotateTransform(-180):e._rotateTransform(-90)}else this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation||(e._rotateTransform(-270),i.bounds=[n[1]+n[3],-n[0],-n[3],-n[2]]):(e._rotateTransform(-180),i.bounds=[-(n[2]+n[0]),-(n[3]+n[1]),n[2],n[3]]):(e._rotateTransform(-90),i.bounds=[-n[1],n[2]+n[0]-n[3],-n[2]]),this._drawFreeTextAnnotation(e,i,"",this._font,i.bounds,!1,r,!1)},i.prototype._drawAppearance=function(t,e,i){var n=new Ft;if(n._addRectangle(i[0],i[1],i[2],i[3]),this._dictionary.has("BE")){var r=this._dictionary.get("BE");if(r&&r.has("I")){var a=1===r.get("I")?4:9;this._drawCloudStyle(t,e.foreBrush,e.borderPen,a,.833,n._points,!0)}}},i.prototype._drawFreeTextAnnotation=function(e,i,n,r,a,s,o,h){if(s){var c=new nt;c.lineAlignment=t._PdfVerticalAlignment.top,c.alignment=o,c.lineSpacing=0,h?e._drawString(n,r,i.bounds,null,i.backBrush,c):e._drawString(n,r,a,null,i.backBrush,c)}else e._drawRectangle(a[0],a[1],a[2],a[3],i.borderPen,i.foreBrush)},i.prototype._getCalloutLinePoints=function(){if(this._dictionary.has("CL")){var t=this._dictionary.getArray("CL");if(t){this._calloutLines=[];for(var e=0;e<t.length;e+=2){var i=[t[Number.parseInt(e.toString(),10)],this._page.size[1]-t[e+1]];this._calloutLines.push(i)}}}return this._calloutLines},i.prototype._obtainAppearanceBounds=function(){var e=[0,0,0,0];if(this.calloutLines&&this._calloutLines.length>0){for(var i=new Ft,n=[],r=2===this._calloutLines.length?2:3,a=0;a<r;a++)n.push([0,0]);if(this._calloutLines.length>=2){this._obtainCallOutsNative();for(a=0;a<this._calloutLines.length&&a<3;a++)n[Number.parseInt(a.toString(),10)]=[this._calloutsClone[Number.parseInt(a.toString(),10)][0],this._calloutsClone[Number.parseInt(a.toString(),10)][1]]}n.length>0&&(this.lineEndingStyle!==t.PdfLineEndingStyle.none&&this._expandAppearance(n),i._addLines(n)),i._addRectangle(this.bounds.x-2,this._page.size[1]-(this.bounds.y+this.bounds.height)-2,this.bounds.width+4,this.bounds.height+4),e=i._getBounds()}else{var s=ri(this._dictionary);e=[s.x,s.y,s.width,s.height]}return e},i.prototype._obtainCallOutsNative=function(){if(this.calloutLines.length>0){var t=this._page.size;this._calloutsClone=[];for(var e=0;e<this._calloutLines.length;e++)this._calloutsClone.push([this._calloutLines[Number.parseInt(e.toString(),10)][0],t[1]-this._calloutLines[Number.parseInt(e.toString(),10)][1]])}},i.prototype._obtainLinePoints=function(){var t=this._page.size[1];return[this.calloutLines[1][0],t-this.calloutLines[1][1],this.calloutLines[0][0],t-this.calloutLines[0][1]]},i.prototype._obtainLineEndingStyle=function(){var e=t.PdfLineEndingStyle.square;return this._dictionary.has("LE")&&(e=ui(this._dictionary.get("LE").name,e)),e},i.prototype._obtainText=function(){var t="";if(this._dictionary.has("Contents")){var e=this._dictionary.get("Contents");return e&&(t=e),t&&""!==t&&(this._markUpText=t),t}return this._dictionary.has("RC")?t=this._rcText:t},i.prototype._obtainTextAlignment=function(){var e,i=t.PdfTextAlignment.left;this._dictionary.has("Q")?void 0!==(n=this._dictionary.get("Q"))&&(i=n,e=!0):this._dictionary.has("RC");if(!e&&this._dictionary.has("DS"))for(var n,r=(n=this._dictionary.get("DS")).split(";"),a=0;a<r.length;a++)if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("text-align"))switch(r[Number.parseInt(a.toString(),10)]){case"left":i=t.PdfTextAlignment.left;break;case"right":i=t.PdfTextAlignment.right;break;case"center":i=t.PdfTextAlignment.center;break;case"justify":i=t.PdfTextAlignment.justify}return i},i.prototype._obtainColor=function(){var t;if(this._isLoaded){if(this._dictionary.has("DA")){var e=this._dictionary.get("DA");e&&(Array.isArray(e)?e.length>0&&(t=[e[0],e[1],e[2]]):"string"==typeof e&&(this._da=new Xt(e),t=this._da.color))}else if(this._dictionary.has("MK")){var i=this._mkDictionary;if(i&&i.has("BC")){var n=i.getArray("BC");n&&(t=_i(n))}}}else t=this.borderColor?this.borderColor:[0,0,0];return t},i.prototype._expandAppearance=function(e){var i=e[0][1],n=e[0][0];(i=this._page.size[1]-i)>this.bounds.y?this.lineEndingStyle!==t.PdfLineEndingStyle.openArrow&&(e[0][1]-=11*this.border.width):e[0][1]+=11*this.border.width,n<=this.bounds.x?e[0][0]-=11*this.border.width:e[0][0]+=11*this.border.width},i.prototype._drawCallOuts=function(t,e){for(var i=new Ft,n=[],r=2===this._calloutLines.length?2:3,a=0;a<r;a++)n.push([0,0]);if(this._calloutLines.length>=2){this._obtainCallOutsNative();for(a=0;a<this._calloutLines.length&&a<3;a++)n[Number.parseInt(a.toString(),10)]=[this._calloutsClone[Number.parseInt(a.toString(),10)][0],-this._calloutsClone[Number.parseInt(a.toString(),10)][1]]}n.length>0&&i._addLines(n),t._drawPath(i,e)},i.prototype._saveFreeTextDictionary=function(){void 0!==this.font&&null!==this.font||(this.font=new At(t._PdfFontFamily.helvetica,7,t._PdfFontStyle.regular),this._font=this.font),void 0!==this.markupText&&null!==this.markupText||(this.markupText=this.text),this._dictionary.update("Contents",this._markupText),this._isLoaded&&(this._textAlignment=this.textAlignment,this._calloutLines=this.calloutLines),this._dictionary.update("Q",this._textAlignment),void 0===this._annotationIntent&&(this._annotationIntent=this.annotationIntent),this._annotationIntent===t.PdfAnnotationIntent.none?this._dictionary.update("Subj","Text Box"):this._dictionary.update("IT",a.get(this._obtainAnnotationIntent(this._annotationIntent)));var e="font:"+this.font._metrics._postScriptName+" "+this.font._size+"pt;style:"+Ui(this.font._style)+";color:"+this._colorToHex(this.textMarkUpColor);this._dictionary.update("DS",e);var i=(this.borderColor[0]/255).toFixed(3)+" "+(this.borderColor[1]/255).toFixed(3)+" "+(this.borderColor[2]/255).toFixed(3)+" rg ";if(this._dictionary.update("DA",i),this._dictionary.update("RC",'<?xml version="1.0"?><body xmlns="http://www.w3.org/1999/xhtml"><p dir="ltr">'+this._getXmlFormattedString(this.markupText)+"</p></body>"),this._annotationIntent===t.PdfAnnotationIntent.freeTextCallout&&this._calloutLines.length>=2){for(var n=this._page.size[1],r=[],s=0;s<this._calloutLines.length&&s<3;s++)r.push(this._calloutLines[Number.parseInt(s.toString(),10)][0]+this._cropBoxValueX),r.push(n+this._cropBoxValueY-this._calloutLines[Number.parseInt(s.toString(),10)][1]);if(this._dictionary.update("CL",r),this._setAppearance){var o=this._obtainAppearanceBounds();this._dictionary.update("Rect",[o[0],o[1],o[0]+o[2],o[1]+o[3]])}}},i.prototype._getXmlFormattedString=function(t){return t=(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},i}(Yt),be=function(e){function i(i,n,r,s){var o=e.call(this)||this;return o._textAlignment=t.PdfTextAlignment.left,o._dictionary=new _,o._dictionary.update("Type",a.get("Annot")),o._dictionary.update("Subtype",a.get("Redact")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==s&&(o.bounds={x:i,y:n,width:r,height:s}),o._type=t.PdfAnnotationType.redactionAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"repeatText",{get:function(){return void 0===this._repeat&&this._dictionary.has("Repeat")&&(this._repeat=this._dictionary.get("Repeat")),this._repeat},set:function(t){t!==this._repeat&&(this._repeat=t,this._dictionary&&this._dictionary.update("Repeat",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textColor",{get:function(){return void 0===this._textColor&&this._dictionary.has("C")&&(this._textColor=_i(this._dictionary.getArray("C"))),this._textColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.textColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._textColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("OC")&&(this._borderColor=_i(this._dictionary.getArray("OC"))),this._borderColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.borderColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._borderColor=t,this._dictionary.update("OC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"overlayText",{get:function(){return void 0===this._overlayText&&this._dictionary.has("OverlayText")&&(this._overlayText=this._dictionary.get("OverlayText")),this._overlayText},set:function(t){"string"==typeof t&&(this._dictionary.update("OverlayText",t),this._overlayText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new _(this._crossReference);i.set("Type",a.get("Border")),this._dictionary.set("BS",i)}void 0===e&&(e=1),this._setAppearance&&(this._appearanceTemplate=this._createRedactionAppearance(t));var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded)this._appearanceTemplate=this._createRedactionAppearance(t);else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){var e=this._dictionary.get("AP");if(e&&e.has("N")){var i=e.get("N");if(i){var n=e.getRaw("N");n&&(i.reference=n),this._appearanceTemplate=new it(i,this._crossReference)}}}else this._appearanceTemplate=this._createRedactionAppearance(t);if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i.prototype._createRedactionAppearance=function(t){var e=this._createNormalAppearance();if(t)this._isLoaded&&null!==this._page&&this._removeAnnotationFromPage(this._page,this);else{var i=this._createBorderAppearance(),n=new _;i._content.dictionary._updated=!0;var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,i._content),i._content.reference=r,n.set("N",r),e._content.dictionary._updated=!0;var a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,e._content),e._content.reference=a,n.set("R",a),n._updated=!0,this._dictionary.set("AP",n)}return e},i.prototype._createBorderAppearance=function(){var t,e=[0,0,this.bounds.width,this.bounds.height],i=new it(e,this._crossReference),n=this.border.width/2,r=i.graphics,a=this.border.width;this.border.width>0&&this.borderColor&&(t=new We(this.borderColor,a));var s=[e[0],e[1],e[2],e[3]];if(this.opacity<1){var o=r._save();r._setTransparency(this.opacity),r._drawRectangle(s[0]+n,s[1]+n,s[2]-a,s[3]-a,t,null),r._restore(o)}else r._drawRectangle(s[0]+n,s[1]+n,s[2]-a,s[3]-a,t,null);return i},i.prototype._createNormalAppearance=function(){var e=[0,0,this.bounds.width,this.bounds.height],i=new it(e,this._crossReference);Ri(i,this._getRotationAngle());var n,r,a,s=this.border.width/2,o=i.graphics,h=new Fe;this.textColor&&this.border.width>0&&(n=new We(this.textColor,this.border.width)),this.innerColor&&(r=new Ve(this.innerColor)),a=this.textColor?new Ve(this.textColor):new Ve([128,128,128]),h.backBrush=r,h.borderWidth=s;var c=this.border.width,_=[e[0],e[1],e[2],e[3]];if(this.opacity<1){var d=o._save();o._setTransparency(this.opacity),o._drawRectangle(_[0]+s,_[1]+s,_[2]-c,_[3]-c,n,r),o._restore(d)}else o._drawRectangle(_[0]+s,_[1]+s,_[2]-c,_[3]-c,n,r);o._restore();var p=0,l=0;void 0!==this.font&&null!==this.font||(this.font=new At(t._PdfFontFamily.helvetica,10,t._PdfFontStyle.regular));var u,f=0,g=0,y=0;this._isLoaded&&(this._textAlignment=this.textAlignment);var m=new nt(this._textAlignment,t._PdfVerticalAlignment.middle),b=this.font._measureString(this.overlayText,m,[0,0],0,0);if(this._isLoaded&&void 0===this._repeat&&(this._repeat=this.repeatText),this._repeat){p=this.bounds.width/b[0],l=Math.floor(this.bounds.height/this.font._size),y=Math.abs(this.bounds.width-Math.floor(p)*b[0]),this._textAlignment===t.PdfTextAlignment.center&&(g=y/2),this._textAlignment===t.PdfTextAlignment.right&&(g=y);for(var v=1;v<p;v++){for(var w=0;w<l;w++)u=[g,f,0,0],o._drawString(this.overlayText,this.font,u,null,a,null),f+=this.font._size;g+=b[0],f=0}}else y=Math.abs(this.bounds.width-b[0]),this._textAlignment===t.PdfTextAlignment.center&&(g=y/2),this._textAlignment===t.PdfTextAlignment.right&&(g=y),u=[g,0,0,0],o._drawString(this.overlayText,this.font,u,null,a,null);return i},i}(Yt),ve=function(e){function i(){var i=e.call(this)||this;return i._type=t.PdfAnnotationType.richMediaAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),void 0!==this.flattenPopUps&&this.flattenPopUps&&this._flattenPopUp(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new it(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),we=function(e){function i(){var i=e.call(this)||this;return i._isWidget=!0,i._type=t.PdfAnnotationType.widgetAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._dictionary=t,n._crossReference=e,n},Object.defineProperty(i.prototype,"color",{get:function(){return void 0===this._color&&this._defaultAppearance&&(this._color=this._da.color),this._color},set:function(t){void 0!==this.color&&this._color===t||(this._color=t);var e=!1;this._defaultAppearance||(this._da=new Xt(""),e=!0),(e||this._da.color!==t)&&(this._da.color=t,this._dictionary.update("DA",this._da.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"backColor",{get:function(){if(void 0===this._backColor){var t=this._mkDictionary;if(t&&t.has("BG")){var e=t.getArray("BG");e&&(this._backColor=_i(e))}}return this._backColor},set:function(t){void 0!==this.backColor&&this.backColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new _(this._crossReference)),this._mkDictionary.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._backColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){if(void 0===this._borderColor){var t=this._mkDictionary;if(t&&t.has("BC")){var e=t.getArray("BC");e&&(this._borderColor=_i(e))}}return this._borderColor},set:function(t){void 0!==this.borderColor&&this.borderColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new _(this._crossReference)),this._mkDictionary.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._borderColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationAngle",{get:function(){return void 0===this._rotationAngle&&(this._mkDictionary&&this._mkDictionary.has("R")?this._rotationAngle=this._mkDictionary.get("R"):this._dictionary.has("R")&&(this._rotationAngle=this._dictionary.get("R"))),this._rotationAngle},set:function(t){void 0!==this.rotationAngle&&this._rotationAngle===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new _(this._crossReference)),this._mkDictionary.update("R",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){if(void 0===this._highlightMode&&this._dictionary.has("H")){var t=this._dictionary.get("H");this._highlightMode=fi(t.name)}return this._highlightMode},set:function(t){this._highlightMode!==t&&this._dictionary.update("H",gi(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bounds",{get:function(){return this._isLoaded&&void 0===this._bounds&&(this._bounds=ai(this._dictionary,this._page)),this._bounds},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");this._bounds=t,this._dictionary.update("Rect",hi([t.x,t.y,t.width,t.height],this._page))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return void 0===this._textAlignment&&this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){void 0!==this._textAlignment&&this._textAlignment===t||this._dictionary.update("Q",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_defaultAppearance",{get:function(){if(void 0===this._da&&this._dictionary.has("DA")){var t=this._dictionary.get("DA");t&&""!==t&&(this._da=new Xt(t))}return this._da},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),i.prototype._create=function(e,i,n){return this._page=e,this._crossReference=e._crossReference,this._ref=this._crossReference._getNextReference(),this._dictionary=new _(this._crossReference),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary._currentObj=this,this._dictionary.objId=this._ref.toString(),this._dictionary.update("Type",a.get("Annot")),this._dictionary.update("Subtype",a.get("Widget")),this.flags|=t.PdfAnnotationFlag.print,this._dictionary.update("P",e._ref),e._addWidget(this._ref),this.border=new Re,this.bounds=i,n&&(this._field=n,this._dictionary.update("Parent",this._field._ref)),this._dictionary},i.prototype._doPostProcess=function(e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),e||i){var n=void 0;if(i||e&&this._dictionary.has("AP"),!n&&this._dictionary.has("AP")){var r=this._dictionary.get("AP");if(r&&r.has("N"))n=r.get("N"),(p=r.getRaw("N"))&&n&&(n.reference=p)}if(n){var a=void 0;if(e){var s=new it(n,this._crossReference),o=this._getPage();if(o){var h=o._graphics;h._save(),o.rotation===t.PdfRotationAngle.angle90?(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(90)):o.rotation===t.PdfRotationAngle.angle180?(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(-180)):o.rotation===t.PdfRotationAngle.angle270&&(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(270)),a={x:this.bounds.x,y:this.bounds.y,width:s._size[0],height:s._size[1]},h._drawTemplate(s,a),h._restore()}}else{var c=void 0;if(this._dictionary.has("AP"))c=this._dictionary.get("AP");else{var d=this._crossReference._getNextReference();c=new _(this._crossReference),this._crossReference._cacheMap.set(d,c),this._dictionary.update("AP",d)}var p=this._crossReference._getNextReference();this._crossReference._cacheMap.set(p,n),c.update("N",p)}}this._dictionary._updated=!1}},i.prototype._getPage=function(){if(!this._page){var t;this._crossReference&&(t=this._crossReference._document);var e=void 0;if(this._dictionary.has("P")){var i=this._dictionary.getRaw("P");if(i&&t)for(var n=0;n<t.pageCount;n++){var r=t.getPage(n);if(r&&r._ref===i){e=r;break}}}!e&&t&&this._ref&&(e=Ai(t,this._ref)),this._page=e}return this._page},i.prototype._beginSave=function(){if(!this._isLoaded){var t=this._bounds;this._dictionary.update("Rect",hi([t.x,t.y,t.width,t.height],this._page)),this._da&&!this._isAutoResize&&this._dictionary.update("DA",this._da.toString())}},i}(Yt),Se=function(e){function i(){return e.call(this)||this}return Jt(i,e),i._load=function(t,e,n){var r=new i;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=n,r},Object.defineProperty(i.prototype,"checked",{get:function(){var t=!1;if(this._dictionary.has("AS")){var e=this._dictionary.get("AS");if(e)t="Off"!==e.name;else{var i=this._field._dictionary.get("V");i&&(t=i.name===xi(this._dictionary))}}return t},set:function(t){this.checked!==t&&this._dictionary.update("AS",a.get(t?"Yes":"Off"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){if(this._isLoaded){var e=this._mkDictionary;e&&e.has("CA")?this._style=Fi(e.get("CA")):this._style=t.PdfCheckBoxStyle.check}return this._style},set:function(t){if(this.style!==t){this._style=t;var e=this._mkDictionary;e||(e=new _(this._crossReference),this._dictionary.update("MK",e)),e.update("CA",Ii(t))}},enumerable:!0,configurable:!0}),i.prototype._doPostProcess=function(){var e=ki(this.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked,this);if(e){var i=this._getPage();if(i){var n=i._graphics;n._save(),i.rotation===t.PdfRotationAngle.angle90?(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(90)):i.rotation===t.PdfRotationAngle.angle180?(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(-180)):i.rotation===t.PdfRotationAngle.angle270&&(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(270)),n._sw._setTextRenderingMode(t._TextRenderingMode.fill),n._drawTemplate(e,this.bounds),n._restore()}}this._dictionary._updated=!1},i.prototype._postProcess=function(t){var e=this._field;t||(t=e&&e.checked?"Yes":"Off"),this._dictionary.update("AS",a.get(t))},i.prototype._setField=function(e){this._field=e,this._field._stringFormat=new nt(this.textAlignment,t._PdfVerticalAlignment.middle),this._field._addToKid(this)},i}(we),Pe=function(e){function i(t,i,n){var r=e.call(this)||this;return n&&t&&i&&(n instanceof jt?r._initializeItem(t,i,n.page,n):r._initializeItem(t,i,n)),r}return Jt(i,e),i._load=function(t,e,n){var r=new i;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=n,r},Object.defineProperty(i.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._isLoaded&&!this._optionValue?xi(this._dictionary):this._optionValue},set:function(t){this._optionValue=t},enumerable:!0,configurable:!0}),i.prototype._initializeItem=function(e,i,n,r){this._optionValue=e,this._page=n,this._create(this._page,i,this._field),this.textAlignment=t.PdfTextAlignment.left,this._dictionary.update("MK",new _(this._crossReference)),this._mkDictionary.update("BC",[0,0,0]),this._mkDictionary.update("BG",[1,1,1]),this.style=t.PdfCheckBoxStyle.circle,this._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),r&&(this._setField(r),this._dictionary.update("Parent",r._ref))},i.prototype._postProcess=function(t){var e=this._field;!t&&e&&-1!==e.selectedIndex&&(t=e.itemAt(e.selectedIndex).value),this.value===t?this._dictionary.update("AS",a.get(this.value)):this._dictionary.update("AS",a.get("Off"))},i}(Se),Ae=function(t){function e(e,i,n){var r=t.call(this)||this;return e&&i&&r._initializeItem(e,i,n),r}return Jt(e,t),e._load=function(t,i,n){var r=new e;return r._isLoaded=!0,r._dictionary=t,r._crossReference=i,r._field=n,r},Object.defineProperty(e.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),e.prototype._initializeItem=function(t,e,i){this._text=t,this._value=e,i&&i instanceof qt&&i._addToOptions(this,i)},e}(Se),xe=function(){function e(e,i,n){this._cap=void 0!==e&&e,this._type=void 0!==i?i:t.PdfLineCaptionType.inline,this._offset=void 0!==n?n:[0,0]}return Object.defineProperty(e.prototype,"cap",{get:function(){return this._cap},set:function(t){t!==this._cap&&(this._cap=t,this._dictionary&&this._dictionary.update("Cap",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){e!==this._type&&(this._type=e,this._dictionary&&this._dictionary.update("CP",a.get(e===t.PdfLineCaptionType.top?"Top":"Inline")))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){Ye(t,this._offset)&&(this._offset=t,this._dictionary&&this._dictionary.update("CO",t))},enumerable:!0,configurable:!0}),e}(),ke=function(){function e(e,i){this._begin=void 0!==e?e:t.PdfLineEndingStyle.none,this._end=void 0!==i?i:t.PdfLineEndingStyle.none}return Object.defineProperty(e.prototype,"begin",{get:function(){return this._begin},set:function(t){t!==this._begin&&(this._begin=t,this._dictionary&&this._dictionary.update("LE",[a.get(li(t)),a.get(li(this._end))]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(t){t!==this._end&&(this._end=t,this._dictionary&&this._dictionary.update("LE",[a.get(li(this._begin)),a.get(li(t))]))},enumerable:!0,configurable:!0}),e}(),Te=function(){function e(e,i,n){this._width=void 0!==e?e:1,this._style=void 0!==i?i:t.PdfBorderStyle.solid,void 0!==n&&Array.isArray(n)&&(this._dash=n)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){if(t!==this._width&&(this._width=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new _(this._crossReference);e.update("Type",a.get("Border")),e.update("W",this._width),e.update("S",di(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){if(t!==this._style&&(this._style=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new _(this._crossReference);e.update("Type",a.get("Border")),e.update("W",this._width),e.update("S",di(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){if((void 0===this._dash||Ye(t,this._dash))&&(this._dash=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new _(this._crossReference);e.update("Type",a.get("Border")),e.update("W",this._width),e.update("S",di(this._style)),e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),e}(),Re=function(t){function e(e,i,n,r,a){var s=t.call(this,e,r,a)||this;return s._hRadius=void 0!==i?i:0,s._vRadius=void 0!==n?n:0,s}return Jt(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){if(t!==this._width&&(this._width=t,this._dictionary)){this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]);var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new _(this._crossReference);e.update("Type",a.get("Border")),e.update("W",this._width),e.update("S",di(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hRadius",{get:function(){return this._hRadius},set:function(t){t!==this._hRadius&&(this._hRadius=t,this._dictionary&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vRadius",{get:function(){return this._vRadius},set:function(t){t!==this._vRadius&&(this._vRadius=t,this._dictionary&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]))},enumerable:!0,configurable:!0}),e}(Te),Ie=function(){function e(t){if(this._intensity=0,null!=t){if(t.has("BE")){var e=this._dictionary.get("BE");e&&(e.has("I")&&(this._intensity=e.get("I")),e.has("S")&&(this._style=this._getBorderEffect(e.get("S"))))}}else this._dictionary=new _,this._dictionary.set("I",this._intensity),this._dictionary.set("S",this._styleToEffect(this._style))}return Object.defineProperty(e.prototype,"intensity",{get:function(){return this._intensity},set:function(t){t!==this._intensity&&(this._intensity=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){if(t!==this._style&&(this._style=t,this._dictionary)){var e=this._dictionary.has("BE")?this._dictionary.get("BE"):new _(this._crossReference);e.update("I",this._intensity),e.update("S",this._styleToEffect(this._style)),this._dictionary.update("BE",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),e.prototype._getBorderEffect=function(e){return"/C"===e?t.PdfBorderEffectStyle.cloudy:t.PdfBorderEffectStyle.solid},e.prototype._styleToEffect=function(e){return e===t.PdfBorderEffectStyle.cloudy?"C":"S"},e}(),Fe=function(){this.borderWidth=1},Ne=function(){this.startAngle=0,this.endAngle=0},Ce=function(){function t(t,e,i){this._annotations=t,this._page=i,this._crossReference=e,this._parsedAnnotations=new Map}return Object.defineProperty(t.prototype,"count",{get:function(){return this._annotations.length},enumerable:!0,configurable:!0}),t.prototype.at=function(t){if(t<0||t>=this._annotations.length)throw Error("Index out of range.");if(!this._parsedAnnotations.has(t)){var e=this._annotations[Number.parseInt(t.toString(),10)];if(void 0!==e&&e instanceof o&&(e=this._crossReference._fetch(e)),void 0!==e&&e instanceof _){var i=this._parseAnnotation(e);i&&(i._ref=this._annotations[Number.parseInt(t.toString(),10)],this._parsedAnnotations.set(t,i))}}return this._parsedAnnotations.get(t)},t.prototype.add=function(t){if(null==t)throw Error("annotation cannot be null or undefined");if(t._isLoaded)throw Error("cannot add an existing annotation");t._initialize(this._page);var e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t._dictionary),t._ref=e;var i=this._annotations.length;return this._annotations.push(e),this._page._pageDictionary.set("Annots",this._annotations),this._page._pageDictionary._updated=!0,this._parsedAnnotations.set(i,t),i},t.prototype._parseAnnotation=function(t){var e;if(t.has("Subtype")){var i=t.get("Subtype"),n=t.get("Rect");if(i){var r=void 0;switch(i.name){case"Line":e=Zt._load(this._page,t);break;case"Circle":if(t.has("Measure"))e=$t._load(this._page,t);else e=n[2]-n[0]===n[3]-n[1]?$t._load(this._page,t):te._load(this._page,t);break;case"Square":e=n[2]===n[3]?ee._load(this._page,t):ie._load(this._page,t);break;case"Polygon":e=ne._load(this._page,t);break;case"PolyLine":e=t.has("Measure")?ae._load(this._page,t):re._load(this._page,t);break;case"Ink":e=se._load(this._page,t);break;case"Popup":case"Text":e=oe._load(this._page,t);break;case"Link":if(t.has("A")&&(r=t.get("A")),r&&r.has("S")){var a=r.get("S").name;if(a){var s=this._hasValidBorder(t.getArray("Border"));"URI"===a?e=s?de._load(this._page,t):this._getLinkAnnotation(t):"Launch"===a?e=he._load(this._page,t):"GoToR"===a?e=this._getLinkAnnotation(t):"GoTo"===a&&(e=_e._load(this._page,t))}}else"Link"===i.name&&(e=_e._load(this._page,t));break;case"FileAttachment":e=pe._load(this._page,t);break;case"_3D":e=le._load(this._page,t);break;case"FreeText":e=me._load(this._page,t);break;case"Redact":e=be._load(this._page,t);break;case"RichMedia":e=ve._load(this._page,t);break;case"Watermark":e=fe._load(this._page,t);break;case"Stamp":e=ge._load(this._page,t);break;case"Sound":e=ye._load(this._page,t);break;case"Highlight":case"Squiggly":case"StrikeOut":case"Underline":e=ue._load(this._page,t)}}}return e},t.prototype._getLinkAnnotation=function(t){var e;if(t.has("A")){var i=t.get("A");if(i&&i.has("S")){var n=i.get("S");n&&"GoToR"===n.name&&i.has("F")?e=he._load(this._page,t):n&&"URI"===n.name&&(e=ce._load(this._page,t))}}else e=ce._load(this._page,t);return e},t.prototype._hasValidBorder=function(t){if(null==t)return!1;for(var e=0;e<t.length;e++){var i=0,n=t[Number.parseInt(e.toString(),10)];if(null!=n&&(i=n),i>0)return!1}return!0},t.prototype._doPostProcess=function(t){for(var e=this.count-1;e>=0;e--){var i=this.at(e);i&&i._doPostProcess(t)}},t}(),Be=function(){function e(t,e,i,n){this._isAnnotationParsed=!1,this._pageIndex=e,this._pageDictionary=i,this._crossReference=t,this._ref=n}return Object.defineProperty(e.prototype,"annotations",{get:function(){if(void 0===this._annotations){if(this._pageDictionary.has("Annots")){var t=this._getProperty("Annots");if(t&&Array.isArray(t)){var e=this._crossReference._document.form._parseWidgetReferences();if(e&&e.length>0){var i=[];t.forEach((function(t){-1===e.indexOf(t)&&i.push(t)})),this._annotations=new Ce(i,this._crossReference,this)}else this._annotations=new Ce(t,this._crossReference,this)}}void 0===this._annotations&&(this._annotations=new Ce([],this._crossReference,this))}return this._annotations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(void 0===this._size){var t=this._mediaBox,e=0,i=0;t&&(e=t[2]-t[0],i=0!==t[3]?t[3]-t[1]:t[1]),i<0&&(i=-i),e<0&&(e=-e),this._size=[e,i]}return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){var t=0;return void 0===this._rotation&&(t=ni(this._pageDictionary,"Rotate",!1,!0,"Parent")),t<0&&(t+=360),t/90},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_cropBox",{get:function(){return void 0===this._cBox&&(this._cBox=ni(this._pageDictionary,"CropBox",!1,!0,"Parent","P")),this._cBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_mediaBox",{get:function(){return void 0===this._mBox&&(this._mBox=ni(this._pageDictionary,"MediaBox",!1,!0,"Parent","P")),this._mBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_origin",{get:function(){return(void 0===this._o||0===this._o[0]&&0===this._o[1])&&(this._o=[this._mediaBox[0],this._mBox[1]]),this._o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_graphics",{get:function(){return(void 0===this._g||this._needInitializeGraphics)&&this._parseGraphics(),this._g},enumerable:!0,configurable:!0}),e.prototype._addWidget=function(t){var e;this._pageDictionary.has("Annots")&&(e=this._getProperty("Annots")),e&&Array.isArray(e)?e.push(t):this._pageDictionary.update("Annots",[t]),this._pageDictionary._updated=!0},e.prototype._getProperty=function(t,e){void 0===e&&(e=!1);var i=ni(this._pageDictionary,t,e,!1);return Array.isArray(i)?1!==i.length&&i[0]instanceof _?_.merge(this._crossReference,i):i[0]:i},e.prototype._parseGraphics=function(){this._loadContents();var t=new X([32,113,32,10]),e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._contents.splice(0,0,e);var i=new X([32,81,32,10]),n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,i),this._contents.push(n);var r=new X([]),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r),this._contents.push(a),this._pageDictionary.set("Contents",this._contents),this._pageDictionary._updated=!0,this._initializeGraphics(r)},e.prototype._loadContents=function(){var t,e=this._pageDictionary.getRaw("Contents");e&&e instanceof o&&(t=e,e=this._crossReference._fetch(t)),e&&e instanceof q?this._contents=[t]:e&&Array.isArray(e)?this._contents=e:this._contents=[]},e.prototype._initializeGraphics=function(e){var i,n=!1,r=0,a=0,s=0,o=0,h=this.size,c=this._mediaBox;if(c&&c.length>=4&&(r=c[0],a=c[1],s=c[2],o=c[3]),this._pageDictionary.has("CropBox"))if((i=this._cropBox)&&i.length>=4){var _=i[0],d=i[1],p=i[2],l=i[3];(_<0||d<0||p<0||l<0)&&Math.floor(Math.abs(d))===Math.floor(Math.abs(h[1]))&&Math.floor(Math.abs(_))===Math.floor(Math.abs(h[0]))?this._g=new Oe([Math.max(_,p),Math.max(d,l)],e,this._crossReference,this):(this._g=new Oe(h,e,this._crossReference,this),this._g._cropBox=i)}else this._g=new Oe(h,e,this._crossReference,this);else if((r<0||a<0||s<0||o<0)&&Math.floor(Math.abs(a))===Math.floor(Math.abs(h[1]))&&Math.floor(Math.abs(s))===Math.floor(Math.abs(h[0]))){var u=Math.max(r,s),f=Math.max(a,o);(u<=0||f<=0)&&(n=!0,r<0&&(r=-r),a<0&&(a=-a),s<0&&(s=-s),o<0&&(o=-o),u=Math.max(r,s),f=Math.max(a,o)),this._g=new Oe([u,f],e,this._crossReference,this)}else this._g=new Oe(h,e,this._crossReference,this);this._pageDictionary.has("MediaBox")&&(this._g._mediaBoxUpperRightBound=n?-a:o),e.dictionary._currentObj=this,this._graphicsState=this._g._save();var g=this._origin;g[0]>=0&&g[1]>=0||Math.sign(g[0])!==Math.sign(g[1])?this._g._initializeCoordinates():this._g._initializeCoordinates(this);var y=this.rotation;if(y!==t.PdfRotationAngle.angle0||this._pageDictionary.has("Rotate")){var m=void 0;this._pageDictionary.has("Rotate")?this._pageDictionary.get("Rotate"):m=90*y;var b=this._g._clipBounds;90===m?(this._g._translateTransform(0,h[1]),this._g._rotateTransform(-90),this._g._clipBounds=[b[0],b[1],h[0],h[1]]):180===m?(this._g._translateTransform(h[0],h[1]),this._g._rotateTransform(-180)):270===m&&(this._g._translateTransform(h[0],0),this._g._rotateTransform(-270),this._g._clipBounds=[b[0],b[1],h[1],h[0]])}this._needInitializeGraphics=!1},e.prototype._fetchResources=function(){if(void 0===this._resourceObject)if(this._pageDictionary&&this._pageDictionary.has("Resources")){var t=this._pageDictionary.getRaw("Resources");t instanceof o?(this._hasResourceReference=!0,this._resourceObject=this._crossReference._fetch(t)):t instanceof _&&(this._resourceObject=t)}else this._resourceObject=new _(this._crossReference),this._pageDictionary.update("Resources",this._resourceObject);return this._resourceObject},e.prototype._getCropOrMediaBox=function(){var t;return this._pageDictionary.has("CropBox")?t=this._pageDictionary.getArray("CropBox"):this._pageDictionary.has("MediaBox")&&(t=this._pageDictionary.getArray("MediaBox")),t},e.prototype._beginSave=function(){void 0!==this._graphicsState&&(this._graphics._restore(this._graphicsState),this._graphicsState=null,this._needInitializeGraphics=!0)},e.prototype._destroy=function(){this._pageDictionary=void 0,this._size=void 0,this._mBox=void 0,this._cBox=void 0,this._o=void 0,this._g=void 0,this._graphicsState=void 0,this._contents=void 0},e}(),Me=function(){function e(e,i){this._location=[0,0],this._destinationMode=t.PdfDestinationMode.location,this._zoom=0,this._isValid=!0,this._destinationBounds=[0,0,0,0],this._array=Array(),null!=e&&(e.rotation===t.PdfRotationAngle.angle180?this._location=[e._graphics._size[0],this._location[1]]:e.rotation===t.PdfRotationAngle.angle90?this._location=[0,0]:e.rotation===t.PdfRotationAngle.angle270?this._location=[e._graphics._size[0],0]:this._location=[0,this._location[1]],this._page=e),void 0!==i&&2===i.length&&(this._location=i),void 0!==i&&4===i.length&&(this._location=[i[0],i[1]],this._destinationBounds=i)}return Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t!==this._zoom&&(this._zoom=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(t){t!==this._page&&(this._page=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._destinationMode},set:function(t){t!==this._destinationMode&&(this._destinationMode=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this._location},set:function(t){t!==this._location&&(this._location=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destinationBounds",{get:function(){return this._destinationBounds},set:function(t){t!==this._destinationBounds&&(this._destinationBounds=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),e.prototype._setValidation=function(t){this._isValid=t},e.prototype._initializePrimitive=function(){this._array=[];var e=this._page,i=this._page._pageDictionary;switch(null!=i&&this._array.push(this._page._ref),this._destinationMode){case t.PdfDestinationMode.location:this._array.push(a.get("XYZ")),null!=e?(this._array.push(this._location[0]),this._array.push(this._page._graphics._size[1]-this._location[1])):(this._array.push(0),this._array.push(0)),this._array.push(this._zoom);break;case t.PdfDestinationMode.fitToPage:this._array.push(a.get("Fit"));break;case t.PdfDestinationMode.fitR:this._array.push(a.get("FitR")),this._array.push(this._destinationBounds[0]),this._array.push(this._destinationBounds[1]),this._array.push(this._destinationBounds[2]),this._array.push(this._destinationBounds[3]);break;case t.PdfDestinationMode.fitH:this._array.push(a.get("FitH")),this._array.push(null!=e?e._size[1]-this._location[1]:0)}},e}(),Le=function(){function t(t){this._newLine="\r\n",this._whiteSpace=" ",this._stream=t}return t.prototype._writeOperator=function(t){this._stream.write(t),this._stream.write(this._newLine)},t.prototype._saveGraphicsState=function(){this._writeOperator("q")},t.prototype._restoreGraphicsState=function(){this._writeOperator("Q")},t.prototype._writeComment=function(t){t&&t.length>0&&this._writeOperator("% "+t)},t.prototype._setGraphicsState=function(t){this._stream.write("/"+Si(t.name)+" "),this._writeOperator("gs")},t.prototype._modifyCtm=function(t){this._stream.write(t._toString()+" "),this._writeOperator("cm")},t.prototype._modifyTM=function(t){this._stream.write(t._toString()+" "),this._writeOperator("Tm")},t.prototype._setColorSpace=function(t,e){this._stream.write("/"+t+" "),this._writeOperator(e?"CS":"cs")},t.prototype._setColor=function(t,e){this._stream.write((t[0]/255).toFixed(3)+" "+(t[1]/255).toFixed(3)+" "+(t[2]/255).toFixed(3)+" "),this._writeOperator(e?"RG":"rg")},t.prototype._appendRectangle=function(t,e,i,n){this._writePoint(t,e),this._writePoint(i,n),this._writeOperator("re")},t.prototype._writePoint=function(t,e){this._stream.write(t.toFixed(3)+" "+(-e).toFixed(3)+" ")},t.prototype._clipPath=function(t){this._stream.write((t?"W*":"W")+" n"+this._newLine)},t.prototype._fillPath=function(t){this._writeOperator(t?"f*":"f")},t.prototype._closeFillPath=function(t){this._writeOperator("h"),this._fillPath(t)},t.prototype._strokePath=function(){this._writeOperator("S")},t.prototype._closeStrokePath=function(){this._writeOperator("s")},t.prototype._fillStrokePath=function(t){this._writeOperator(t?"B*":"B")},t.prototype._closeFillStrokePath=function(t){this._writeOperator(t?"b*":"b")},t.prototype._endPath=function(){this._writeOperator("n")},t.prototype._setFont=function(t,e){this._stream.write("/"+t+" "+e.toFixed(3)+" "),this._writeOperator("Tf")},t.prototype._setTextScaling=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tz")},t.prototype._closePath=function(){this._writeOperator("h")},t.prototype._startNextLine=function(t,e){void 0===t?this._writeOperator("T*"):(this._writePoint(t,e),this._writeOperator("Td"))},t.prototype._setLeading=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("TL")},t.prototype._beginText=function(){this._writeOperator("BT")},t.prototype._endText=function(){this._writeOperator("ET")},t.prototype._beginPath=function(t,e){this._writePoint(t,e),this._writeOperator("m")},t.prototype._appendLineSegment=function(t,e){this._writePoint(t,e),this._writeOperator("l")},t.prototype._appendBezierSegment=function(t,e,i,n,r,a){this._writePoint(t,e),this._writePoint(i,n),this._writePoint(r,a),this._writeOperator("c")},t.prototype._setTextRenderingMode=function(t){this._stream.write(t.toString()+" "),this._writeOperator("Tr")},t.prototype._setCharacterSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tc")},t.prototype._setWordSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tw")},t.prototype._showNextLineText=function(t){this._stream.write(t),this._writeOperator("'")},t.prototype._setLineDashPattern=function(t,e){var i="[";if(t.length>1)for(var n=0;n<t.length;n++)n===t.length-1?i+=t[n].toString():i+=t[n].toString()+" ";i+="] ",i+=e.toString(),i+=" d",this._writeOperator(i)},t.prototype._setMiterLimit=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("M")},t.prototype._setLineWidth=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("w")},t.prototype._setLineCap=function(t){this._stream.write(t+" "),this._writeOperator("J")},t.prototype._setLineJoin=function(t){this._stream.write(t+" "),this._writeOperator("j")},t.prototype._executeObject=function(t){this._stream.write("/"+t.name+" "),this._writeOperator("Do")},t.prototype._beginMarkupSequence=function(t){this._stream.write("/"+t+" "),this._writeOperator("BMC")},t.prototype._endMarkupSequence=function(){this._writeOperator("EMC")},t.prototype._clear=function(){this._stream._bytes=[]},t}(),Oe=function(){function e(t,e,i,n){if(this._hasResourceReference=!1,n instanceof Be?(this._source=n._pageDictionary,this._page=n):n instanceof it&&(this._source=n._content.dictionary,this._template=n),this._source&&this._source.has("Resources")){var r=this._source.getRaw("Resources");r instanceof o?(this._hasResourceReference=!0,this._resourceObject=i._fetch(r)):r instanceof _&&(this._resourceObject=r)}else this._resourceObject=new _,this._source.update("Resources",this._resourceObject);this._crossReference=i,this._sw=new Le(e),this._size=t,vi("PDF",this._resourceObject),this._initialize()}return Object.defineProperty(e.prototype,"_matrix",{get:function(){return void 0===this._m&&(this._m=new Ee),this._m},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_resources",{get:function(){var t=this;if(void 0===this._resourceMap){if(this._resourceMap=new Map,this._resourceObject.has("Font")){var e=this._resourceObject.get("Font");e&&e.size>0&&e.forEach((function(e,i){t._resourceMap.set(i,a.get(e))}))}if(this._resourceObject.has("XObject")){var i=this._resourceObject.get("XObject");i&&i.size>0&&i.forEach((function(e,i){t._resourceMap.set(i,a.get(e))}))}if(this._resourceObject.has("ExtGState")){var n=this._resourceObject.get("ExtGState");n&&n.size>0&&(this._transparencies||(this._transparencies=new Map),n.forEach((function(e,i){t._setTransparencyData(i,a.get(e))})))}}return this._resourceMap},enumerable:!0,configurable:!0}),e.prototype._save=function(){var t=new De(this,this._matrix);return t._textRenderingMode=this._textRenderingMode,t._charSpacing=this._characterSpacing,t._textScaling=this._textScaling,t._wordSpacing=this._wordSpacing,t._currentBrush=this._currentBrush,t._currentPen=this._currentPen,t._currentFont=this._currentFont,this._graphicsState.push(t),this._sw._saveGraphicsState(),t},e.prototype._restore=function(t){if(this._graphicsState.length>0)if(void 0===t)this._doRestore();else if(this._graphicsState.length>0&&-1!==this._graphicsState.indexOf(t))for(;this._graphicsState.length>0&&this._doRestore()!==t;);},e.prototype._doRestore=function(){var t=this._graphicsState.pop();return this._m=t._transformationMatrix,this._currentBrush=t._currentBrush,this._currentPen=t._currentPen,this._currentFont=t._currentFont,this._characterSpacing=t._charSpacing,this._wordSpacing=t._wordSpacing,this._textScaling=t._textScaling,this._textRenderingMode=t._textRenderingMode,this._sw._restoreGraphicsState(),t},e.prototype._drawRectangle=function(t,e,i,n,r,a){var s,o;r instanceof We?(s=r,a&&(o=a)):o=r,this._stateControl(s,o),this._sw._appendRectangle(t,e,i,n),this._drawGraphicsPath(s,o)},e.prototype._drawPolygon=function(e,i,n){if(e.length>0){var r=void 0,a=void 0;i instanceof We?(r=i,n&&(a=n)):a=i,this._stateControl(r,a),this._sw._beginPath(e[0][0],e[0][1]);for(var s=1;s<e.length;s++)this._sw._appendLineSegment(e[Number.parseInt(s.toString(),10)][0],e[Number.parseInt(s.toString(),10)][1]);this._drawGraphicsPath(r,a,t._PdfFillMode.winding,!0)}},e.prototype._drawEllipse=function(e,i,n,r,a,s){var o,h;a instanceof We?(o=a,s&&(h=s)):h=a,this._stateControl(o,h),this._constructArcPath(e,i,e+n,i+r,0,360),this._drawGraphicsPath(o,h,t._PdfFillMode.winding,!0)},e.prototype._drawArc=function(e,i,n,r,a,s,o){0!==s&&(this._stateControl(o),this._constructArcPath(e,i,e+n,i+r,a,s),this._drawGraphicsPath(o,null,t._PdfFillMode.winding,!1))},e.prototype._drawTemplate=function(t,e){var i,n,r=this,s=t._size[0]>0?e.width/t._size[0]:1,h=t._size[1]>0?e.height/t._size[1]:1,c=!(1===s&&1===h);this._page&&(i=this._page._cropBox,n=this._page._mediaBox,this._page._pageDictionary.has("CropBox")&&this._page._pageDictionary.has("MediaBox")&&i[0]>0&&i[1]>0&&n[0]<0&&n[1]<0&&(this._translateTransform(i[0],-i[1]),e.x=-i[0],e.y=i[1]));var d,p=this._save(),l=new Ee;if(this._page){var u=this._page._pageDictionary.has("CropBox")&&this._page._pageDictionary.has("MediaBox")&&i&&n&&i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]||this._page._pageDictionary.has("MediaBox")&&n&&0===n[3];l._translate(e.x,-(e.y+(this._page._origin[0]>=0||u?e.height:0)))}else l._translate(e.x,-(e.y+e.height));if(c)if(t._isAnnotationTemplate&&t._needScale){var f=!1;if(t._content&&t._content.dictionary){var g=t._content.dictionary;if(g.has("Matrix")&&g.has("BBox")){var y=g.getArray("Matrix"),m=g.getArray("BBox");if(y&&m&&y.length>5&&m.length>3){var b=Number.parseFloat(Je(-y[1])),v=Number.parseFloat(Je(y[2])),w=Number.parseFloat(Je(s)),S=Number.parseFloat(Je(h));w===b&&S===v&&m[2]===t._size[0]&&m[3]===t._size[1]&&((l=new Ee)._translate(e.x-y[4],e.y+y[5]),l._scale(1,1),f=!0)}}}f||l._scale(s,h)}else l._scale(s,h);this._sw._modifyCtm(l);var P,A,x=!1,k=!0;if(this._resourceObject.has("XObject")){var T=this._resourceObject.getRaw("XObject");T instanceof o?(x=!0,d=this._crossReference._fetch(T)):T instanceof _&&(d=T),d&&(k=!1,this._resources.forEach((function(e,i){var n=r._crossReference._fetch(i);n&&n===t._content&&(P=e,A=i)})))}k&&(d=new _(this._crossReference),this._resourceObject.update("XObject",d)),void 0===P&&(P=a.get(wi()),A=t._content.reference?t._content.reference:this._crossReference._getNextReference(),this._crossReference._cacheMap.has(A)||this._crossReference._cacheMap.set(A,t._content),d.update(P.name,A),this._resources.set(A,P)),x&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._executeObject(P),this._restore(p),vi("ImageB",this._resourceObject),vi("ImageC",this._resourceObject),vi("ImageI",this._resourceObject),vi("Text",this._resourceObject)},e.prototype._drawPath=function(t,e,i){(e||i)&&(this._stateControl(e,i,null),this._buildUpPath(t._points,t._pathTypes),this._drawGraphicsPath(e,i,t._fillMode,!1))},e.prototype._drawRoundedRectangle=function(t,e,i,n,r,a,s){if(null===a)throw new Error("pen");if(null===s)throw new Error("brush");var o=[t,e,i,n],h=2*r,c=[h,h],_=[o[0],o[1],c[0],c[1]],d=new Ft;0===r?(d._addRectangle(o[0],o[1],o[2],o[3]),this._drawPath(d,a,s)):(d._addArc(_[0],_[1],_[2],_[3],180,90),_[0]=o[0]+o[2]-h,d._addArc(_[0],_[1],_[2],_[3],270,90),_[1]=o[1]+o[3]-h,d._addArc(_[0],_[1],_[2],_[3],0,90),_[0]=o[0],d._addArc(_[0],_[1],_[2],_[3],90,90),d._closeFigure(),this._drawPath(d,a,s))},e.prototype._constructArcPath=function(t,e,i,n,r,a){var s=Pi(t,e,i,n,r,a);if(8!==s.length){var o=[s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]];this._sw._beginPath(o[0],o[1]);for(var h=0;h<s.length;h+=8)o=[s[Number.parseInt(h.toString(),10)],s[h+1],s[h+2],s[h+3],s[h+4],s[h+5],s[h+6],s[h+7]],this._sw._appendBezierSegment(o[2],o[3],o[4],o[5],o[6],o[7])}},e.prototype._writePen=function(t){for(var e=t._width,i=t._dashPattern,n=0;n<i.length;++n)i[n]*=t._width;this._sw._setLineDashPattern(i,t._dashOffset*e),this._sw._setLineWidth(t._width),this._sw._setLineJoin(t._lineJoin),this._sw._setLineCap(t._lineCap),t._miterLimit>0&&this._sw._setMiterLimit(t._miterLimit),this._sw._setColor(t._color,!0)},e.prototype._drawString=function(t,e,i,n,r,a){var s=(new ut)._layout(t,e,a,[i[2],i[3]]);if(!s._empty){var o=this._checkCorrectLayoutRectangle(s._actualSize,i[0],i[1],a);i[2]<=0&&(i[0]=o[0],i[2]=o[2]),i[3]<=0&&(i[1]=o[1],i[3]=o[3]),this._drawStringLayoutResult(s,e,n,r,i,a)}vi("Text",this._resourceObject)},e.prototype._buildUpPath=function(e,i){for(var n=0;n<e.length;n++){var r=e[Number.parseInt(n.toString(),10)],a=i[Number.parseInt(n.toString(),10)];switch(15&a){case t._PathPointType.start:this._sw._beginPath(r[0],r[1]);break;case t._PathPointType.bezier:var s=this._getBezierPoint(e,i,n);n=s.index;var o=s.point;n=(s=this._getBezierPoint(e,i,n)).index;var h=s.point;this._sw._appendBezierSegment(r[0],r[1],o[0],o[1],h[0],h[1]);break;case t._PathPointType.line:this._sw._appendLineSegment(r[0],r[1]);break;default:throw new Error("Incorrect path formation.")}((a=i[Number.parseInt(n.toString(),10)])&t._PathPointType.closePath)===t._PathPointType.closePath&&this._sw._closePath()}},e.prototype._getBezierPoint=function(e,i,n){if(i[Number.parseInt(n.toString(),10)]!==t._PathPointType.bezier)throw new Error("Malforming path.");return{index:++n,point:e[Number.parseInt(n.toString(),10)]}},e.prototype._initialize=function(){this._mediaBoxUpperRightBound=0,this._characterSpacing=-1,this._wordSpacing=-1,this._textScaling=-100,this._textRenderingMode=-1,this._graphicsState=[],this._clipBounds=[0,0,this._size[0],this._size[1]],this._colorSpaceInitialized=!1,this._startCutIndex=-1},e.prototype._initializeCurrentColorSpace=function(){this._colorSpaceInitialized||(this._sw._setColorSpace("DeviceRGB",!0),this._sw._setColorSpace("DeviceRGB",!1),this._colorSpaceInitialized=!0)},e.prototype._brushControl=function(t){this._sw._setColor(t._color,!1),this._currentBrush=t},e.prototype._penControl=function(t){this._currentPen=t,this._writePen(t),this._currentPen=t},e.prototype._fontControl=function(t){var e,i=this,n=t._metrics._size;this._currentFont=t;var r,s,h=!1,c=!0;if(this._resourceObject.has("Font")){var d=this._resourceObject.getRaw("Font");d instanceof o?(h=!0,e=this._crossReference._fetch(d)):d instanceof _&&(e=d),e&&(c=!1,this._resources.forEach((function(e,n){var a=i._crossReference._fetch(n);a&&a===t._dictionary&&(r=e,s=n)})))}c&&(e=new _(this._crossReference),this._resourceObject.update("Font",e)),void 0===r&&(r=a.get(wi()),s=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(s,t._dictionary),e.update(r.name,s),this._resources.set(s,r)),h&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._setFont(r.name,n)},e.prototype._stateControl=function(t,e,i){(t||e)&&this._initializeCurrentColorSpace(),t&&this._penControl(t),e&&this._brushControl(e),i&&this._fontControl(i)},e.prototype._drawStringLayoutResult=function(e,i,n,r,a,s){if(!e._empty){var o=s&&void 0!==s.lineLimit&&!s.lineLimit,h=void 0===s||s&&void 0!==s.noClip&&!s.noClip,c=o&&h,_=void 0;if(c){_=this._save();var d=[a[0],a[1],e._actualSize[0],e._actualSize[1]];a[2]>0&&(d[2]=a[2]),s.lineAlignment===t._PdfVerticalAlignment.middle?d[1]+=(a[3]-d[3])/2:s.lineAlignment===t._PdfVerticalAlignment.bottom&&(d[1]+=a[3]-d[3]),this._setClip(d)}this._applyStringSettings(i,n,r,s);var p=null!=s?s.horizontalScalingFactor:100;p!==this._textScaling&&(this._sw._setTextScaling(p),this._textScaling=p);var l=this._getTextVerticalAlignShift(e._actualSize[1],a[3],s),u=null==s||0===s.lineSpacing?i._metrics.getHeight():s.lineSpacing+i._metrics.getHeight(),f=u-i._metrics.getAscent();s&&s.lineAlignment===t._PdfVerticalAlignment.bottom&&a[3]-e._actualSize[1]!=0&&a[3]-e._actualSize[1]<i._metrics._size/2-1&&Number.parseFloat(Je(a[3]))<=Number.parseFloat(Je(i._metrics.getHeight()))&&(f=-u/i._metrics._size);var g=new Ee;g._translate(a[0],-(a[1]+i._metrics.getHeight())-(i._metrics.getDescent()>0?-i._metrics.getDescent():i._metrics.getDescent())-l),this._sw._modifyTM(g),a[3]<i._metrics._size&&e._actualSize[1]-a[3]<i._metrics._size/2-1&&(l=0),0!==l&&null!==s&&s.lineAlignment===t._PdfVerticalAlignment.bottom&&a[3]-e._actualSize[1]!=0&&a[3]-e._actualSize[1]>i._metrics._size/2-1&&(l-=(f-(u-i._metrics._size))/2),this._drawLayoutResult(e,i,s,a),0!==l&&this._sw._startNextLine(0,-(l-e._lineHeight)),vi("Text",this._resourceObject),this._sw._endText(),this._underlineStrikeoutText(r,e,i,a,s),c&&this._restore(_)}},e.prototype._getNextPage=function(){var t,e=this._crossReference._document.pageCount;return this._page._pageIndex<e-2&&(t=this._crossReference._document.getPage(this._page._pageIndex+1)),t},e.prototype._applyStringSettings=function(e,i,n,r){var a=t._TextRenderingMode.fill;null!=i&&null!=n?a=t._TextRenderingMode.fillStroke:i?a=t._TextRenderingMode.stroke:n&&(a=t._TextRenderingMode.fill),r&&r.clipPath&&(a|=t._TextRenderingMode.clipFlag),this._sw._beginText(),this._stateControl(i,n,e),a!==this._textRenderingMode&&(this._sw._setTextRenderingMode(a),this._textRenderingMode=a);var s=null!=r?r.characterSpacing:0;s!==this._characterSpacing&&(this._sw._setCharacterSpacing(s),this._characterSpacing=s);var o=null!=r?r.wordSpacing:0;o!==this._wordSpacing&&(this._sw._setWordSpacing(o),this._wordSpacing=o)},e.prototype._drawLayoutResult=function(t,e,i,n){for(var r=null==i||0===i.lineSpacing?e._metrics.getHeight():i.lineSpacing+e._metrics.getHeight(),a=t._lines,s=0,o=a.length;s<o&&s!==this._startCutIndex;s++){var h=a[Number.parseInt(s.toString(),10)],c=h._width,_=this._getHorizontalAlignShift(c,n[2],i)+this._getLineIndent(h,i,n[2],0===s);if(0!==_&&this._sw._startNextLine(_,0),this._drawAsciiLine(h,n[2],i,e),s+1!==o){var d=this._getTextVerticalAlignShift(t._actualSize[1],n[3],i),p=new Ee,l=-(n[1]+e._metrics.getHeight())-e._metrics.getDescent()-d-r*(s+1);p._translate(n[0],l),this._sw._modifyTM(p)}}},e.prototype._getTextVerticalAlignShift=function(e,i,n){var r=0;if(i>=0&&null!=n&&n.lineAlignment!==t._PdfVerticalAlignment.top)switch(n.lineAlignment){case t._PdfVerticalAlignment.middle:r=(i-e)/2;break;case t._PdfVerticalAlignment.bottom:r=i-e}return r},e.prototype._getHorizontalAlignShift=function(e,i,n){var r=0;if(i>=0&&null!=n&&n.alignment!==t.PdfTextAlignment.left)switch(n.alignment){case t.PdfTextAlignment.center:r=(i-e)/2;break;case t.PdfTextAlignment.right:r=i-e}return r},e.prototype._getLineIndent=function(e,i,n,r){var a=0,s=(e._lineType&t._LineType.firstParagraphLine)>0;return i&&s&&(a=r?i.firstLineIndent:i.paragraphIndent,a=n>0?Math.min(n,a):a),a},e.prototype._drawAsciiLine=function(t,e,i,n){this._justifyLine(t,e,i,n);var r="";if(-1!==t._text.indexOf("(")||-1!==t._text.indexOf(")"))for(var a=0;a<t._text.length;a++)"("===t._text[Number.parseInt(a.toString(),10)]?r+="\\(":")"===t._text[Number.parseInt(a.toString(),10)]?r+="\\)":r+=t._text[Number.parseInt(a.toString(),10)];""===r&&(r=t._text),this._sw._showNextLineText("("+r+")")},e.prototype._justifyLine=function(e,i,n,r){var a=e._text,s=e._width,o=this._shouldJustify(e,i,n,r),h=n&&0!==n.wordSpacing,c=r._getCharsCount(a,[" ","\t"]),_=0;return o?(h&&(s-=c*n.wordSpacing),_=(i-s)/c,this._sw._setWordSpacing(_)):n&&n.alignment===t.PdfTextAlignment.justify&&this._sw._setWordSpacing(0),_},e.prototype._shouldJustify=function(e,i,n,r){var a=e._text,s=e._width,o=n&&n.alignment===t.PdfTextAlignment.justify,h=i>=0&&s<i,c=r._getCharsCount(a,[" ","\t"])>0&&" "!==a[0],_=(e._lineType&t._LineType.layoutBreak)>0;return o&&h&&c&&(_||n.alignment===t.PdfTextAlignment.justify)},e.prototype._underlineStrikeoutText=function(t,e,i,n,r){if(i._underline||i._strikeout){var a=this._createUnderlineStrikeoutPen(t,i);if(null!=a)for(var s=this._getTextVerticalAlignShift(e._actualSize[1],n[3],r),o=n[1]+s+i._metrics.getAscent()+1.5*a._width,h=n[1]+s+i._metrics.getHeight()/2+1.5*a._width,c=e._lines,_=0;_<e._lineCount;_++){var d=c[Number.parseInt(_.toString(),10)],p=d._width,l=this._getHorizontalAlignShift(p,n[2],r),u=this._getLineIndent(d,r,n[2],0===_),f=n[0]+l,g=this._shouldJustify(d,n[2],r,i)?f+n[2]-u:f+p-u;i._underline&&(this._drawLine(a,f,o,g,o),o+=e._lineHeight),i._strikeout&&(this._drawLine(a,f,h,g,h),h+=e._lineHeight)}}},e.prototype._drawLine=function(t,e,i,n,r){this._stateControl(t),this._sw._beginPath(e,i),this._sw._appendLineSegment(n,r),this._sw._strokePath(),vi("PDF",this._resourceObject)},e.prototype._createUnderlineStrikeoutPen=function(t,e){return new We(t._color,e._metrics._size/20)},e.prototype._checkCorrectLayoutRectangle=function(e,i,n,r){var a=[i,n,e[0],e[0]];if(r){switch(r.alignment){case t.PdfTextAlignment.center:a[0]=a[0]-a[2]/2;break;case t.PdfTextAlignment.right:a[0]=a[0]-a[2]}switch(r.lineAlignment){case t._PdfVerticalAlignment.middle:a[1]=a[1]-a[3]/2;break;case t._PdfVerticalAlignment.bottom:a[1]=a[1]-a[3]}}return a},e.prototype._drawGraphicsPath=function(e,i,n,r){void 0===n&&(n=t._PdfFillMode.winding);var a=null!=i,s=null!=e,o=n===t._PdfFillMode.alternate;s&&a?r?this._sw._closeFillStrokePath(o):this._sw._fillStrokePath(o):s||a?s?r?this._sw._closeStrokePath():this._sw._strokePath():r?this._sw._closeFillPath(o):this._sw._fillPath(o):this._sw._endPath()},e.prototype._initializeCoordinates=function(t){var e;if(t){var i=[0,0],n=!1;if(t._pageDictionary.has("CropBox")&&t._pageDictionary.has("MediaBox")){e=t._pageDictionary.getArray("CropBox");var r=t._pageDictionary.getArray("MediaBox");e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&(n=!0),e[0]>0&&e[3]>0&&r[0]<0&&r[1]<0?(this._translateTransform(e[0],-e[3]),i[0]=-e[0],i[1]=e[3]):t._pageDictionary.has("CropBox")||(n=!0),n&&(this._sw._writeComment("Change co-ordinate system to left/top."),this._cropBox?this._translateTransform(this._cropBox[0],-this._cropBox[3]):-t._origin[1]<this._mediaBoxUpperRightBound||0===this._mediaBoxUpperRightBound?this._translateTransform(0,-this._size[1]):this._translateTransform(0,-this._mediaBoxUpperRightBound))}}else this._sw._writeComment("Change co-ordinate system to left/top."),this._mediaBoxUpperRightBound!==-this._size[1]&&(this._cropBox&&((e=this._cropBox)[0]>0||e[1]>0||this._size[0]===e[2]||this._size[1]===e[3])?this._translateTransform(e[0],-e[3]):this._mediaBoxUpperRightBound===this._size[1]||0===this._mediaBoxUpperRightBound?this._translateTransform(0,-this._size[1]):this._translateTransform(0,-this._mediaBoxUpperRightBound))},e.prototype._scaleTransform=function(t,e){var i=new Ee;i._scale(t,e),this._sw._modifyCtm(i),this._matrix._multiply(i)},e.prototype._translateTransform=function(t,e){var i=new Ee;i._translate(t,-e),this._sw._modifyCtm(i),this._matrix._multiply(i)},e.prototype._rotateTransform=function(t){var e=new Ee;e._rotate(-t),this._sw._modifyCtm(e),this._matrix._multiply(e)},e.prototype._setClip=function(e,i){void 0===i&&(i=t._PdfFillMode.winding),this._sw._appendRectangle(e[0],e[1],e[2],e[3]),this._sw._clipPath(i===t._PdfFillMode.alternate)},e.prototype._setTransparency=function(e,i,n){void 0===i&&(i=e),void 0===n&&(n=t._PdfBlendMode.normal),void 0===this._transparencies&&(this._transparencies=new Map);var r,s="CA:"+e.toString()+"_ca:"+i.toString()+"_BM:"+n.toString();if(this._transparencies.size>0&&this._transparencies.forEach((function(t,e){t===s&&(r=e)})),!r){r=new je;var h=new _;h.update("CA",e),h.update("ca",i),h.update("BM",yi(n));var c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,h),r._dictionary=h,r._key=s,r._name=a.get(wi()),r._reference=c;var d=void 0,p=!1;if(this._resourceObject.has("ExtGState")){var l=this._resourceObject.getRaw("ExtGState");l instanceof o?(p=!0,d=this._crossReference._fetch(l)):l instanceof _&&(d=l)}else d=new _(this._crossReference),this._resourceObject.update("ExtGState",d);d.update(r._name.name,c),p&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0)}this._sw._setGraphicsState(r._name)},e.prototype._setTransparencyData=function(t,e){this._resourceMap.set(t,e);var i=this._crossReference._fetch(t),n=0,r=0,a=0;i.has("CA")&&(n=i.get("CA")),i.has("ca")&&(r=i.get("ca")),i.has("ca")&&(r=i.get("ca")),i.has("BM")&&(a=mi(i.get("BM")));var s="CA:"+n.toString()+"_ca:"+r.toString()+"_BM:"+a.toString(),o=new je;o._dictionary=i,o._key=s,o._name=e,o._reference=t,this._transparencies.set(o,s)},e}(),Ee=function(){function t(){this._matrix=new ze(1,0,0,1,0,0)}return t.prototype._translate=function(t,e){this._matrix._translate(t,e)},t.prototype._scale=function(t,e){this._matrix._elements[0]=t,this._matrix._elements[3]=e},t.prototype._rotate=function(t){t=t*Math.PI/180,this._matrix._elements[0]=Math.cos(t),this._matrix._elements[1]=Math.sin(t),this._matrix._elements[2]=-Math.sin(t),this._matrix._elements[3]=Math.cos(t)},t.prototype._multiply=function(t){this._matrix._multiply(t._matrix)},t.prototype._toString=function(){for(var t="",e=0,i=this._matrix._elements.length;e<i;e++)t+=bi(this._matrix._elements[Number.parseInt(e.toString(),10)])+" ";return t},t}(),ze=function(){function t(t,e,i,n,r,a){this._elements=void 0===t?[]:"number"==typeof t?[t,e,i,n,r,a]:t}return Object.defineProperty(t.prototype,"_offsetX",{get:function(){return this._elements[4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_offsetY",{get:function(){return this._elements[5]},enumerable:!0,configurable:!0}),t.prototype._clone=function(){return new t(this._elements.slice())},t.prototype._translate=function(t,e){this._elements[4]=t,this._elements[5]=e},t.prototype._transform=function(t){var e=t[0],i=t[1];return[e*this._elements[0]+i*this._elements[2]+this._offsetX,e*this._elements[1]+i*this._elements[3]+this._offsetY]},t.prototype._multiply=function(t){this._elements=[this._elements[0]*t._elements[0]+this._elements[1]*t._elements[2],this._elements[0]*t._elements[1]+this._elements[1]*t._elements[3],this._elements[2]*t._elements[0]+this._elements[3]*t._elements[2],this._elements[2]*t._elements[1]+this._elements[3]*t._elements[3],this._offsetX*t._elements[0]+this._offsetY*t._elements[2]+t._offsetX,this._offsetX*t._elements[1]+this._offsetY*t._elements[3]+t._offsetY]},t}(),De=function(e,i){e&&(this._g=e,this._transformationMatrix=i),this._charSpacing=0,this._wordSpacing=0,this._textScaling=100,this._textRenderingMode=t._TextRenderingMode.fill},je=function(){};(Bt=t._PdfBlendMode||(t._PdfBlendMode={}))[Bt.normal=0]="normal",Bt[Bt.multiply=1]="multiply",Bt[Bt.screen=2]="screen",Bt[Bt.overlay=3]="overlay",Bt[Bt.darken=4]="darken",Bt[Bt.lighten=5]="lighten",Bt[Bt.colorDodge=6]="colorDodge",Bt[Bt.colorBurn=7]="colorBurn",Bt[Bt.hardLight=8]="hardLight",Bt[Bt.softLight=9]="softLight",Bt[Bt.difference=10]="difference",Bt[Bt.exclusion=11]="exclusion",Bt[Bt.hue=12]="hue",Bt[Bt.saturation=13]="saturation",Bt[Bt.color=14]="color",Bt[Bt.luminosity=15]="luminosity",(Mt=t._TextRenderingMode||(t._TextRenderingMode={}))[Mt.fill=0]="fill",Mt[Mt.stroke=1]="stroke",Mt[Mt.fillStroke=2]="fillStroke",Mt[Mt.none=3]="none",Mt[Mt.clipFlag=4]="clipFlag",Mt[Mt.clipFill=4]="clipFill",Mt[Mt.clipStroke=5]="clipStroke",Mt[Mt.clipFillStroke=6]="clipFillStroke",Mt[Mt.clip=7]="clip",(Lt=t._PdfFillMode||(t._PdfFillMode={}))[Lt.winding=0]="winding",Lt[Lt.alternate=1]="alternate",(Ot=t._PdfDashStyle||(t._PdfDashStyle={}))[Ot.solid=0]="solid",Ot[Ot.dash=1]="dash",Ot[Ot.dot=2]="dot",Ot[Ot.dashDot=3]="dashDot",Ot[Ot.dashDotDot=4]="dashDotDot",Ot[Ot.custom=5]="custom",(Et=t._PdfLineCap||(t._PdfLineCap={}))[Et.flat=0]="flat",Et[Et.round=1]="round",Et[Et.square=2]="square",(zt=t._PdfLineJoin||(t._PdfLineJoin={}))[zt.miter=0]="miter",zt[zt.round=1]="round",zt[zt.bevel=2]="bevel";var Ue,Ve=function(t){this._color=void 0!==t?t:[0,0,0]},We=function(e,i){this._color=e,this._width=i,this._dashOffset=0,this._dashPattern=[],this._dashStyle=t._PdfDashStyle.solid,this._miterLimit=0,this._lineCap=t._PdfLineCap.flat,this._lineJoin=t._PdfLineJoin.miter},He=function(){function t(){this._horizontalResolution=96,this._proportions=this._updateProportions(this._horizontalResolution)}return t.prototype._updateProportions=function(t){return[t/2.54,t/6,1,t/72,t,t/300,t/25.4]},t.prototype._convertUnits=function(t,e,i){return this._convertFromPixels(this._convertToPixels(t,e),i)},t.prototype._convertFromPixels=function(t,e){var i=e;return t/this._proportions[Number.parseInt(i.toString(),10)]},t.prototype._convertToPixels=function(t,e){var i=e;return t*this._proportions[Number.parseInt(i.toString(),10)]},t}(),Ge=(Ue=function(t,e){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ue(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function qe(e){var i=[];return 0!=(e&t.PdfAnnotationFlag.hidden)&&i.push("hidden"),0!=(e&t.PdfAnnotationFlag.invisible)&&i.push("invisible"),0!=(e&t.PdfAnnotationFlag.locked)&&i.push("locked"),0!=(e&t.PdfAnnotationFlag.noRotate)&&i.push("norotate"),0!=(e&t.PdfAnnotationFlag.noView)&&i.push("noview"),0!=(e&t.PdfAnnotationFlag.noZoom)&&i.push("nozoom"),0!=(e&t.PdfAnnotationFlag.print)&&i.push("print"),0!=(e&t.PdfAnnotationFlag.readOnly)&&i.push("readonly"),0!=(e&t.PdfAnnotationFlag.toggleNoView)&&i.push("togglenoview"),0!=(e&t.PdfAnnotationFlag.default)&&i.push("default"),i.join(",")}function Ke(t){if(t.charCodeAt(0)>="".charCodeAt(0)){var e=void 0;if(""===t[0]&&""===t[1]&&""===t[2]?e="utf-8":""===t[0]&&""===t[1]?e="utf-16le":""===t[0]&&""===t[1]&&(e="utf-16be"),e)try{return new TextDecoder(e,{fatal:!0}).decode(Xe(t))}catch(t){}}for(var i=[],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],r=0;r<t.length;r++){var a=n[t.charCodeAt(r)];i.push(a?String.fromCharCode(a):t.charAt(r))}return i.join("")}function Xe(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("Invalid argument for stringToBytes");for(var i=[],n=0;n<t.length;++n)i.push(255&t.charCodeAt(n));return e?i:new Uint8Array(i)}function Qe(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[Number.parseInt(i.toString(),10)]!==e[Number.parseInt(i.toString(),10)])return!1;return!0}function Je(t){if(Number.isInteger(t))return t.toString();var e=Math.round(100*t);return e%100==0?(e/100).toString():e%10==0?t.toFixed(1):t.toFixed(2)}function Ye(t,e){var i=!1;if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n]){i=!0;break}return i}function Ze(t){if("object"!==i(t)||null===t||void 0===t.length)throw new Error("Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var n=[],r=0;r<e;r+=8192){var a=Math.min(r+8192,e),s=t.subarray(r,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function $e(t){for(var e,i="",n=0;n<t.length;n++)(e=t[Number.parseInt(n.toString(),10)].toString(16)).length<2&&(e="0"+e),i+=e;return i}function ti(t){return 32===t||9===t||13===t||10===t}function ei(t,e){void 0===e&&(e=!1);var i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,c=0,_=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;t.charAt(t.length-1)===o.charAt(64)&&_--;for(var d=new Array(0|_);h<t.length;)i=o.indexOf(t.charAt(h++))<<2|(a=o.indexOf(t.charAt(h++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(h++)))>>2,r=(3&s)<<6|o.indexOf(t.charAt(h++)),d[c++]=i,d[c++]=n,d[c++]=r;return e?d:new Uint8Array(d)}function ii(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0,r=0;r<t.length;r++)r%3==0?(n=t[Number.parseInt(r.toString(),10)]>>2,i+=e[Number.parseInt(n.toString(),10)],n=t[Number.parseInt(r.toString(),10)]<<4&63):r%3==1?(n+=t[Number.parseInt(r.toString(),10)]>>4,i+=e[Number.parseInt(n.toString(),10)],n=t[Number.parseInt(r.toString(),10)]<<2&63):r%3==2&&(n+=t[Number.parseInt(r.toString(),10)]>>6,i+=e[Number.parseInt(n.toString(),10)],n=63&t[Number.parseInt(r.toString(),10)],i+=e[Number.parseInt(n.toString(),10)]);return t.length%3==1&&(i+=e[Number.parseInt(n.toString(),10)]+"=="),t.length%3==2&&(i+=e[Number.parseInt(n.toString(),10)]+"="),i}function ni(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);for(var r,a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];for(var o=new Set;t instanceof _&&t.objId&&!o.has(t.objId);){t.objId&&o.add(t.objId);var h=i?t.getArray(e):t.get(e);if(void 0!==h){if(n)return h;r||(r=[]),r.push(h)}for(var c=0,d=!1;c<a.length;){var p=a[c];if(t.has(p)){t=t.get(p),d=!0;break}c++}if(!d)break}return r}function ri(t,e){var i={x:0,y:0,width:0,height:0},n=t.getArray("Rect");if(n&&Array.isArray(n)){var r=n[0],a=n[1],s=n[2],o=n[3];void 0!==r&&void 0!==a&&void 0!==s&&void 0!==o&&(i.x=Math.min(r,s),i.y=Math.min(a,o),i.width=Math.max(r,s)-i.x,i.height=Math.max(a,o)-i.y,e&&(i.height=parseFloat(i.height.toFixed(3)),n[1]<0&&(i.y=n[1],n[1]>n[3]&&(i.y-=i.height))))}return i}function ai(t,e){var i;if(t.has("Rect"))if(i=ri(t),e){var n=e.size,r=e._mediaBox,a=e._cropBox;a&&Array.isArray(a)&&4===a.length?0===a[0]&&0===a[1]&&n[0]!==a[2]&&n[1]!==a[3]||i.x===a[0]?i.y=n[1]-(i.y+i.height):(i.x-=a[0],i.y=a[3]-(i.y+i.height)):r&&Array.isArray(r)&&4===r.length&&(r[0]>0||r[1]>0||n[0]===r[2]||n[1]===r[3])?(i.x-=r[0],i.y=r[3]-(i.y+i.height)):i.y=n[1]-(i.y+i.height)}else i.y=i.y+i.height;return i}function si(t){return{x:Math.min(t[0],t[2]),y:Math.min(t[1],t[3]),width:Math.abs(t[0]-t[2]),height:Math.abs(t[1]-t[3])}}function oi(t){return[t.x,t.y,t.x+t.width,t.y+t.height]}function hi(t,e){var i=t[0],n=t[1],r=t[2],a=t[3];if(e){var s=e.size,o=s[0],h=s[1],c=e._mediaBox,_=e._cropBox;_&&Array.isArray(_)&&4===_.length?0!==_[0]||0!==_[1]||o===_[2]||h===_[3]?(i+=_[0],n=_[3]-(n+a)):n=h-(n+a):c&&Array.isArray(c)&&4===c.length&&(c[0]>0||c[1]>0||o===c[2]||h===c[3])?(i-=c[0],n=c[3]-(n+a)):n=h-(n+a)}return[i,n,i+r,n+a]}function ci(t){var e=Ti(t);if(!e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);i&&(e=[Number.parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)])}return e}function _i(t){var e;if(t)if(1===t.length){var i=t[0];if(void 0!==i){var n=Math.round(255*i);e=[n,n,n]}}else if(3===t.length){var r=t[0],a=t[1],s=t[2];void 0!==r&&void 0!==a&&void 0!==s&&(e=[Math.round(255*r),Math.round(255*a),Math.round(255*s)])}else if(4===t.length){var o=t[0],h=t[1],c=t[2],_=t[3];if(void 0!==o&&void 0!==h&&void 0!==c&&void 0!==_){var d=255*_;e=[Math.round(255-Math.min(255,o*(255-d)+d)),Math.round(255-Math.min(255,h*(255-d)+d)),Math.round(255-Math.min(255,c*(255-d)+d))]}}return e}function di(e){var i="S";switch(e){case t.PdfBorderStyle.dot:case t.PdfBorderStyle.dashed:i="D";break;case t.PdfBorderStyle.beveled:i="B";break;case t.PdfBorderStyle.inset:i="I";break;case t.PdfBorderStyle.underline:i="U"}return a.get(i)}function pi(e){var i=t.PdfBorderEffectStyle.solid;switch(e){case"C":i=t.PdfBorderEffectStyle.cloudy}return i}function li(e,i){var n="None";if(void 0===e&&(e=i),void 0!==e)switch(e){case t.PdfLineEndingStyle.openArrow:n="OpenArrow";break;case t.PdfLineEndingStyle.closedArrow:n="ClosedArrow";break;case t.PdfLineEndingStyle.rOpenArrow:n="ROpenArrow";break;case t.PdfLineEndingStyle.rClosedArrow:n="RClosedArrow";break;case t.PdfLineEndingStyle.butt:n="Butt";break;case t.PdfLineEndingStyle.diamond:n="Diamond";break;case t.PdfLineEndingStyle.circle:n="Circle";break;case t.PdfLineEndingStyle.square:n="Square";break;case t.PdfLineEndingStyle.slash:n="Slash"}return n}function ui(e,i){var n=void 0!==i?i:t.PdfLineEndingStyle.none;switch(e.toLowerCase()){case"openarrow":n=t.PdfLineEndingStyle.openArrow;break;case"closedarrow":n=t.PdfLineEndingStyle.closedArrow;break;case"ropenarrow":n=t.PdfLineEndingStyle.rOpenArrow;break;case"rclosedarrow":n=t.PdfLineEndingStyle.rClosedArrow;break;case"butt":n=t.PdfLineEndingStyle.butt;break;case"diamond":n=t.PdfLineEndingStyle.diamond;break;case"circle":n=t.PdfLineEndingStyle.circle;break;case"square":n=t.PdfLineEndingStyle.square;break;case"slash":n=t.PdfLineEndingStyle.slash}return n}function fi(e){switch(e){case"P":return t.PdfHighlightMode.push;case"N":return t.PdfHighlightMode.noHighlighting;case"O":return t.PdfHighlightMode.outline;default:return t.PdfHighlightMode.invert}}function gi(e){switch(e){case t.PdfHighlightMode.push:return a.get("P");case t.PdfHighlightMode.noHighlighting:return a.get("N");case t.PdfHighlightMode.outline:return a.get("O");default:return a.get("I")}}function yi(e){var i="Normal";switch(e){case t._PdfBlendMode.multiply:i="Multiply";break;case t._PdfBlendMode.screen:i="Screen";break;case t._PdfBlendMode.overlay:i="Overlay";break;case t._PdfBlendMode.darken:i="Darken";break;case t._PdfBlendMode.lighten:i="Lighten";break;case t._PdfBlendMode.colorDodge:i="ColorDodge";break;case t._PdfBlendMode.colorBurn:i="ColorBurn";break;case t._PdfBlendMode.hardLight:i="HardLight";break;case t._PdfBlendMode.softLight:i="SoftLight";break;case t._PdfBlendMode.difference:i="Difference";break;case t._PdfBlendMode.exclusion:i="Exclusion";break;case t._PdfBlendMode.hue:i="Hue";break;case t._PdfBlendMode.saturation:i="Saturation";break;case t._PdfBlendMode.color:i="Color";break;case t._PdfBlendMode.luminosity:i="Luminosity";break;default:i="Normal"}return a.get(i)}function mi(e){var i=t._PdfBlendMode.normal;switch(e.name){case"Multiply":i=t._PdfBlendMode.multiply;break;case"Screen":i=t._PdfBlendMode.screen;break;case"Overlay":i=t._PdfBlendMode.overlay;break;case"Darken":i=t._PdfBlendMode.darken;break;case"Lighten":i=t._PdfBlendMode.lighten;break;case"ColorDodge":i=t._PdfBlendMode.colorDodge;break;case"ColorBurn":i=t._PdfBlendMode.colorBurn;break;case"HardLight":i=t._PdfBlendMode.hardLight;break;case"SoftLight":i=t._PdfBlendMode.softLight;break;case"Difference":i=t._PdfBlendMode.difference;break;case"Exclusion":i=t._PdfBlendMode.exclusion;break;case"Hue":i=t._PdfBlendMode.hue;break;case"Saturation":i=t._PdfBlendMode.saturation;break;case"Color":i=t._PdfBlendMode.color;break;case"Luminosity":i=t._PdfBlendMode.luminosity;break;default:i=t._PdfBlendMode.normal}return i}function bi(t){var e=t.toFixed(2);return"0.00"===e&&(e=".00"),e}function vi(t,e){var i=a.get(t);if(e.has("ProcSet")){var n=e.getArray("ProcSet");n&&-1===n.indexOf(i)&&(n.push(i),e.update("ProcSet",n))}else e.update("ProcSet",[i])}function wi(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,(function(t){var e=16*Math.random()|0;return("a"===t?e:3&e|8).toString(16)}))}function Si(t){for(var e=[],i=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);(r<33||r>126||35===r||40===r||41===r||60===r||62===r||91===r||93===r||123===r||125===r||47===r||37===r)&&(i<n&&e.push(t.substring(i,n)),e.push("#"+r.toString(16)),i=n+1)}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))}function Pi(t,e,i,n,r,a){if(t>i){var s=t;t=i,i=s}if(n>e){s=e;e=n,n=s}var o,h;Math.abs(a)<=90?(o=a,h=1):o=a/(h=Math.ceil(Math.abs(a)/90));for(var c=(t+i)/2,_=(e+n)/2,d=(i-t)/2,p=(n-e)/2,l=o*(Math.PI/360),u=Math.abs(4/3*(1-Math.cos(l))/Math.sin(l)),f=[],g=0;g<h;g++){var y=(r+g*o)*(Math.PI/180),m=(r+(g+1)*o)*(Math.PI/180),b=Math.cos(y),v=Math.cos(m),w=Math.sin(y),S=Math.sin(m);o>0?(f.push(c+d*b),f.push(_-p*w),f.push(c+d*(b-u*w)),f.push(_-p*(w+u*b)),f.push(c+d*(v+u*S)),f.push(_-p*(S-u*v)),f.push(c+d*v),f.push(_-p*S)):(f.push(c+d*b),f.push(_-p*w),f.push(c+d*(b+u*w)),f.push(_-p*(w-u*b)),f.push(c+d*(v-u*S)),f.push(_-p*(S+u*v)),f.push(c+d*v),f.push(_-p*S))}return f}function Ai(t,e){for(var i,n=0;n<t.pageCount&&void 0===i;n++){var r=t.getPage(n),a=r.annotations;if(r&&a&&a.count>0)for(var s=0;s<a.count&&void 0===i;s++)a.at(s)._ref===e&&(i=r)}return i}function xi(t){var e,i="";if(t.has("AS")&&null!==(e=t.get("AS"))&&"Off"!==e.name&&(i=e.name),""===i&&t.has("AP")){var n=t.get("AP");if(n&&n.has("N")){var r=n.get("N");if(r instanceof q&&(r=r.dictionary),r&&r instanceof _){var a=[];r.forEach((function(t,e){a.push(t)}));for(var s=0;s<a.length;s++)if("Off"!==a[Number.parseInt(s.toString(),10)]){i=a[Number.parseInt(s.toString(),10)];break}}}}return i}function ki(e,i){var n,r=e===t._PdfCheckFieldState.checked?xi(i._dictionary):"Off";if(i._dictionary.has("AP")){var a=i._dictionary.get("AP");if(a&&a.has("N")){var s=a.get("N");if(s&&s instanceof q&&(s=s.dictionary),s&&s instanceof _&&r&&""!==r&&s.has(r)){var o=s.get(r),h=s.getRaw(r);h&&(o.reference=h),o&&(n=new it(o,i._crossReference))}}}return n}function Ti(t){var e;switch(t){case"transparent":e=[255,255,255];break;case"aliceblue":e=[240,248,255];break;case"antiquewhite":e=[250,235,215];break;case"aqua":e=[0,255,255];break;case"aquamarine":e=[127,255,212];break;case"azure":e=[240,255,255];break;case"beige":e=[245,245,220];break;case"bisque":e=[255,228,196];break;case"black":e=[0,0,0];break;case"blanchedalmond":e=[255,235,205];break;case"blue":e=[0,0,255];break;case"blueviolet":e=[138,43,226];break;case"brown":e=[165,42,42];break;case"burlywood":e=[222,184,135];break;case"cadetBlue":e=[95,158,160];break;case"chartreuse":e=[127,255,0];break;case"chocolate":e=[210,105,30];break;case"coral":e=[255,127,80];break;case"cornflowerblue":e=[100,149,237];break;case"cornsilk":e=[255,248,220];break;case"crimson":e=[220,20,60];break;case"cyan":e=[0,255,255];break;case"darkblue":e=[0,0,139];break;case"darkcyan":e=[0,139,139];break;case"darkgoldenrod":e=[184,134,11];break;case"darkgray":e=[169,169,169];break;case"darkgreen":e=[0,100,0];break;case"darkkhaki":e=[189,183,107];break;case"darkmagenta":e=[139,0,139];break;case"darkolivegreen":e=[85,107,47];break;case"darkorange":e=[255,140,0];break;case"darkorchid":e=[153,50,204];break;case"darkred":e=[139,0,0];break;case"darksalmon":e=[233,150,122];break;case"darkseagreen":e=[143,188,139];break;case"darkslateblue":e=[72,61,139];break;case"darkslategray":e=[47,79,79];break;case"darkturquoise":e=[0,206,209];break;case"darkviolet":e=[148,0,211];break;case"deeppink":e=[255,20,147];break;case"deepskyblue":e=[0,191,255];break;case"dimgray":e=[105,105,105];break;case"dodgerblue":e=[30,144,255];break;case"firebrick":e=[178,34,34];break;case"floralwhite":e=[255,250,240];break;case"forestgreen":e=[34,139,34];break;case"fuchsia":e=[255,0,255];break;case"gainsboro":e=[220,220,220];break;case"ghostwhite":e=[248,248,255];break;case"gold":e=[255,215,0];break;case"goldenrod":e=[218,165,32];break;case"gray":e=[128,128,128];break;case"green":e=[0,128,0];break;case"greenyellow":e=[173,255,47];break;case"honeydew":e=[240,255,240];break;case"hotpink":e=[255,105,180];break;case"indianred":e=[205,92,92];break;case"indigo":e=[75,0,130];break;case"ivory":e=[255,255,240];break;case"khaki":e=[240,230,140];break;case"lavender":e=[230,230,250];break;case"lavenderblush":e=[255,240,245];break;case"lawngreen":e=[124,252,0];break;case"lemonchiffon":e=[255,250,205];break;case"lightblue":e=[173,216,230];break;case"lightcoral":e=[240,128,128];break;case"lightcyan":e=[224,255,255];break;case"lightgoldenrodyellow":e=[250,250,210];break;case"lightgreen":e=[144,238,144];break;case"lightgray":e=[211,211,211];break;case"LightPink":e=[255,182,193];break;case"lightsalmon":e=[255,160,122];break;case"lightseagreen":e=[32,178,170];break;case"lightskyblue":e=[135,206,250];break;case"lightslategray":e=[119,136,153];break;case"lightsteelblue":e=[176,196,222];break;case"lightyellow":e=[255,255,224];break;case"lime":e=[0,255,0];break;case"limeGreen":e=[50,205,50];break;case"linen":e=[250,240,230];break;case"magenta":e=[255,0,255];break;case"maroon":e=[128,0,0];break;case"mediumaquamarine":e=[102,205,170];break;case"mediumblue":e=[0,0,205];break;case"mediumorchid":e=[186,85,211];break;case"mediumpurple":e=[147,112,219];break;case"mediumseagreen":e=[60,179,113];break;case"mediumslateblue":e=[123,104,238];break;case"mediumspringgreen":e=[0,250,154];break;case"mediumturquoise":e=[72,209,204];break;case"mediumvioletred":e=[199,21,133];break;case"midnightblue":e=[25,25,112];break;case"mintcream":e=[245,255,250];break;case"mistyrose":e=[255,228,225];break;case"moccasin":e=[255,228,181];break;case"navajowhite":e=[255,222,173];break;case"navy":e=[0,0,128];break;case"oldLace":e=[253,245,230];break;case"olive":e=[128,128,0];break;case"olivedrab":e=[107,142,35];break;case"orange":e=[255,165,0];break;case"orangered":e=[255,69,0];break;case"orchid":e=[218,112,214];break;case"palegoldenrod":e=[238,232,170];break;case"palegreen":e=[152,251,152];break;case"paleturquoise":e=[175,238,238];break;case"palebioletred":e=[219,112,147];break;case"papayawhip":e=[255,239,213];break;case"peachpuff":e=[255,218,185];break;case"peru":e=[205,133,63];break;case"pink":e=[255,192,203];break;case"plum":e=[221,160,221];break;case"powderblue":e=[176,224,230];break;case"purple":e=[128,0,128];break;case"red":e=[255,0,0];break;case"rosybrown":e=[188,143,143];break;case"royalblue":e=[65,105,225];break;case"saddlebrown":e=[139,69,19];break;case"salmon":e=[250,128,114];break;case"sandybrown":e=[244,164,96];break;case"seagreen":e=[46,139,87];break;case"seashell":e=[255,245,238];break;case"sienna":e=[160,82,45];break;case"silver":e=[192,192,192];break;case"skyblue":e=[135,206,235];break;case"slateblue":e=[106,90,205];break;case"slategray":e=[112,128,144];break;case"snow":e=[255,250,250];break;case"springgreen":e=[0,255,127];break;case"steelblue":e=[70,130,180];break;case"tan":e=[210,180,140];break;case"teal":e=[0,128,128];break;case"thistle":e=[216,191,216];break;case"tomato":e=[255,99,71];break;case"turquoise":e=[64,224,208];break;case"violet":e=[238,130,238];break;case"wheat":e=[245,222,179];break;case"white":e=[255,255,255];break;case"whitesmoke":e=[245,245,245];break;case"yellow":e=[255,255,0];break;case"yellowgreen":e=[154,205,50]}return e}function Ri(t,e){var i=t._content.dictionary.getArray("BBox");if(i&&null!=e)if(0===e)t._content.dictionary.set("Matrix",[1,0,0,1,-i[0],-i[1]]);else{var n=new Ee;n._rotate(e),t._content.dictionary.set("Matrix",n._matrix._elements)}}function Ii(e){var i="4";switch(e){case t.PdfCheckBoxStyle.circle:i="l";break;case t.PdfCheckBoxStyle.cross:i="8";break;case t.PdfCheckBoxStyle.diamond:i="u";break;case t.PdfCheckBoxStyle.square:i="n";break;case t.PdfCheckBoxStyle.star:i="H"}return i}function Fi(e){var i=t.PdfCheckBoxStyle.check;switch(e){case"l":i=t.PdfCheckBoxStyle.circle;break;case"8":i=t.PdfCheckBoxStyle.cross;break;case"u":i=t.PdfCheckBoxStyle.diamond;break;case"n":i=t.PdfCheckBoxStyle.square;break;case"H":i=t.PdfCheckBoxStyle.star}return i}function Ni(e){var i;switch(e){case"cm":i=t.PdfMeasurementUnit.centimeter;break;case"in":i=t.PdfMeasurementUnit.inch;break;case"mm":i=t.PdfMeasurementUnit.millimeter;break;case"p":i=t.PdfMeasurementUnit.pica;break;case"pt":i=t.PdfMeasurementUnit.point;break;default:i=t.PdfMeasurementUnit.centimeter}return i}function Ci(e){var i;switch(e){case"Highlight":i=t.PdfTextMarkupAnnotationType.highlight;break;case"Squiggly":i=t.PdfTextMarkupAnnotationType.squiggly;break;case"StrikeOut":i=t.PdfTextMarkupAnnotationType.strikeOut;break;case"Underline":i=t.PdfTextMarkupAnnotationType.underline;break;default:i=t.PdfTextMarkupAnnotationType.highlight}return i}function Bi(e){var i="Highlight";switch(e){case t.PdfTextMarkupAnnotationType.highlight:i="Highlight";break;case t.PdfTextMarkupAnnotationType.squiggly:i="Squiggly";break;case t.PdfTextMarkupAnnotationType.strikeOut:i="StrikeOut";break;case t.PdfTextMarkupAnnotationType.underline:i="Underline";break;default:i="Highlight"}return i}function Mi(e){var i;switch(e){case"cm":i=t.PdfGraphicsUnit.centimeter;break;case"in":i=t.PdfGraphicsUnit.inch;break;case"mm":i=t.PdfGraphicsUnit.millimeter;break;case"p":i=t.PdfGraphicsUnit.pica;break;case"pt":i=t.PdfGraphicsUnit.point;break;default:i=t.PdfGraphicsUnit.centimeter}return i}function Li(e){var i;switch(e){case"#Approved":i=t.PdfRubberStampAnnotationIcon.approved;break;case"#AsIs":i=t.PdfRubberStampAnnotationIcon.asIs;break;case"#Completed":i=t.PdfRubberStampAnnotationIcon.completed;break;case"#Confidential":i=t.PdfRubberStampAnnotationIcon.confidential;break;case"#Departmental":i=t.PdfRubberStampAnnotationIcon.departmental;break;case"#Draft":i=t.PdfRubberStampAnnotationIcon.draft;break;case"#Experimental":i=t.PdfRubberStampAnnotationIcon.experimental;break;case"#Expired":i=t.PdfRubberStampAnnotationIcon.expired;break;case"#Final":i=t.PdfRubberStampAnnotationIcon.final;break;case"#ForComment":i=t.PdfRubberStampAnnotationIcon.forComment;break;case"#ForPublicRelease":i=t.PdfRubberStampAnnotationIcon.forPublicRelease;break;case"#InformationOnly":i=t.PdfRubberStampAnnotationIcon.informationOnly;break;case"#NotApproved":i=t.PdfRubberStampAnnotationIcon.notApproved;break;case"#NotForPublicRelease":i=t.PdfRubberStampAnnotationIcon.notForPublicRelease;break;case"#PreliminaryResults":i=t.PdfRubberStampAnnotationIcon.preliminaryResults;break;case"#Sold":i=t.PdfRubberStampAnnotationIcon.sold;break;case"#TopSecret":i=t.PdfRubberStampAnnotationIcon.topSecret;break;case"#Void":i=t.PdfRubberStampAnnotationIcon.void;break;default:i=t.PdfRubberStampAnnotationIcon.draft}return i}function Oi(e){var i;switch(e){case"note":i=t.PdfPopupIcon.note;break;case"comment":i=t.PdfPopupIcon.comment;break;case"help":i=t.PdfPopupIcon.help;break;case"insert":i=t.PdfPopupIcon.insert;break;case"key":i=t.PdfPopupIcon.key;break;case"newParagraph":i=t.PdfPopupIcon.newParagraph;break;case"paragraph":i=t.PdfPopupIcon.paragraph;break;default:i=t.PdfPopupIcon.note}return i}function Ei(e){var i="None";switch(e){case t.PdfAnnotationState.none:i="None";break;case t.PdfAnnotationState.accepted:i="Accepted";break;case t.PdfAnnotationState.rejected:i="Rejected";break;case t.PdfAnnotationState.cancel:i="Cancelled";break;case t.PdfAnnotationState.completed:i="Completed";break;case t.PdfAnnotationState.marked:i="Marked";break;case t.PdfAnnotationState.unmarked:i="Unmarked";break;case t.PdfAnnotationState.unknown:i="Unknown";break;default:i="None"}return i}function zi(e){var i="None";switch(e){case t.PdfAnnotationStateModel.none:i="None";break;case t.PdfAnnotationStateModel.marked:i="Marked";break;case t.PdfAnnotationStateModel.review:i="Review";break;default:i="None"}return i}function Di(e){var i;switch(e){case"pushPin":i=t.PdfAttachmentIcon.pushPin;break;case"tag":i=t.PdfAttachmentIcon.tag;break;case"graph":i=t.PdfAttachmentIcon.graph;break;case"paperclip":i=t.PdfAttachmentIcon.paperClip;break;default:i=t.PdfAttachmentIcon.pushPin}return i}function ji(e){var i;switch(e){case"None":i=t.PdfAnnotationIntent.none;break;case"FreeTextCallout":i=t.PdfAnnotationIntent.freeTextCallout;break;case"FreeTextTypeWriter":i=t.PdfAnnotationIntent.freeTextTypeWriter;break;default:i=t.PdfAnnotationIntent.none}return i}function Ui(e){var i="";switch(e){case t._PdfFontStyle.regular:i="Regular";break;case t._PdfFontStyle.bold:i="Bold";break;case t._PdfFontStyle.italic:i="Italic";break;case t._PdfFontStyle.underline:i="Underline";break;case t._PdfFontStyle.strikeout:i="Strikeout";break;default:i="Regular"}return i}var Vi,Wi,Hi,Gi,qi=function(t){function e(e,i){var n=t.call(this)||this;return n.message=e,n.name=i,n}return Ge(e,t),e}(Error),Ki=function(t){function e(e){return t.call(this,e,"FormatError")||this}return Ge(e,t),e}(qi),Xi=function(t){function e(e){return t.call(this,e,"ParserEndOfFileException")||this}return Ge(e,t),e}(qi),Qi=(Vi=function(t,e){return(Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Vi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ji=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yi=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Zi=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),$i=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],tn=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],en=function(t){function e(e,i){var n=t.call(this,i)||this;n.stream=e,n.dictionary=e.dictionary;var r=e.getByte(),a=e.getByte();if(-1===r||-1===a)throw new Ki("Invalid header in flate stream: "+r+", "+a);if(8!=(15&r))throw new Ki("Unknown compression method in flate stream: "+r+", "+a);if(((r<<8)+a)%31!=0)throw new Ki("Bad flag check in flate stream: "+r+", "+a);if(32&a)throw new Ki("Bad flag bit set in flate stream: "+r+", "+a);return n.codeSize=0,n.codeBuffer=0,n}return Qi(e,t),e.prototype.getBits=function(t){for(var e,i=this.stream,n=this.codeSize,r=this.codeBuffer;n<t;){if(-1===(e=i.getByte()))throw new Ki("Bad encoding in flate stream");r|=e<<n,n+=8}return e=r&(1<<t)-1,this.codeBuffer=r>>t,this.codeSize=n-=t,e},e.prototype.getCode=function(t){for(var e,i=this.stream,n=t[0],r=t[1],a=this.codeSize,s=this.codeBuffer;a<r&&-1!==(e=i.getByte());)s|=e<<a,a+=8;var o=n[s&(1<<r)-1],h=o>>16,c=65535&o;if(h<1||a<h)throw new Ki("Bad encoding in flate stream");return this.codeBuffer=s>>h,this.codeSize=a-h,c},e.prototype.generateHuffmanTable=function(t){var e,i=t.length,n=0;for(e=0;e<i;++e)t[e]>n&&(n=t[e]);for(var r=1<<n,a=new Int32Array(r),s=1,o=0,h=2;s<=n;++s,o<<=1,h<<=1)for(var c=0;c<i;++c)if(t[c]===s){var _=0,d=o;for(e=0;e<s;++e)_=_<<1|1&d,d>>=1;for(e=_;e<r;e+=h)a[e]=s<<16|c;++o}return[a,n]},e.prototype.readBlock=function(){var t,e,i=this.stream,n=this.getBits(3);if(1&n&&(this.eof=!0),0!==(n>>=1)){var r,a;if(1===n)r=$i,a=tn;else{if(2!==n)throw new Ki("Unknown block type in flate stream");var s=this.getBits(5)+257,o=this.getBits(5)+1,h=this.getBits(4)+4,c=new Uint8Array(Ji.length),_=void 0;for(_=0;_<h;++_)c[Ji[_]]=this.getBits(3);var d=this.generateHuffmanTable(c);e=0,_=0;for(var p=s+o,l=new Uint8Array(p),u=void 0,f=void 0,g=void 0;_<p;){var y=this.getCode(d);if(16===y)u=2,f=3,g=e;else if(17===y)u=3,f=3,g=e=0;else{if(18!==y){l[_++]=e=y;continue}u=7,f=11,g=e=0}for(var m=this.getBits(u)+f;m-- >0;)l[_++]=g}r=this.generateHuffmanTable(l.subarray(0,s)),a=this.generateHuffmanTable(l.subarray(s,p))}for(var b=(t=this.buffer)?t.length:0,v=this.bufferLength;;){var w=this.getCode(r);if(w<256)v+1>=b&&(b=(t=this.ensureBuffer(v+1)).length),t[v++]=w;else{if(256===w)return void(this.bufferLength=v);var S=(w=Yi[w-=257])>>16;S>0&&(S=this.getBits(S)),e=(65535&w)+S,w=this.getCode(a),(S=(w=Zi[w])>>16)>0&&(S=this.getBits(S));var P=(65535&w)+S;v+e>=b&&(b=(t=this.ensureBuffer(v+e)).length);for(var A=0;A<e;++A,++v)t[v]=t[v-P]}}}else{var x=i.getByte();if(-1===x)throw new Ki("Bad block header in flate stream");var k=x;if(-1===(x=i.getByte()))throw new Ki("Bad block header in flate stream");if(k|=x<<8,-1===(x=i.getByte()))throw new Ki("Bad block header in flate stream");var T=x;if(-1===(x=i.getByte()))throw new Ki("Bad block header in flate stream");if((T|=x<<8)!==(65535&~k)&&(0!==k||0!==T))throw new Ki("Bad uncompressed block length in flate stream");this.codeBuffer=0,this.codeSize=0;var R=this.bufferLength,I=R+k;if(t=this.ensureBuffer(I),this.bufferLength=I,0===k)-1===i.peekByte()&&(this.eof=!0);else{var F=i.getBytes(k);t.set(F,R),F.length<k&&(this.eof=!0)}}},e}(Y),nn=function(){function t(t){if(this._crossReference=t,this._catalogDictionary=t._getCatalogObj(),!(this._catalogDictionary instanceof _))throw new Ki("Catalog object is not a dictionary.");this._catalogDictionary.isCatalog=!0,this._topPagesDictionary=this._catalogDictionary.get("Pages"),this.pageKidsCountCache=new c,this.pageIndexCache=new c}return Object.defineProperty(t.prototype,"version",{get:function(){var t;if(this._catalogDictionary.has("Version")){var e=this._catalogDictionary.get("Version");e&&(t=e.name)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){var t=this._topPagesDictionary.get("Count");if(void 0===t||!Number.isInteger(t))throw new Ki("Page count in top-level pages dictionary is not an integer.");return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acroForm",{get:function(){var t;if(this._catalogDictionary.has("AcroForm"))t=this._catalogDictionary.get("AcroForm");else{t=new _(this._crossReference);var e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._catalogDictionary.set("AcroForm",e),this._catalogDictionary._updated=!0}return t},enumerable:!0,configurable:!0}),t.prototype.getPageDictionary=function(t){var e=[this._topPagesDictionary],i=new h,n=this._catalogDictionary.getRaw("Pages");n instanceof o&&i.put(n);for(var r=this._crossReference,a=this.pageKidsCountCache,s=this.pageIndexCache,c=0;e.length>0;){var d=e.pop();if(d instanceof o){var p=a.get(d);if(p>=0&&c+p<=t){c+=p;continue}if(i.has(d))throw new Ki("Pages tree contains circular reference.");i.put(d);var u=r._fetch(d);if(u instanceof _&&((m=u.getRaw("Type"))instanceof o&&(m=r._fetch(m)),l(m,"Page")||!u.has("Kids"))){if(a.has(d)||a.put(d,1),s.has(d)||s.put(d,c),c===t)return{dictionary:u,reference:d};c++;continue}e.push(u)}else{if(!(d instanceof _))throw new Ki("Page dictionary kid reference points to wrong type of object.");var f=d.objId,g=d.getRaw("Count");if(g instanceof o&&(g=r._fetch(g)),Number.isInteger(g)&&g>=0&&(f&&!a.has(f)&&a.set(f,g),c+g<=t))c+=g;else{var y=d.getRaw("Kids");if(y instanceof o&&(y=r._fetch(y)),!Array.isArray(y)){var m;if((m=d.getRaw("Type"))instanceof o&&(m=r._fetch(m)),l(m,"Page")||!d.has("Kids")){if(c===t)return{dictionary:d,reference:null};c++;continue}throw new Ki("Page dictionary kids object is not an array.")}for(var b=y.length-1;b>=0;b--)e.push(y[b])}}}throw new Error("Page index "+t+" not found.")},t.prototype._destroy=function(){this._catalogDictionary&&(this._catalogDictionary=void 0),this._topPagesDictionary&&(this._topPagesDictionary=void 0),this.pageIndexCache&&(this.pageIndexCache.clear(),this.pageIndexCache=void 0),this.pageKidsCountCache&&(this.pageKidsCountCache.clear(),this.pageKidsCountCache=void 0)},t}(),rn=(Wi=function(t,e){return(Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Wi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),an=function(t){function e(e,i,n){var r=t.call(this,i)||this;if(!(n instanceof _))return e;var a=r.predictor=n.get("Predictor")||1;if(a<=1)return e;if(2!==a&&(a<10||a>15))throw new Ki("Unsupported predictor: "+a);r.readBlock=2===a?r.readBlockTiff:r.readBlockPng,r.stream=e,r.dictionary=e.dictionary;var s=r.colors=n.get("Colors")||1,o=r.bits=n.get("BPC","BitsPerComponent")||8,h=r.columns=n.get("Columns")||1;return r.pixBytes=s*o+7>>3,r.rowBytes=h*s*o+7>>3,r}return rn(e,t),e.prototype.readBlockTiff=function(){var t=this.rowBytes,e=this.bufferLength,i=this.ensureBuffer(e+t),n=this.bits,r=this.colors,a=this.stream.getBytes(t);if(this.eof=!a.length,!this.eof){var s,o=0,h=0,c=0,_=0,d=e;if(1===n&&1===r)for(s=0;s<t;++s){var p=a[s]^o;p^=p>>1,p^=p>>2,o=(1&(p^=p>>4))<<7,i[d++]=p}else if(8===n){for(s=0;s<r;++s)i[d++]=a[s];for(;s<t;++s)i[d]=i[d-r]+a[s],d++}else if(16===n){var l=2*r;for(s=0;s<l;++s)i[d++]=a[s];for(;s<t;s+=2){var u=((255&a[s])<<8)+(255&a[s+1])+((255&i[d-l])<<8)+(255&i[d-l+1]);i[d++]=u>>8&255,i[d++]=255&u}}else{var f=new Uint8Array(r+1),g=(1<<n)-1,y=0,m=e,b=this.columns;for(s=0;s<b;++s)for(var v=0;v<r;++v)c<n&&(o=o<<8|255&a[y++],c+=8),f[v]=f[v]+(o>>c-n)&g,c-=n,h=h<<n|f[v],(_+=n)>=8&&(i[m++]=h>>_-8&255,_-=8);_>0&&(i[m++]=(h<<8-_)+(o&(1<<8-_)-1))}this.bufferLength+=t}},e.prototype.readBlockPng=function(){var t=this.rowBytes,e=this.pixBytes,i=this.stream.getByte(),n=this.stream.getBytes(t);if(this.eof=!n.length,!this.eof){var r,a=this.bufferLength,s=this.ensureBuffer(a+t),o=s.subarray(a-t,a);0===o.length&&(o=new Uint8Array(t));var h,c,_=a;switch(i){case 0:for(r=0;r<t;++r)s[_++]=n[r];break;case 1:for(r=0;r<e;++r)s[_++]=n[r];for(;r<t;++r)s[_]=s[_-e]+n[r]&255,_++;break;case 2:for(r=0;r<t;++r)s[_++]=o[r]+n[r]&255;break;case 3:for(r=0;r<e;++r)s[_++]=(o[r]>>1)+n[r];for(;r<t;++r)s[_]=(o[r]+s[_-e]>>1)+n[r]&255,_++;break;case 4:for(r=0;r<e;++r)h=o[r],c=n[r],s[_++]=h+c;for(;r<t;++r){h=o[r];var d=o[r-e],p=s[_-e],l=p+h-d,u=l-p;u<0&&(u=-u);var f=l-h;f<0&&(f=-f);var g=l-d;g<0&&(g=-g),c=n[r],s[_++]=u<=f&&u<=g?p+c:f<=g?h+c:d+c}break;default:throw new Ki("Unsupported predictor: "+i)}this.bufferLength+=t}},e}(Y),sn=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],on=function(){function t(t){this.stream=t,this.nextChar(),this.stringBuffer=[],this._hexStringNumber=0,this.beginInlineImagePosition=-1}return t.prototype.nextChar=function(){return this.currentChar=this.stream.getByte()},t.prototype.peekChar=function(){return this.stream.peekByte()},t.prototype.getNumber=function(){var t=this.currentChar,e=!1,i=0,n=0;if(45===t?(n=-1,45===(t=this.nextChar())&&(t=this.nextChar())):43===t&&(n=1,t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(i=10,t=this.nextChar()),t<48||t>57){if(ti(t)||-1===t){if(10===i&&0===n)return 0;if(0===i&&-1===n)return 0}throw new Ki("Invalid number: "+String.fromCharCode(t)+" (charCode "+t+")")}n=n||1;var r=t-48,a=0,s=1;for(t=this.nextChar();t>=0;){if(t>=48&&t<=57){var o=t-48;e?a=10*a+o:(0!==i&&(i*=10),r=10*r+o)}else if(46===t){if(0!==i)break;i=1}else{if(45===t){t=this.nextChar();continue}if(69!==t&&101!==t)break;if(43===(t=this.peekChar())||45===t)s=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;e=!0}t=this.nextChar()}return 0!==i&&(r/=i),e&&(r*=Math.pow(10,s*a)),n*r},t.prototype.getString=function(){var t=1,e=!1,i=this.stringBuffer;i.length=0;for(var n=this.nextChar();;){var r=!1;switch(0|n){case-1:e=!0;break;case 40:++t,i.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):i.push(")");break;case 92:switch(n=this.nextChar()){case-1:e=!0;break;case 110:i.push("\n");break;case 114:i.push("\r");break;case 116:i.push("\t");break;case 98:i.push("\b");break;case 102:i.push("\f");break;case 92:case 40:case 41:i.push(String.fromCharCode(n));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var a=15&n;r=!0,(n=this.nextChar())>=48&&n<=55&&(a=(a<<3)+(15&n),(n=this.nextChar())>=48&&n<=55&&(r=!1,a=(a<<3)+(15&n))),i.push(String.fromCharCode(a));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:i.push(String.fromCharCode(n))}break;default:i.push(String.fromCharCode(n))}if(e)break;r||(n=this.nextChar())}return i.join("")},t.prototype.getName=function(){var t,e,i=this.stringBuffer;for(i.length=0,t=this.nextChar();t>=0&&!sn[t];){if(35===t){if(t=this.nextChar(),sn[t]){i.push("#");break}var n=this._toHexDigit(t);if(-1!==n){e=t,t=this.nextChar();var r=this._toHexDigit(t);if(-1===r){if(i.push("#",String.fromCharCode(e)),sn[t])break;i.push(String.fromCharCode(t)),t=this.nextChar();continue}i.push(String.fromCharCode(n<<4|r))}else i.push("#",String.fromCharCode(t))}else i.push(String.fromCharCode(t));t=this.nextChar()}return a.get(i.join(""))},t.prototype.getHexString=function(){var t=this.stringBuffer;t.length=0;var e,i,n=this.currentChar,r=!0;for(this._hexStringNumber=0;!(n<0);){if(62===n){this.nextChar();break}if(1!==sn[n]){if(r){if(-1===(e=this._toHexDigit(n))){n=this.nextChar();continue}}else{if(-1===(i=this._toHexDigit(n))){n=this.nextChar();continue}t.push(String.fromCharCode(e<<4|i))}r=!r,n=this.nextChar()}else n=this.nextChar()}return t.join("")},t.prototype.getObject=function(){for(var t=!1,e=this.currentChar;;){if(e<0)return"EOF";if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==sn[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),s.get("[");case 93:return this.nextChar(),s.get("]");case 60:return 60===(e=this.nextChar())?(this.nextChar(),s.get("<<")):this.getHexString();case 62:return 62===(e=this.nextChar())?(this.nextChar(),s.get(">>")):s.get(">");case 123:return this.nextChar(),s.get("{");case 125:return this.nextChar(),s.get("}");case 41:throw this.nextChar(),new Ki("Illegal character: "+e)}var i=String.fromCharCode(e);if(e<32||e>127){var n=this.peekChar();if(n>=32&&n<=127)return this.nextChar(),s.get(i)}for(e=this.nextChar();e>=0&&!sn[e];){var r=i+String.fromCharCode(e);if(128===i.length)throw new Ki("Command token too long: "+i.length);i=r,e=this.nextChar()}return"true"===i||"false"!==i&&("null"===i?null:("BI"===i&&(this.beginInlineImagePosition=this.stream.position),s.get(i)))},t.prototype.peekObj=function(){var t,e=this.stream.position,i=this.currentChar,n=this.beginInlineImagePosition;try{t=this.getObject()}catch(t){}return this.stream.position=e,this.currentChar=i,this.beginInlineImagePosition=n,t},t.prototype.skipToNextLine=function(){for(var t=this.currentChar;t>=0;){if(13===t){10===(t=this.nextChar())&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}},t.prototype._toHexDigit=function(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1},t}(),hn=function(){function t(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.lexicalOperator=t,this.xref=e,this.allowStreams=i,this.recoveryMode=n,this.imageCache=new Map,this.refill()}return t.prototype.refill=function(){this.first=this.lexicalOperator.getObject(),this.second=this.lexicalOperator.getObject()},t.prototype.shift=function(){this.second instanceof s&&"ID"===this.second.command?(this.first=this.second,this.second=null):(this.first=this.second,this.second=this.lexicalOperator.getObject())},t.prototype.tryShift=function(){try{return this.shift(),!0}catch(t){return!1}},t.prototype.getObject=function(t){var e=this.first;if(this.shift(),e instanceof s)switch(e.command){case"BI":return this.makeInlineImage(t);case"[":for(var i=[];!u(this.first,"]")&&"EOF"!==this.first;)i.push(this.getObject(t));if("EOF"===this.first){if(this.recoveryMode)return i;throw new Xi("End of file inside array.")}return this.shift(),i;case"<<":for(var n=new _(this.xref);!u(this.first,">>")&&"EOF"!==this.first;)if(this.first instanceof a){var r=this.first.name;if(this.shift(),this._checkEnd())break;n.set(r,this.getObject(t))}else this.shift();if("EOF"===this.first){if(this.recoveryMode)return n;throw new Xi("End of file inside dictionary.")}return u(this.second,"stream")?!0===this.allowStreams?this.makeStream(n,t):n:(this.shift(),n);default:return e}if(Number.isInteger(e)){if(Number.isInteger(this.first)&&u(this.second,"R")){var h=o.get(e,this.first);return this.shift(),this.shift(),h}return e}return"string"==typeof e&&t?t.decryptString(e):e},t.prototype.findDiscreteDecodeInlineStreamEnd=function(t){var e,i,n=t.position,r=!1;for(e=t.getByte();-1!==e;)if(255===e){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:r=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:(i=t.getUnsignedInteger16())>2?t.skip(i-2):t.skip(-2)}if(r)break;e=t.getByte()}else e=t.getByte();var a=t.position-n;return-1===e?(t.skip(-a),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),a)},t.prototype.findDecodeInlineStreamEnd=function(t){for(var e,i=t.position;-1!==(e=t.getByte());)if(126===e){var n=t.position;for(e=t.peekByte();ti(e);)t.skip(),e=t.peekByte();if(62===e){t.skip();break}if(t.position>n){var r=t.peekBytes(2);if(69===r[0]&&73===r[1])break}}var a=t.position-i;return-1===e?(t.skip(-a),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),a)},t.prototype.findHexDecodeInlineStreamEnd=function(t){var e,i=t.position;for(e=t.getByte();-1!==e&&62!==e;)e=t.getByte();var n=t.position-i;return-1===e?(t.skip(-n),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),n)},t.prototype.inlineStreamSkipEI=function(t){var e,i=0;for(e=t.getByte();-1!==e;){if(0===i)i=69===e?1:0;else if(1===i)i=73===e?2:0;else if(2===i)break;e=t.getByte()}},t.prototype.makeInlineImage=function(t){for(var e,i=this.lexicalOperator,n=i.stream,r=new _(this.xref);!u(this.first,"ID")&&"EOF"!==this.first;){if(!(this.first instanceof a))throw new Ki("Dictionary key must be a name object");var h=this.first.name;if(this.shift(),"EOF"===this.first.name)break;r.set(h,this.getObject(t))}-1!==i.beginInlineImagePosition&&(e=n.position-i.beginInlineImagePosition);var c,d=r.get("F","Filter");if(d instanceof a)c=d.name;else if(Array.isArray(d)){var p=d[0]instanceof o?this.xref._fetch(d[0]):d[0];p&&(c=p.name)}var l,f=n.position;switch(c){case"DCT":case"DCTDecode":l=this.findDiscreteDecodeInlineStreamEnd(n);break;case"A85":case"ASCII85Decode":l=this.findDecodeInlineStreamEnd(n);break;case"AHx":case"ASCIIHexDecode":l=this.findHexDecodeInlineStreamEnd(n);break;default:l=this.findDefaultInlineStreamEnd(n)}var g,y=n.makeSubStream(f,l,r);if(l<1e3&&e<5552){var m=y.getBytes();y.reset();var b=n.position;n.position=i.beginInlineImagePosition;var v=n.getBytes(e);n.position=b,g=this._computeMaxNumber(m)+"_"+this._computeMaxNumber(v);var w=this.imageCache[g];if(void 0!==w)return this.second=s.get("EI"),this.shift(),w.reset(),w}return t&&(y=t.createStream(y,l)),(y=this.filter(y,r,l)).dictionary=r,void 0!==g&&(this.imageCache[g]=y),this.second=s.get("EI"),this.shift(),y},t.prototype._computeMaxNumber=function(t){for(var e=t.length,i=1,n=0,r=0;r<e;++r)n+=i+=255&t[r];return n%65521<<16|i%65521},t.prototype.makeStream=function(t,e){var i=this.lexicalOperator,n=i.stream;i.skipToNextLine();var r=n.position-1,a=t.get("Length");if(Number.isInteger(a)||(a=0),n.position=r+a,i.nextChar(),this.tryShift()&&u(this.second,"endstream"))this.shift();else{var s=new Uint8Array([101,110,100,115,116,114,101,97,109]),o=this._findStreamLength(r,s);if(o<0){var h=s.length-1,c=s.slice(0,h),_=this._findStreamLength(r,c);if(_>=0)ti(n.peekBytes(h+1)[h])&&(o=_);if(o<0)throw new Ki("Missing endstream command.")}a=o,i.nextChar(),this.shift(),this.shift()}return this.shift(),n=n.makeSubStream(r,a,t),e&&(n=e.createStream(n,a)),(n=this.filter(n,t,a)).dictionary=t,n},t.prototype.filter=function(t,e,i){var n=e.get("F","Filter"),r=e.get("DP","DecodeParms");if(n instanceof a)return this.makeFilter(t,n.name,i,r);var s=i;if(Array.isArray(n))for(var h=n,c=r,_=0;_<h.length;++_){if(!((n=h[_]instanceof o?this.xref._fetch(h[_]):h[_])instanceof a))throw new Ki("Bad filter name '"+n+"'");r=null,Array.isArray(c)&&_ in c&&(r=c[_]instanceof o?this.xref._fetch(c[_]):c[_]),t=this.makeFilter(t,n.name,s,r),s=null}return t},t.prototype.makeFilter=function(t,e,i,n){if(0===i)return new Q;try{return"Fl"===e||"FlateDecode"===e?n?new an(new en(t,i),i,n):new en(t,i):t}catch(t){return new Q}},t.prototype._findStreamLength=function(t,e){var i=this.lexicalOperator.stream;i.position=t;for(var n=e.length;i.position<i.end;){var r=i.peekBytes(2048),a=r.length-n;if(a<=0)break;for(var s=0;s<a;){for(var o=0;o<n&&r[s+o]===e[o];)o++;if(o>=n)return i.position+=s,i.position-t;s++}i.position+=a}return-1},t.prototype.findDefaultInlineStreamEnd=function(t){var e,i,n=t.position,r=0;for(e=t.getByte();-1!==e;){if(0===r)r=69===e?1:0;else if(1===r)r=73===e?2:0;else{if(2!==r)throw new Error("findDefaultInlineStreamEnd - invalid state.");if(32===e||10===e||13===e){i=t.position;for(var a=t.peekBytes(10),s=0,o=a.length;s<o;s++)if((0!==(e=a[s])||0===a[s+1])&&10!==e&&13!==e&&(e<32||e>127)){r=0;break}if(2!==r){e=t.getByte();continue}if(2===r)break}else r=0}e=t.getByte()}-1===e&&void 0!==i&&t.skip(-(t.position-i));var h=4;return t.skip(-h),e=t.peekByte(),t.skip(h),ti(e)||h--,t.position-h-n},t.prototype._checkEnd=function(){return"EOF"===this.first},t}(),cn=function(){function t(t){this.isValid=!1;var e=new hn(new on(t),null),i=e.getObject(),n=e.getObject(),r=e.getObject(),a=e.getObject();if(this.isValid=Number.isInteger(i)&&Number.isInteger(n)&&u(r,"obj")&&void 0!==a,this.isValid){var s=a.get("Linearized");this.isValid=void 0!==s&&s>0}if(this.isValid){var o=this.getInt(a,"L");if(o!==t.length)throw new Error("The L parameter in the linearization dictionary does not equal the stream length.");this.length=o,this.hints=this.getHints(a),this.objectNumberFirst=this.getInt(a,"O"),this.endFirst=this.getInt(a,"E"),this.pageCount=this.getInt(a,"N"),this.mainXRefEntriesOffset=this.getInt(a,"T"),this.pageFirst=a.has("P")?this.getInt(a,"P",!0):0}}return t.prototype.getInt=function(t,e,i){void 0===i&&(i=!1);var n=t.get(e);if(void 0!==n&&Number.isInteger(n)&&(i?n>=0:n>0))return n;throw new Error("The '"+e+"' parameter in the linearization dictionary is invalid.")},t.prototype.getHints=function(t){var e=t.getArray("H"),i=e.length;if(e&&(2===i||4===i)){for(var n=0;n<i;n++){var r=e[n];if(!(Number.isInteger(r)&&r>0))throw new Error("Hint ("+n+") in the linearization dictionary is invalid.")}return e}throw new Error("Hint array in the linearization dictionary is invalid.")},t}(),_n=(Hi=function(t,e){return(Hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Hi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),dn=function(){function t(t,e,i){this._defaultPasswordBytes=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);var n=t.get("Filter");if(!l(n,"Standard"))throw new Ki("unknown encryption method");this._filterName=n.name,this._dictionary=t;var r=t.get("V");if(!Number.isInteger(r)||1!==r&&2!==r&&4!==r&&5!==r)throw new Ki("unsupported encryption algorithm");this._algorithm=r;var s=t.get("Length");if(!s)if(r<=3)s=40;else{var o=t.get("CF"),h=t.get("StmF");if(o&&h){o.suppressEncryption=!0;var c=o.get(h.name);(s=c&&c.get("Length")||128)<40&&(s<<=3)}}if(!Number.isInteger(s)||s<40||s%8!=0)throw new Ki("invalid key length");var _=Xe(t.get("O")).subarray(0,32),d=Xe(t.get("U")).subarray(0,32),p=t.get("P"),u=t.get("R");this._encryptMetaData=(4===r||5===r)&&!1!==t.get("EncryptMetadata");var f,g,y=Xe(e);if(i&&(6===u&&(i=encodeURIComponent(i)),f=Xe(i)),5!==r)g=this._prepareKeyData(y,f,_,d,p,u,s,this._encryptMetaData);else{var m=Xe(t.get("O")),b=m.subarray(32,40),v=m.subarray(40,48),w=Xe(t.get("U")),S=w.subarray(0,48),P=w.subarray(32,40),A=w.subarray(40,48),x=Xe(t.get("OE")),k=Xe(t.get("UE"));g=this._createEncryptionKey(u,f,_,b,v,S,d,P,A,x,k)}if(!g){if(!i)throw new Error("Cannot open an encrypted document. The password is invalid.");var T=this._decodeUserPassword(f,_,u,s);g=this._prepareKeyData(y,T,_,d,p,u,s,this._encryptMetaData)}if(this._encryptionKey=g,r>=4){var R=t.get("CF");R&&(R.suppressEncryption=!0),this._cipherDictionary=R,this._stream=t.get("StmF")||a.get("Identity"),this._string=t.get("StrF")||a.get("Identity"),this._eff=t.get("EFF")||this._stream}}return Object.defineProperty(t.prototype,"_md5",{get:function(){return void 0===this._messageDigest&&(this._messageDigest=new pn),this._messageDigest},enumerable:!0,configurable:!0}),t.prototype._createEncryptionKey=function(t,e,i,n,r,a,s,o,h,c,_){e=e?e.subarray(0,Math.min(127,e.length)):new Uint8Array([]);var d=6===t?new mn:new yn;return d._checkUserPassword(e,o,s)?d._getUserKey(e,h,_):e.length&&d._checkOwnerPassword(e,n,a,i)?d._getOwnerKey(e,r,a,c):null},t.prototype._prepareKeyData=function(t,e,i,n,r,a,s,o){var h,c=new Uint8Array(40+i.length+t.length),_=0,d=0;if(e)for(h=Math.min(32,e.length);_<h;++_)c[Number.parseInt(_.toString(),10)]=e[Number.parseInt(_.toString(),10)];for(;_<32;)c[_++]=this._defaultPasswordBytes[d++];for(d=0,h=i.length;d<h;++d)c[_++]=i[Number.parseInt(d.toString(),10)];for(c[_++]=255&r,c[_++]=r>>8&255,c[_++]=r>>16&255,c[_++]=r>>>24&255,d=0,h=t.length;d<h;++d)c[_++]=t[Number.parseInt(d.toString(),10)];a>=4&&!o&&(c[_++]=255,c[_++]=255,c[_++]=255,c[_++]=255);var p=this._md5.hash(c,0,_),l=s>>3;if(a>=3)for(d=0;d<50;++d)p=this._md5.hash(p,0,l);var u,f=p.subarray(0,l);if(a>=3){for(_=0;_<32;++_)c[Number.parseInt(_.toString(),10)]=this._defaultPasswordBytes[Number.parseInt(_.toString(),10)];for(d=0,h=t.length;d<h;++d)c[_++]=t[Number.parseInt(d.toString(),10)];u=new vn(f)._encryptBlock(this._md5.hash(c,0,_)),h=f.length;var g=new Uint8Array(h);for(d=1;d<=19;++d){for(var y=0;y<h;++y)g[Number.parseInt(y.toString(),10)]=f[Number.parseInt(y.toString(),10)]^d;u=new vn(g)._encryptBlock(u)}for(d=0,h=u.length;d<h;++d)if(n[Number.parseInt(d.toString(),10)]!==u[Number.parseInt(d.toString(),10)])return null}else for(d=0,h=(u=new vn(f)._encryptBlock(this._defaultPasswordBytes)).length;d<h;++d)if(n[Number.parseInt(d.toString(),10)]!==u[Number.parseInt(d.toString(),10)])return null;return f},t.prototype._decodeUserPassword=function(t,e,i,n){for(var r=new Uint8Array(32),a=0,s=0,o=Math.min(32,t.length);a<o;++a)r[Number.parseInt(a.toString(),10)]=t[Number.parseInt(a.toString(),10)];for(;a<32;)r[a++]=this._defaultPasswordBytes[s++];var h,c=this._md5.hash(r,0,a),_=n>>3;if(i>=3)for(s=0;s<50;++s)c=this._md5.hash(c,0,c.length);if(i>=3){h=e;var d=new Uint8Array(_);for(s=19;s>=0;s--){for(var p=0;p<_;++p)d[Number.parseInt(p.toString(),10)]=c[Number.parseInt(p.toString(),10)]^s;h=new vn(d)._encryptBlock(h)}}else h=new vn(c.subarray(0,_))._encryptBlock(e);return h},t.prototype._createCipherTransform=function(t,e){if(4===this._algorithm||5===this._algorithm){var i=this._buildCipherConstructor(this._cipherDictionary,this._string,t,e,this._encryptionKey),n=this._buildCipherConstructor(this._cipherDictionary,this._stream,t,e,this._encryptionKey);return new xn(i,n)}var r=this._buildObjectKey(t,e,this._encryptionKey,!1);return new xn(new vn(r),new vn(r))},t.prototype._buildCipherConstructor=function(t,e,i,n,r){var a,s=t.get(e.name);if(s&&(a=s.get("CFM")),!a)return new An;switch(a.name){case"None":return new An;case"AESV2":return new Sn(this._buildObjectKey(i,n,r,!0));case"AESV3":return new Pn(r);case"V2":return new vn(this._buildObjectKey(i,n,r,!1))}throw new Ki("Unknown cryptography method")},t.prototype._buildObjectKey=function(t,e,i,n){void 0===n&&(n=!1);var r,a=new Uint8Array(i.length+9);for(r=0;r<i.length;++r)a[Number.parseInt(r.toString(),10)]=i[Number.parseInt(r.toString(),10)];return a[r++]=255&t,a[r++]=t>>8&255,a[r++]=t>>16&255,a[r++]=255&e,a[r++]=e>>8&255,n&&(a[r++]=115,a[r++]=65,a[r++]=108,a[r++]=84),this._md5.hash(a,0,r).subarray(0,Math.min(i.length+5,16))},t}(),pn=function(){function t(){this._r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),this._k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551])}return t.prototype.hash=function(t,e,i){for(var n=1732584193,r=-271733879,a=-1732584194,s=271733878,o=i+72&-64,h=new Uint8Array(o),c=0,_=0;c<i;++c)h[Number.parseInt(c.toString(),10)]=t[e++];h[c++]=128;for(var d=o-8;c<d;)h[c++]=0;h[c++]=i<<3&255,h[c++]=i>>5&255,h[c++]=i>>13&255,h[c++]=i>>21&255,h[c++]=i>>>29&255,h[c++]=0,h[c++]=0,h[c++]=0;var p=new Int32Array(16);for(c=0;c<o;){for(_=0;_<16;++_,c+=4)p[Number.parseInt(_.toString(),10)]=h[Number.parseInt(c.toString(),10)]|h[c+1]<<8|h[c+2]<<16|h[c+3]<<24;var l=n,u=r,f=a,g=s,y=void 0,m=void 0;for(_=0;_<64;++_){_<16?(y=u&f|~u&g,m=_):_<32?(y=g&u|~g&f,m=5*_+1&15):_<48?(y=u^f^g,m=3*_+5&15):(y=f^(u|~g),m=7*_&15);var b=g,v=l+y+this._k[Number.parseInt(_.toString(),10)]+p[Number.parseInt(m.toString(),10)]|0,w=this._r[Number.parseInt(_.toString(),10)];g=f,f=u,u=u+(v<<w|v>>>32-w)|0,l=b}n=n+l|0,r=r+u|0,a=a+f|0,s=s+g|0}return new Uint8Array([255&n,n>>8&255,n>>16&255,n>>>24&255,255&r,r>>8&255,r>>16&255,r>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255])},t}(),ln=function(){function t(){}return t.prototype._rotateRight=function(t,e){return t>>>e|t<<32-e},t.prototype._sigma=function(t){return this._rotateRight(t,2)^this._rotateRight(t,13)^this._rotateRight(t,22)},t.prototype._sigmaPrime=function(t){return this._rotateRight(t,6)^this._rotateRight(t,11)^this._rotateRight(t,25)},t.prototype._littleSigma=function(t){return this._rotateRight(t,7)^this._rotateRight(t,18)^t>>>3},t.prototype._littleSigmaPrime=function(t){return this._rotateRight(t,17)^this._rotateRight(t,19)^t>>>10},t.prototype._hash=function(t,e,i){for(var n,r=1779033703,a=3144134277,s=1013904242,o=2773480762,h=1359893119,c=2600822924,_=528734635,d=1541459225,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=64*Math.ceil((i+9)/64),u=new Uint8Array(l),f=0;f<i;++f)u[Number.parseInt(f.toString(),10)]=t[e++];u[f++]=128;for(var g=l-8;f<g;)u[f++]=0;u[f++]=0,u[f++]=0,u[f++]=0,u[f++]=i>>>29&255,u[f++]=i>>21&255,u[f++]=i>>13&255,u[f++]=i>>5&255,u[f++]=i<<3&255;var y=new Uint32Array(64);for(f=0;f<l;){for(n=0;n<16;++n)y[Number.parseInt(n.toString(),10)]=u[Number.parseInt(f.toString(),10)]<<24|u[f+1]<<16|u[f+2]<<8|u[f+3],f+=4;for(n=16;n<64;++n)y[Number.parseInt(n.toString(),10)]=this._littleSigmaPrime(y[n-2])+y[n-7]+this._littleSigma(y[n-15])+y[n-16]|0;var m=r,b=a,v=s,w=o,S=h,P=c,A=_,x=d,k=void 0,T=void 0;for(n=0;n<64;++n)k=x+this._sigmaPrime(S)+(S&P^~S&A)+p[Number.parseInt(n.toString(),10)]+y[Number.parseInt(n.toString(),10)],T=this._sigma(m)+(m&b^m&v^b&v),x=A,A=P,P=S,S=w+k|0,w=v,v=b,b=m,m=k+T|0;r=r+m|0,a=a+b|0,s=s+v|0,o=o+w|0,h=h+S|0,c=c+P|0,_=_+A|0,d=d+x|0}return new Uint8Array([r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o,h>>24&255,h>>16&255,h>>8&255,255&h,c>>24&255,c>>16&255,c>>8&255,255&c,_>>24&255,_>>16&255,_>>8&255,255&_,d>>24&255,d>>16&255,d>>8&255,255&d])},t}(),un=function(){function t(){this._k=[new fn(1116352408,3609767458),new fn(1899447441,602891725),new fn(3049323471,3964484399),new fn(3921009573,2173295548),new fn(961987163,4081628472),new fn(1508970993,3053834265),new fn(2453635748,2937671579),new fn(2870763221,3664609560),new fn(3624381080,2734883394),new fn(310598401,1164996542),new fn(607225278,1323610764),new fn(1426881987,3590304994),new fn(1925078388,4068182383),new fn(2162078206,991336113),new fn(2614888103,633803317),new fn(3248222580,3479774868),new fn(3835390401,2666613458),new fn(4022224774,944711139),new fn(264347078,2341262773),new fn(604807628,2007800933),new fn(770255983,1495990901),new fn(1249150122,1856431235),new fn(1555081692,3175218132),new fn(1996064986,2198950837),new fn(2554220882,3999719339),new fn(2821834349,766784016),new fn(2952996808,2566594879),new fn(3210313671,3203337956),new fn(3336571891,1034457026),new fn(3584528711,2466948901),new fn(113926993,3758326383),new fn(338241895,168717936),new fn(666307205,1188179964),new fn(773529912,1546045734),new fn(1294757372,1522805485),new fn(1396182291,2643833823),new fn(1695183700,2343527390),new fn(1986661051,1014477480),new fn(2177026350,1206759142),new fn(2456956037,344077627),new fn(2730485921,1290863460),new fn(2820302411,3158454273),new fn(3259730800,3505952657),new fn(3345764771,106217008),new fn(3516065817,3606008344),new fn(3600352804,1432725776),new fn(4094571909,1467031594),new fn(275423344,851169720),new fn(430227734,3100823752),new fn(506948616,1363258195),new fn(659060556,3750685593),new fn(883997877,3785050280),new fn(958139571,3318307427),new fn(1322822218,3812723403),new fn(1537002063,2003034995),new fn(1747873779,3602036899),new fn(1955562222,1575990012),new fn(2024104815,1125592928),new fn(2227730452,2716904306),new fn(2361852424,442776044),new fn(2428436474,593698344),new fn(2756734187,3733110249),new fn(3204031479,2999351573),new fn(3329325298,3815920427),new fn(3391569614,3928383900),new fn(3515267271,566280711),new fn(3940187606,3454069534),new fn(4118630271,4000239992),new fn(116418474,1914138554),new fn(174292421,2731055270),new fn(289380356,3203993006),new fn(460393269,320620315),new fn(685471733,587496836),new fn(852142971,1086792851),new fn(1017036298,365543100),new fn(1126000580,2618297676),new fn(1288033470,3409855158),new fn(1501505948,4234509866),new fn(1607167915,987167468),new fn(1816402316,1246189591)]}return t.prototype._sigma=function(t,e,i){t.assign(e),t.rotateRight(28),i.assign(e),i.rotateRight(34),t.xor(i),i.assign(e),i.rotateRight(39),t.xor(i)},t.prototype._sigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(14),i.assign(e),i.rotateRight(18),t.xor(i),i.assign(e),i.rotateRight(41),t.xor(i)},t.prototype._littleSigma=function(t,e,i){t.assign(e),t.rotateRight(1),i.assign(e),i.rotateRight(8),t.xor(i),i.assign(e),i.shiftRight(7),t.xor(i)},t.prototype._littleSigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(19),i.assign(e),i.rotateRight(61),t.xor(i),i.assign(e),i.shiftRight(6),t.xor(i)},t.prototype._hash=function(t,e,i,n){var r,a,s,o,h,c,_,d;void 0===n&&(n=!1),n?(r=new fn(3418070365,3238371032),a=new fn(1654270250,914150663),s=new fn(2438529370,812702999),o=new fn(355462360,4144912697),h=new fn(1731405415,4290775857),c=new fn(2394180231,1750603025),_=new fn(3675008525,1694076839),d=new fn(1203062813,3204075428)):(r=new fn(1779033703,4089235720),a=new fn(3144134277,2227873595),s=new fn(1013904242,4271175723),o=new fn(2773480762,1595750129),h=new fn(1359893119,2917565137),c=new fn(2600822924,725511199),_=new fn(528734635,4215389547),d=new fn(1541459225,327033209));var p,l=128*Math.ceil((i+17)/128),u=new Uint8Array(l);for(p=0;p<i;++p)u[Number.parseInt(p.toString(),10)]=t[e++];u[p++]=128;for(var f=l-16;p<f;)u[p++]=0;u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=0,u[p++]=i>>>29&255,u[p++]=i>>21&255,u[p++]=i>>13&255,u[p++]=i>>5&255,u[p++]=i<<3&255;var g=new Array(80);for(p=0;p<80;p++)g[Number.parseInt(p.toString(),10)]=new fn(0,0);var y,m,b=new fn(0,0),v=new fn(0,0),w=new fn(0,0),S=new fn(0,0),P=new fn(0,0),A=new fn(0,0),x=new fn(0,0),k=new fn(0,0),T=new fn(0,0),R=new fn(0,0),I=new fn(0,0),F=new fn(0,0);for(p=0;p<l;){var N=void 0;for(N=0;N<16;++N)g[Number.parseInt(N.toString(),10)].high=u[Number.parseInt(p.toString(),10)]<<24|u[p+1]<<16|u[p+2]<<8|u[p+3],g[Number.parseInt(N.toString(),10)].low=u[p+4]<<24|u[p+5]<<16|u[p+6]<<8|u[p+7],p+=8;for(N=16;N<80;++N)y=g[Number.parseInt(N.toString(),10)],this._littleSigmaPrime(y,g[N-2],F),y.add(g[N-7]),this._littleSigma(I,g[N-15],F),y.add(I),y.add(g[N-16]);for(b.assign(r),v.assign(a),w.assign(s),S.assign(o),P.assign(h),A.assign(c),x.assign(_),k.assign(d),N=0;N<80;++N)T.assign(k),this._sigmaPrime(I,P,F),T.add(I),I.assign(P),I.and(A),F.assign(P),F.not(),F.and(x),I.xor(F),T.add(I),T.add(this._k[Number.parseInt(N.toString(),10)]),T.add(g[Number.parseInt(N.toString(),10)]),this._sigma(R,b,F),I.assign(b),I.and(v),F.assign(b),F.and(w),I.xor(F),F.assign(v),F.and(w),I.xor(F),R.add(I),y=k,k=x,x=A,A=P,S.add(T),P=S,S=w,w=v,v=b,y.assign(T),y.add(R),b=y;r.add(b),a.add(v),s.add(w),o.add(S),h.add(P),c.add(A),_.add(x),d.add(k)}return n?(m=new Uint8Array(48),r.copyTo(m,0),a.copyTo(m,8),s.copyTo(m,16),o.copyTo(m,24),h.copyTo(m,32),c.copyTo(m,40)):(m=new Uint8Array(64),r.copyTo(m,0),a.copyTo(m,8),s.copyTo(m,16),o.copyTo(m,24),h.copyTo(m,32),c.copyTo(m,40),_.copyTo(m,48),d.copyTo(m,56)),m},t}(),fn=function(){function t(t,e){this.high=0|t,this.low=0|e}return t.prototype.and=function(t){this.high&=t.high,this.low&=t.low},t.prototype.or=function(t){this.high|=t.high,this.low|=t.low},t.prototype.not=function(){this.high=~this.high,this.low=~this.low},t.prototype.xor=function(t){this.high^=t.high,this.low^=t.low},t.prototype.shiftRight=function(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)},t.prototype.shiftLeft=function(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)},t.prototype.rotateRight=function(t){var e,i;32&t?(i=this.low,e=this.high):(e=this.low,i=this.high),t&=31,this.low=e>>>t|i<<32-t,this.high=i>>>t|e<<32-t},t.prototype.add=function(t){var e=(this.low>>>0)+(t.low>>>0),i=(this.high>>>0)+(t.high>>>0);e>4294967295&&(i+=1),this.low=0|e,this.high=0|i},t.prototype.copyTo=function(t,e){t[Number.parseInt(e.toString(),10)]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low},t.prototype.assign=function(t){this.high=t.high,this.low=t.low},t}(),gn=function(){function t(){}return Object.defineProperty(t.prototype,"_sha256",{get:function(){return void 0===this._sha256Obj&&(this._sha256Obj=new ln),this._sha256Obj},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_sha512",{get:function(){return void 0===this._sha512Obj&&(this._sha512Obj=new un),this._sha512Obj},enumerable:!0,configurable:!0}),t}(),yn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.prototype._checkOwnerPassword=function(t,e,i,n){var r=new Uint8Array(t.length+56);return r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length),Qe(this._sha256._hash(r,0,r.length),n)},e.prototype._checkUserPassword=function(t,e,i){var n=new Uint8Array(t.length+8);return n.set(t,0),n.set(e,t.length),Qe(this._sha256._hash(n,0,n.length),i)},e.prototype._getOwnerKey=function(t,e,i,n){var r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length);var a=this._sha256._hash(r,0,r.length);return new Pn(a)._decryptBlock(n,!1,new Uint8Array(16))},e.prototype._getUserKey=function(t,e,i){var n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);var r=this._sha256._hash(n,0,n.length);return new Pn(r)._decryptBlock(i,!1,new Uint8Array(16))},e}(gn),mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.prototype._checkOwnerPassword=function(t,e,i,n){var r=new Uint8Array(t.length+56);return r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length),Qe(this._hash(t,r,i),n)},e.prototype._checkUserPassword=function(t,e,i){var n=new Uint8Array(t.length+8);return n.set(t,0),n.set(e,t.length),Qe(this._hash(t,n,new Uint8Array([])),i)},e.prototype._getOwnerKey=function(t,e,i,n){var r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length);var a=this._hash(t,r,i);return new Pn(a)._decryptBlock(n,!1,new Uint8Array(16))},e.prototype._getUserKey=function(t,e,i){var n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);var r=this._hash(t,n,new Uint8Array([]));return new Pn(r)._decryptBlock(i,!1,new Uint8Array(16))},e.prototype._hash=function(t,e,i){for(var n=this._sha256._hash(e,0,e.length).subarray(0,32),r=new Uint8Array([0]),a=0;a<64||r[r.length-1]>a-32;){var s=t.length+n.length+i.length,o=new Uint8Array(s),h=0;o.set(t,h),h+=t.length,o.set(n,h),h+=n.length,o.set(i,h);for(var c=new Uint8Array(64*s),_=0,d=0;_<64;_++)c.set(o,d),d+=s;r=new Sn(n.subarray(0,16))._encrypt(c,n.subarray(16,32));for(var p=0,l=0;l<16;l++)p*=1,p%=3,p+=(r[Number.parseInt(l.toString(),10)]>>>0)%3,p%=3;2===p?n=this._sha512._hash(r,0,r.length):1===p?n=this._sha512._hash(r,0,r.length,!0):0===p&&(n=this._sha256._hash(r,0,r.length)),a++}return n.subarray(0,32)},e}(gn),bn=function(){},vn=function(t){function e(e){var i=t.call(this)||this;i._a=0,i._b=0;for(var n=new Uint8Array(256),r=0;r<256;++r)n[Number.parseInt(r.toString(),10)]=r;for(var a=e.length,s=(r=0,0);r<256;++r){var o=n[Number.parseInt(r.toString(),10)];s=s+o+e[r%a]&255,n[Number.parseInt(r.toString(),10)]=n[Number.parseInt(s.toString(),10)],n[Number.parseInt(s.toString(),10)]=o}return i._s=n,i}return _n(e,t),e.prototype._encryptBlock=function(t){for(var e=this._a,i=this._b,n=this._s,r=t.length,a=new Uint8Array(r),s=0;s<r;++s){e=e+1&255;var o=n[Number.parseInt(e.toString(),10)];i=i+o&255;var h=n[Number.parseInt(i.toString(),10)];n[Number.parseInt(e.toString(),10)]=h,n[Number.parseInt(i.toString(),10)]=o,a[Number.parseInt(s.toString(),10)]=t[Number.parseInt(s.toString(),10)]^n[o+h&255]}return this._a=e,this._b=i,a},e.prototype._decryptBlock=function(t){return this._encryptBlock(t)},e.prototype._encrypt=function(t){return this._encryptBlock(t)},e}(bn),wn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._buffer=new Uint8Array(16),e._position=0,e._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),e._inverseS=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),e._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),e}return _n(e,t),Object.defineProperty(e.prototype,"_mixCol",{get:function(){if(void 0===this._mixC){this._mixC=new Uint8Array(256);for(var t=0;t<256;t++)this._mixC[Number.parseInt(t.toString(),10)]=t<128?t<<1:t<<1^27}return this._mixC},enumerable:!0,configurable:!0}),e.prototype._decrypt=function(t,e){var i,n,r,a=new Uint8Array(16);a.set(t);for(var s=0,o=this._keySize;s<16;++s,++o)a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(var h=this._cyclesOfRepetition-1;h>=1;--h){i=a[13],a[13]=a[9],a[9]=a[5],a[5]=a[1],a[1]=i,i=a[14],n=a[10],a[14]=a[6],a[10]=a[2],a[6]=i,a[2]=n,i=a[15],n=a[11],r=a[7],a[15]=a[3],a[11]=i,a[7]=n,a[3]=r;for(s=0;s<16;++s)a[Number.parseInt(s.toString(),10)]=this._inverseS[a[Number.parseInt(s.toString(),10)]];for(s=0,o=16*h;s<16;++s,++o)a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(s=0;s<16;s+=4){var c=this._mix[a[Number.parseInt(s.toString(),10)]],_=this._mix[a[s+1]],d=this._mix[a[s+2]],p=this._mix[a[s+3]];i=c^_>>>8^_<<24^d>>>16^d<<16^p>>>24^p<<8,a[Number.parseInt(s.toString(),10)]=i>>>24&255,a[s+1]=i>>16&255,a[s+2]=i>>8&255,a[s+3]=255&i}}i=a[13],a[13]=a[9],a[9]=a[5],a[5]=a[1],a[1]=i,i=a[14],n=a[10],a[14]=a[6],a[10]=a[2],a[6]=i,a[2]=n,i=a[15],n=a[11],r=a[7],a[15]=a[3],a[11]=i,a[7]=n,a[3]=r;for(s=0;s<16;++s)a[Number.parseInt(s.toString(),10)]=this._inverseS[a[Number.parseInt(s.toString(),10)]],a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(s.toString(),10)];return a},e.prototype._encryptBlock=function(t,e){var i,n,r,a=this._s,s=new Uint8Array(16);s.set(t);for(var o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(var h=1;h<this._cyclesOfRepetition;h++){for(o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]=a[s[Number.parseInt(o.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=n,r=s[3],n=s[7],i=s[11],s[3]=s[15],s[7]=r,s[11]=n,s[15]=i;for(o=0;o<16;o+=4){var c=s[o+0],_=s[o+1],d=s[o+2],p=s[o+3];i=c^_^d^p,s[o+0]^=i^this._mixCol[c^_],s[o+1]^=i^this._mixCol[_^d],s[o+2]^=i^this._mixCol[d^p],s[o+3]^=i^this._mixCol[p^c]}o=0;for(var l=16*h;o<16;++o,++l)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(l.toString(),10)]}for(o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]=a[s[Number.parseInt(o.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=n,r=s[3],n=s[7],i=s[11],s[3]=s[15],s[7]=r,s[11]=n,s[15]=i;for(o=0,l=this._keySize;o<16;++o,++l)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(l.toString(),10)];return s},e.prototype._decryptBlockHelper=function(t,e){for(var i=t.length,n=this._buffer,r=this._position,a=[],s=this._iv,o=0;o<i;++o)if(n[Number.parseInt(r.toString(),10)]=t[Number.parseInt(o.toString(),10)],!(++r<16)){for(var h=this._decrypt(n,this._key),c=0;c<16;++c)h[Number.parseInt(c.toString(),10)]^=s[Number.parseInt(c.toString(),10)];s=n,a.push(h),n=new Uint8Array(16),r=0}if(this._buffer=n,this._bufferLength=r,this._iv=s,0===a.length)return new Uint8Array(0);var _=16*a.length;if(e){var d=a[a.length-1],p=d[15];if(p<=16){o=15;for(var l=16-p;o>=l;--o)if(d[Number.parseInt(o.toString(),10)]!==p){p=0;break}_-=p,a[a.length-1]=d.subarray(0,16-p)}}var u=new Uint8Array(_);for(o=0,c=0;o<a.length;++o,c+=16)u.set(a[Number.parseInt(o.toString(),10)],c);return u},e.prototype._decryptBlock=function(t,e,i){var n=t.length,r=this._buffer,a=this._position;if(i)this._iv=i;else{for(var s=0;a<16&&s<n;++s,++a)r[Number.parseInt(a.toString(),10)]=t[Number.parseInt(s.toString(),10)];if(a<16)return this._bufferLength=a,new Uint8Array(0);this._iv=r,t=t.subarray(16)}return this._buffer=new Uint8Array(16),this._bufferLength=0,this._decryptBlock=this._decryptBlockHelper,this._decryptBlock(t,e)},e.prototype._encrypt=function(t,e){var i=t.length,n=this._buffer,r=this._position,a=[];e||(e=new Uint8Array(16));for(var s=0;s<i;++s)if(n[Number.parseInt(r.toString(),10)]=t[Number.parseInt(s.toString(),10)],!(++r<16)){for(var o=0;o<16;++o)n[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(o.toString(),10)];var h=this._encryptBlock(n,this._key);e=h,a.push(h),n=new Uint8Array(16),r=0}if(this._buffer=n,this._bufferLength=r,this._iv=e,0===a.length)return new Uint8Array(0);var c=16*a.length,_=new Uint8Array(c);for(s=0,o=0;s<a.length;++s,o+=16)_.set(a[Number.parseInt(s.toString(),10)],o);return _},e}(bn),Sn=function(t){function e(e){var i=t.call(this)||this;return i._cyclesOfRepetition=10,i._keySize=160,i._key=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),i._key=i._expandKey(e),i}return _n(e,t),e.prototype._expandKey=function(t){var e=this._s,i=this._key,n=new Uint8Array(176);n.set(t);for(var r=16,a=1;r<176;++a){var s=n[r-3],o=n[r-2],h=n[r-1],c=n[r-4];s=e[Number.parseInt(s.toString(),10)],o=e[Number.parseInt(o.toString(),10)],h=e[Number.parseInt(h.toString(),10)],c=e[Number.parseInt(c.toString(),10)],s^=i[Number.parseInt(a.toString(),10)];for(var _=0;_<4;++_)n[Number.parseInt(r.toString(),10)]=s^=n[r-16],n[r+1]=o^=n[r-15],n[r+2]=h^=n[r-14],n[r+3]=c^=n[r-13],r+=4}return n},e}(wn),Pn=function(t){function e(e){var i=t.call(this)||this;return i._cyclesOfRepetition=14,i._keySize=224,i._key=i._expandKey(e),i}return _n(e,t),e.prototype._expandKey=function(t){var e=this._s,i=new Uint8Array(240);i.set(t);for(var n,r,a,s,o=1,h=32,c=1;h<240;++c){h%32==16?(n=e[Number.parseInt(n.toString(),10)],r=e[Number.parseInt(r.toString(),10)],a=e[Number.parseInt(a.toString(),10)],s=e[Number.parseInt(s.toString(),10)]):h%32==0&&(n=i[h-3],r=i[h-2],a=i[h-1],s=i[h-4],n=e[Number.parseInt(n.toString(),10)],r=e[Number.parseInt(r.toString(),10)],a=e[Number.parseInt(a.toString(),10)],s=e[Number.parseInt(s.toString(),10)],n^=o,(o<<=1)>=256&&(o=255&(27^o)));for(var _=0;_<4;++_)i[Number.parseInt(c.toString(),10)]=n^=i[h-32],i[h+1]=r^=i[h-31],i[h+2]=a^=i[h-30],i[h+3]=s^=i[h-29],h+=4}return i},e}(wn),An=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _n(e,t),e.prototype._decryptBlock=function(t){return t},e.prototype._encrypt=function(t){return t},e}(bn),xn=function(){function t(t,e){this._stringCipher=t,this._streamCipher=e}return t.prototype.createStream=function(t,e){return new tt(t,e,this._streamCipher)},t.prototype.decryptString=function(t){return Ze(this._stringCipher._decryptBlock(Xe(t),!0))},t.prototype.encryptString=function(t){if(this._stringCipher instanceof wn){var e=16-t.length%16;t+=String.fromCharCode(e).repeat(e);var i=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(i);else for(var n=0;n<16;n++)i[Number.parseInt(n.toString(),10)]=Math.floor(256*Math.random());var r=this._stringCipher._encrypt(Xe(t),i),a=new Uint8Array(16+r.length);return a.set(i),a.set(r,16),Ze(a)}return Ze(this._stringCipher._encrypt(Xe(t)))},t}(),kn=function(){function e(t,e){this._version="",this._newLine="\r\n",this._password=e,this._document=t,this._stream=t._stream,this._entries=[],this._crossReferencePosition=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new h}return e.prototype._setStartXRef=function(t){this._startXRefQueue=[t],this._prevStartXref=t},e.prototype._parse=function(e){var i;(i=e?this._indexObjects():this._readXRef()).assignXref(this),this._nextReferenceNumber=i.get("Size"),this._trailer=i;var n=i.get("Encrypt");if(n){this._ids=i.get("ID");var r=this._ids&&this._ids.length?this._ids[0]:"";n.suppressEncryption=!0,this._encrypt=new dn(n,r,this._password),this._type=t.PdfCrossReferenceType.stream}var a=!1;try{var s=i.get("Root");if(s)s.get("Pages")&&(this._root=s,a=!0)}catch(t){throw new qi("Invalid cross reference","InvalidXRef")}if(!a)throw new qi("Invalid cross reference",e?"InvalidXRef":"XRefParseException")},e.prototype._getEntry=function(t){var e=this._entries[t];return e&&!e.free&&e.offset?e:null},e.prototype._fetch=function(t,e){var i;if(!(t instanceof o))throw new Error("ref object is not a reference");var n=t.objectNumber,r=this._cacheMap.get(t);if(void 0!==r)return r instanceof _&&!r.objId&&(r.objId=n),r;var a=this._getEntry(n);if(null===a)return this._cacheMap.set(t,a),a;if(this._pendingRefs.has(t))throw this._pendingRefs.remove(t),new Error("circular reference");this._pendingRefs.put(t);try{i=a.uncompressed?this._fetchUncompressed(t,a,e):this._fetchCompressed(t,a),this._pendingRefs.remove(t)}catch(e){throw this._pendingRefs.remove(t),e}return i},e.prototype._fetchUncompressed=function(t,e,i){var n=t.generationNumber,r=t.objectNumber;if(e.gen!==n)throw new qi("Inconsistent generation in XRef: "+t,"XRefEntryException");var a,s=this._stream.makeSubStream(e.offset+this._stream.start,void 0),o=new hn(new on(s),this,!0),h=o.getObject(),c=o.getObject(),d=o.getObject();if(h!==r||c!==n||void 0===d)throw new qi("Bad (uncompressed) XRef entry: "+t,"XRefEntryException");return(a=this._encrypt&&!i?o.getObject(this._encrypt._createCipherTransform(t.objectNumber,t.generationNumber)):o.getObject())instanceof q||this._cacheMap.set(t,a),a instanceof _?a.objId=t.toString():a instanceof q&&(a.dictionary.objId=t.toString()),a},e.prototype._fetchCompressed=function(t,e){var i=e.offset,n=this._fetch(o.get(i,0));if(void 0===n)throw new Ki("bad ObjStm stream");var r=n.dictionary.get("First"),a=n.dictionary.get("N"),s=t.generationNumber;if(!Number.isInteger(r)||!Number.isInteger(a))throw new Ki("invalid first and n parameters for ObjStm stream");for(var h=new hn(new on(n),this,!0),c=new Array(a),d=new Array(a),p=0;p<a;++p){var l=h.getObject();if(!Number.isInteger(l))throw new Ki("invalid object number in the ObjStm stream: "+l);var u=h.getObject();if(!Number.isInteger(u))throw new Ki("invalid object offset in the ObjStm stream: "+u);c[p]=l,d[p]=u}var f=(n.start||0)+r,g=new Array(a);for(p=0;p<a;++p){var y=p<a-1?d[p+1]-d[p]:void 0;if(y<0)throw new Ki("Invalid offset in the ObjStm stream.");var m=(h=new hn(new on(n.makeSubStream(f+d[p],y,n.dictionary)),this,!0)).getObject();if(g[p]=m,!(m instanceof q)){l=c[p];var b=this._entries[l];if(b&&b.offset===i&&b.gen===p){var v=l+" "+s;this._cacheMap.set(o.get(l,s),m),m instanceof _&&(m.objId=v)}}}var w=g[e.gen];if(void 0===w)throw new qi("Bad (compressed) XRef entry: "+t,"XRefEntryException");return w},e.prototype._readXRef=function(e){void 0===e&&(e=!1);var i=this._stream,n=new Set;try{for(;this._startXRefQueue.length;){var r=this._startXRefQueue[0];if(this._prevStartXref<r&&(this._prevStartXref=r),n.has(r))this._startXRefQueue.shift();else{n.add(r),i.position=r+i.start;var a=new hn(new on(i),this,!0),s=a.getObject(),h=void 0;if(u(s,"xref")){if(void 0===this._type&&(this._type=t.PdfCrossReferenceType.table),h=this._processXRefTable(a),this._topDictionary||(this._topDictionary=h),s=h.get("XRefStm"),Number.isInteger(s)){var c=s;c in this._crossReferencePosition||(this._crossReferencePosition[c]=1,this._startXRefQueue.push(c))}}else{if(!Number.isInteger(s))throw new Ki("Invalid XRef stream header");void 0===this._type&&(this._type=t.PdfCrossReferenceType.stream);var _=a.getObject(),d=a.getObject();if(s=a.getObject(),!(void 0!==_&&Number.isInteger(_)&&u(d,"obj")&&s instanceof q))throw new Ki("Invalid cross reference stream");if(h=this._processXRefStream(s),this._topDictionary||(this._topDictionary=h),!h)throw new Ki("Failed to read XRef stream")}s=h.get("Prev"),Number.isInteger(s)?this._startXRefQueue.push(s):s instanceof o&&this._startXRefQueue.push(s.objectNumber),this._startXRefQueue.shift()}}return this._topDictionary}catch(t){this._startXRefQueue.shift()}if(!e)throw new qi("Invalid cross reference","XRefParseException")},e.prototype._readToken=function(t,e){for(var i="",n=t[e];10!==n&&13!==n&&60!==n&&!(++e>=t.length);)i+=String.fromCharCode(n),n=t[e];return i},e.prototype._skipUntil=function(t,e,i){for(var n=i.length,r=t.length,a=0;e<r;){for(var s=0;s<n&&t[e+s]===i[s];)++s;if(s>=n)break;e++,a++}return a},e.prototype._indexObjects=function(){var t=/^(\d+)\s+(\d+)\s+obj\b/,e=/\bendobj[\b\s]$/,i=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,n=new Uint8Array([116,114,97,105,108,101,114]),r=new Uint8Array([115,116,97,114,116,120,114,101,102]),a=new Uint8Array([111,98,106]),s=new Uint8Array([47,88,82,101,102]);this._entries.length=0,this._cacheMap.clear();var o=this._stream;o.position=0;for(var h,c=o.getBytes(),d=c.length,p=o.start,l=[],f=[];p<d;){var g=c[p];if(9!==g&&10!==g&&13!==g&&32!==g)if(37!==g){var y=this._readToken(c,p),m=void 0;if(y.startsWith("xref")&&(4===y.length||/\s/.test(y[4])))p+=this._skipUntil(c,p,n),l.push(p),p+=this._skipUntil(c,p,r);else if(m=t.exec(y)){var b=0|Number.parseInt(m[1]),v=0|Number.parseInt(m[2]),w=void 0,S=p+y.length,P=!1;if(this._entries[b]){if(this._entries[b].gen===v)try{var A=o.makeSubStream(S,o.length-S),x=new on(A);(M=new hn(x,null)).getObject(),P=!0}catch(t){P=!(t instanceof Xi)}}else P=!0;if(P){var k=new Tn;k.offset=p-o.start,k.gen=v,k.uncompressed=!0,this._entries[b]=k}for(;S<c.length;){var T=S+this._skipUntil(c,S,a)+4;w=T-p;var R=Math.max(T-25,S),I=Ze(c.subarray(R,T));if(e.test(I))break;var F=i.exec(I);if(F&&F[1]){w-=F[1].length;break}S=T}var N=c.subarray(p,p+w),C=this._skipUntil(N,0,s);C<w&&N[C+5]<64&&(f.push(p-o.start),this._crossReferencePosition[p-o.start]=1),p+=w}else y.startsWith("trailer")&&(7===y.length||/\s/.test(y[7]))?(l.push(p),p+=this._skipUntil(c,p,r)):p+=y.length+1}else do{if(++p>=d)break;g=c[p]}while(10!==g&&13!==g);else++p}for(var B=0;B<f.length;++B)this._startXRefQueue.push(f[B]),this._readXRef(!0);for(B=0;B<l.length;++B){var M;if(o.position=l[B],u((M=new hn(new on(o),this,!0,!0)).getObject(),"trailer")){var L=M.getObject();if(L instanceof _){try{var O=L.get("Root");if(!(O instanceof _))continue;var E=O.get("Pages");if(!(E instanceof _))continue;var z=E.get("Count");if(void 0===z||!Number.isInteger(z))continue}catch(t){continue}if(L.has("ID"))return L;h=L}}}if(h)return h;if(this._topDictionary)return this._topDictionary;throw new qi("Invalid PDF structure.","InvalidPDFException")},e.prototype._processXRefTable=function(t){if(void 0===this._tableState){var e=new Rn;e.entryNum=0,e.streamPos=t.lexicalOperator.stream.position,e.parserBuf1=t.first,e.parserBuf2=t.second,this._tableState=e}if(!u(this._readXRefTable(t),"trailer"))throw new Ki("Invalid XRef table: could not find trailer dictionary");var i,n=t.getObject();if(n&&(n instanceof _?i=n:n instanceof q&&n.dictionary&&(i=n.dictionary)),!i)throw new Ki("Invalid cross reference: could not parse trailer dictionary");return this._tableState=void 0,i},e.prototype._readXRefTable=function(t){var e,i=t.lexicalOperator.stream;for(i.position=this._tableState.streamPos,t.first=this._tableState.parserBuf1,t.second=this._tableState.parserBuf2;;){if(void 0===this._tableState.firstEntryNum||void 0===this._tableState.entryCount){if(u(e=t.getObject(),"trailer"))break;this._tableState.firstEntryNum=e,this._tableState.entryCount=t.getObject()}var n=this._tableState.firstEntryNum,r=this._tableState.entryCount;if(!Number.isInteger(n)||!Number.isInteger(r))throw new Ki("Invalid cross reference: wrong types in subsection header");for(var a=this._tableState.entryNum;a<r;a++){this._tableState.streamPos=i.position,this._tableState.entryNum=a,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second;var s=new Tn;s.offset=t.getObject(),s.gen=t.getObject();var o=t.getObject();if(o)switch(o.command){case"f":s.free=!0;break;case"n":s.uncompressed=!0}if(!Number.isInteger(s.offset)||!Number.isInteger(s.gen)||!s.free&&!s.uncompressed)throw new Ki("Invalid entry in cross reference subsection: "+n+", "+r);0===a&&s.free&&1===n&&(n=0),this._entries[a+n]||(this._entries[a+n]=s)}this._tableState.entryNum=0,this._tableState.streamPos=i.position,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second,this._tableState.firstEntryNum=void 0,this._tableState.entryCount=void 0}if(this._entries[0]&&!this._entries[0].free)throw new Ki("Invalid XRef table: unexpected first object");return e},e.prototype._processXRefStream=function(t){if(void 0===this._streamState){var e=t.dictionary,i=new In,n=e.getArray("Index");n||(n=[0,e.get("Size")]),i.entryRanges=n,i.byteWidths=e.getArray("W"),i.entryNum=0,i.streamPos=t.position,this._streamState=i}return this._readXRefStream(t),this._streamState=void 0,t.dictionary},e.prototype._readXRefStream=function(t){t.position=this._streamState.streamPos;for(var e=this._streamState.byteWidths[0],i=this._streamState.byteWidths[1],n=this._streamState.byteWidths[2],r=this._streamState.entryRanges;r.length>0;){var a=r[0],s=r[1];if(!Number.isInteger(a)||!Number.isInteger(s))throw new Ki("Invalid XRef range fields: "+a+", "+s);if(!Number.isInteger(e)||!Number.isInteger(i)||!Number.isInteger(n))throw new Ki("Invalid XRef entry fields length: "+a+", "+s);for(var o=this._streamState.entryNum;o<s;++o){this._streamState.entryNum=o,this._streamState.streamPos=t.position;for(var h=0,c=0,_=0,d=0;d<e;++d){var p=t.getByte();if(-1===p)throw new Ki("invalid cross reference byte width type.");h=h<<8|p}0===e&&(h=1);for(d=0;d<i;++d){var l=t.getByte();if(-1===l)throw new Ki("invalid cross reference byte width offset.");c=c<<8|l}for(d=0;d<n;++d){var u=t.getByte();if(-1===u)throw new Ki("invalid cross reference byte width generation.");_=_<<8|u}var f=new Tn;switch(f.offset=c,f.gen=_,h){case 0:f.free=!0;break;case 1:f.uncompressed=!0;break;case 2:break;default:throw new Ki("Invalid XRef entry type: "+h)}this._entries[a+o]||(this._entries[a+o]=f)}this._streamState.entryNum=0,this._streamState.streamPos=t.position,r.splice(0,2)}},e.prototype._getCatalogObj=function(){return this._root},e.prototype._save=function(){var e=this,i=this._stream.length,n=[this._newLine.charCodeAt(0),this._newLine.charCodeAt(1),37,80,68,70,45];this._writeString(""+this._version+this._newLine,n),n.push(37,131,146,250,254),this._writeString(this._newLine,n);var r=0,s=0;if(this._type===t.PdfCrossReferenceType.stream){var o=[],h=[],c="",d=[];d.push(0,1);var p=[],l=[];this._cacheMap.forEach((function(t,r){var a,o;(t instanceof q&&(a=t.dictionary),a&&a._updated&&(!a.isCatalog||e._allowCatalog))&&(d.push(r.objectNumber,1),l.push(i+n.length),e._encrypt&&(o=e._encrypt._createCipherTransform(r.objectNumber,r.generationNumber)),e._writeObject(t,n,r,o),s++,a._updated=!1)})),this._cacheMap.forEach((function(t,a){if(t instanceof _)!t._updated||t.isCatalog&&!e._allowCatalog||(c+=a.objectNumber+" "+h.length+e._newLine,p.push(a.objectNumber,1),r++,e._writeObject(t,h));else if(t instanceof q){var o=t.dictionary;o&&o._updated&&(!o.isCatalog||e._allowCatalog)&&(d.push(a.objectNumber,1),l.push(i+n.length),e._writeObject(t,n,a),s++,o._updated=!1)}}));for(var u=0;u<p.length;u++)d.push(p[parseInt(u.toString(),10)]);var f=void 0,g=void 0;if(r>0){g=this._getNextReference(),d.push(g.objectNumber,2),this._writeString(c,o),this._writeBytes(h,o);var y=new _(this);y.set("Type",a.get("ObjStm")),y.set("N",r),y.set("First",c.length),y.set("Length",o.length);var m,b=new K(o,y,0,o.length);f=i+n.length,this._encrypt&&(m=this._encrypt._createCipherTransform(g.objectNumber,g.generationNumber)),this._writeObject(b,n,g,m)}var v=this._getNextReference(),w=i+n.length;(T=new _(this)).set("Type",a.get("XRef")),T.set("Index",d),T.set("W",[1,3,1]),this._copyTrailer(T),this._ids&&this._ids.length>0&&T.update("ID",[this._ids[0],this._computeMessageDigest(w)]);var S=[];if(this._writeLong(0,1,S),this._writeLong(1,3,S),this._writeLong(-1,1,S),s>0)for(var P=0;P<s;P++)this._writeLong(1,1,S),this._writeLong(l[P],3,S),this._writeLong(0,1,S);if(r>0){for(P=0;P<r;P++)this._writeLong(2,1,S),this._writeLong(g.objectNumber,3,S),this._writeLong(P,1,S);this._writeLong(1,1,S),this._writeLong(f,3,S),this._writeLong(0,1,S)}this._writeLong(1,1,S),this._writeLong(w,3,S),this._writeLong(0,1,S),T.set("Length",S.length);var A=new K(S,T,0,S.length),x=void 0;this._encrypt&&(x=this._encrypt._createCipherTransform(v.objectNumber,v.generationNumber)),this._writeObject(A,n,v,x,!0),this._writeString("startxref"+this._newLine+w+this._newLine+"%%EOF"+this._newLine,n)}else{var k="";this._cacheMap.forEach((function(t,a){var s;if(t instanceof _?s=t:t instanceof q&&(s=t.dictionary),s&&s._updated&&(!s.isCatalog||e._allowCatalog)){for(var o=(i+n.length).toString();o.length<10;)o="0"+o;for(var h=a.generationNumber.toString();h.length<5;)h="0"+h;k+=a.objectNumber+" 1"+e._newLine+o+" "+h+" n"+e._newLine,r++,e._writeObject(t,n,a)}}));w=n.length+i;this._writeString("xref"+this._newLine+"0 1"+this._newLine+"0000000000 65535 f"+this._newLine,n),r>0&&this._writeString(k,n),this._writeString("trailer"+this._newLine,n);var T=new _(this);this._copyTrailer(T),this._writeDictionary(T,n,this._newLine),this._writeString("startxref"+this._newLine+w+this._newLine+"%%EOF"+this._newLine,n)}var R=new Uint8Array(this._stream.length+n.length);return R.set(this._stream.bytes),R.set(n,this._stream.length),R},e.prototype._copyTrailer=function(t){t.set("Size",this._nextReferenceNumber),t.set("Prev",this._prevStartXref);var e=this._trailer.getRaw("Root");null!=e&&t.set("Root",e);var i=this._trailer.getRaw("Info");null!=i&&t.set("Info",i);var n=this._trailer.getRaw("Encrypt");null!=n&&t.set("Encrypt",n)},e.prototype._computeMessageDigest=function(t){var e=this,i=[Math.floor(Date.now()/1e3).toString(),"",t.toString()],n=this._trailer.getRaw("Info"),r=new _;n&&n.forEach((function(t,e){e&&"string"==typeof e&&r.set(t,Ke(e))})),r.forEach((function(t,e){i.push(e)}));var a=[];return i.forEach((function(t){e._writeString(t,a)})),Ze((new pn).hash(new Uint8Array(a)))},e.prototype._getNextReference=function(){return new o(this._nextReferenceNumber++,0)},e.prototype._writeObject=function(t,e,i,n,r){i&&i instanceof o&&this._writeString(i.objectNumber+" "+i.generationNumber+" obj"+this._newLine,e),t instanceof _?this._writeDictionary(t,e,this._newLine,n,r):t instanceof q&&this._writeStream(t,e,n,r),i&&i instanceof o&&this._writeString("endobj"+this._newLine,e)},e.prototype._writeDictionary=function(t,e,i,n,r){var a=this;t._currentObj&&t._currentObj._beginSave(),this._writeString("<<"+i,e),t.forEach((function(t,s){a._writeString("/"+Si(t)+" ",e),a._writeValue(s,e,n,r),a._writeString(i,e)})),this._writeString(">>"+this._newLine,e)},e.prototype._writeStream=function(t,e,i,n){var r=[],a=t.getString();!n&&i&&(a=i.encryptString(a)),this._writeString(a,r),t.dictionary.update("Length",r.length),this._writeDictionary(t.dictionary,e,this._newLine,i,n),this._writeString("stream"+this._newLine,e),this._writeBytes(r,e),this._writeString(this._newLine+"endstream"+this._newLine,e)},e.prototype._writeValue=function(t,e,i,n){if(t instanceof a)this._writeString("/"+Si(t.name),e);else if(t instanceof o)this._writeString(t.toString()+" R",e);else if(Array.isArray(t)){this._writeString("[",e);for(var r=!0,s=0,h=t;s<h.length;s++){var c=h[s];r?r=!1:this._writeString(" ",e),this._writeValue(c,e,i,n)}this._writeString("]",e)}else"string"==typeof t?(!n&&i&&(t=i.encryptString(t)),this._writeString("("+this._escapeString(t)+")",e)):"number"==typeof t?this._writeString(Je(t),e):"boolean"==typeof t?this._writeString(t.toString(),e):t instanceof _?this._writeDictionary(t,e,this._newLine,i,n):t instanceof q?this._writeStream(t,e,i,n):null===t&&this._writeString("null",e)},e.prototype._writeString=function(t,e){for(var i=0;i<t.length;i++)e.push(255&t.charCodeAt(i))},e.prototype._writeBytes=function(t,e){for(var i=0;i<t.length;i++)e.push(t[i])},e.prototype._writeLong=function(t,e,i){for(var n=e-1;n>=0;--n)i.push(t>>(n<<3)&255)},e.prototype._escapeString=function(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\"+t}))},e.prototype._destroy=function(){this._entries=void 0,this._pendingRefs.clear(),this._pendingRefs=void 0,this._cacheMap.clear(),this._pendingRefs=void 0,this._root=void 0,this._startXRefQueue=[],this._startXRefQueue=void 0,this._stream=void 0,this._streamState=void 0,this._tableState=void 0,this._topDictionary=void 0,this._trailer=void 0,this._version=void 0,this._crossReferencePosition=void 0},e}(),Tn=function(){},Rn=function(){},In=function(){},Fn=function(){function e(t,e){this._hasKids=!1,this._setAppearance=!1,this._dictionary=t,this._crossReference=e,this._parsedFields=new Map,this._fields=[],this._createFields()}return Object.defineProperty(e.prototype,"count",{get:function(){return void 0!==this._fields?this._fields.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needAppearances",{get:function(){return void 0===this._needAppearances&&this._dictionary.has("NeedAppearances")&&(this._needAppearances=this._dictionary.get("NeedAppearances")),this._needAppearances},enumerable:!0,configurable:!0}),e.prototype.fieldAt=function(e){if(e<0||e>=this._fields.length)throw Error("Index out of range.");var i;if(this._parsedFields.has(e))i=this._parsedFields.get(e);else{var n=void 0,r=this._fields[e];if(r&&(n=this._crossReference._fetch(r)),n){var a=ni(n,"FT",!1,!0,"Parent"),s=0,o=ni(n,"Ff",!1,!0,"Parent");if(void 0!==o&&(s=o),a)switch(a.name.toLowerCase()){case"tx":i=Ut._load(this,n,this._crossReference,r);break;case"btn":i=0!=(s&t._FieldFlag.pushButton)?Vt._load(this,n,this._crossReference,r):0!=(s&t._FieldFlag.radio)?Ht._load(this,n,this._crossReference,r):Wt._load(this,n,this._crossReference,r);break;case"ch":i=0!=(s&t._FieldFlag.combo)?Gt._load(this,n,this._crossReference,r):qt._load(this,n,this._crossReference,r);break;case"sig":i=new Kt(this,n,this._crossReference,r)}this._parsedFields.set(e,i)}}return i},e.prototype.add=function(t){if(this._fields.push(t._ref),this._dictionary.update("Fields",this._fields),this._parsedFields.set(this._fields.length-1,t),t._form=this,this._crossReference._allowCatalog=!0,this._crossReference._root._updated=!0,t.itemsCount>0)for(var e=0;e<t.itemsCount;e++){var i=t.itemAt(e);(n=i._page).annotations._annotations.push(i._ref),n._pageDictionary.set("Annots",n.annotations._annotations),n._pageDictionary._updated=!0}else if(t._dictionary.has("Subtype")&&"Widget"===t._dictionary.get("Subtype").name){var n;(n=t._page).annotations._annotations.push(t._ref),t._page._pageDictionary.set("Annots",t.page.annotations._annotations),t._page._pageDictionary._updated=!0}return this._fields.length-1},e.prototype.setDefaultAppearance=function(t){this._setAppearance=!t,this._needAppearances=t,this._dictionary.update("NeedAppearances",t)},e.prototype._createFields=function(){var t;this._dictionary.has("Fields")&&(t=this._dictionary.get("Fields"));for(var e=0,i=[];null!=t;){for(;e<t.length;e++){var n=t[e],r=void 0;n&&(r=this._crossReference._fetch(n));var a=void 0;if(r&&r.has("Kids")&&void 0!==(a=r.get("Kids"))&&a.length>0)for(var s=0;s<a.length;s++){var o=this._crossReference._fetch(a[s]);void 0===o||o.has("Parent")||o.update("Parent",n)}if(void 0===a)void 0!==r&&-1===this._fields.indexOf(n)&&this._fields.push(n);else!r.has("FT")||this._isNode(a)?(i.push({fields:t,count:e}),this._hasKids=!0,e=-1,t=a):this._fields.push(n)}if(0===i.length)break;var h=i.pop();t=h.fields,e=h.count+1}},e.prototype._isNode=function(t){var e=!1;if(void 0!==t&&t.length>0){var i=t[0],n=void 0;if(i instanceof _?n=i:i instanceof o&&(n=this._crossReference._fetch(i)),void 0!==n&&n.has("Subtype")){var r=n.get("Subtype");r&&"Widget"!==r.name&&(e=!0)}}return e},e.prototype._parseWidgetReferences=function(){var t=this;return void 0===this._widgetReferences&&this.count>0&&(this._widgetReferences=[],this._fields.forEach((function(e){var i=t._crossReference._fetch(e);if(i)if(i.has("Kids")){var n=i.get("Kids");n&&n.length>0&&n.forEach((function(e){var i;if(e instanceof _?i=e:e instanceof o&&(i=t._crossReference._fetch(e)),void 0!==i&&i.has("Subtype")){var n=i.get("Subtype");n&&"Widget"===n.name&&t._widgetReferences.push(e)}}))}else t._widgetReferences.push(e)}))),this._widgetReferences},e.prototype._doPostProcess=function(t){for(var e=0;e<this.count;e++){var i=this.fieldAt(e);i&&i._doPostProcess(t)}},e}(),Nn=function(){function t(t){void 0===t&&(t=!1),this._position=0,this._bufferText="",this._buffer=new Uint8Array(0),this._namespaceStack=[],this._elementStack=[],t?(this._currentState="StartDocument",this._skipNamespace=!0):(this._currentState="Initial",this._namespaceStack.push(new Cn),this._elementStack.push(new Bn),this._namespaceStack[0]._set("xmlns","http://www.w3.org/2000/xmlns/","Special"),this._namespaceStack.push(new Cn),this._namespaceStack[1]._set("xml","http://www.w3.org/XML/1998/namespace","Special"),this._namespaceStack.push(new Cn),this._namespaceStack[2]._set("","","Implied"),this._elementStack[0]._set("","","",this._namespaceStack.length-1)),this._attributeStack=[]}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this._flush(),this._buffer},enumerable:!0,configurable:!0}),t.prototype._writeProcessingInstruction=function(t,e){if(null==t||0===t.length)throw new Error("ArgumentException: name should not be undefined, null or empty");if(this._checkName(t),null==e&&(e=""),3===t.length&&"xml"===t&&"Initial"!==this._currentState)throw new Error("InvalidArgumentException: Cannot write XML declaration.");if("Initial"!==this._currentState||void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");this._writeStartDocument(),this._writeProcessingInstructionInternal(t,e)},t.prototype._writeStartDocument=function(t){if("Initial"!==this._currentState||void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");this._currentState="StartDocument",this._rawText('<?xml version="1.0" encoding="utf-8'),null!=t&&(this._rawText('" standalone="'),this._rawText(t?"yes":"no")),this._rawText('"?>')},t.prototype._writeEndDocument=function(){for(;this._elementStack.length-1>0;)this._writeEndElement();this._currentState="EndDocument",this._flush()},t.prototype._writeStartElement=function(t,e,i){if(void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");if(null==t||0===t.length)throw new Error("ArgumentException: localName cannot be undefined, null or empty");if(this._checkName(t),"Initial"===this._currentState&&this._writeStartDocument(),"StartElement"===this._currentState&&this._startElementContent(),this._currentState="StartElement",null==e)null!=i&&(e=this._lookupPrefix(i)),null==e&&(e="");else if(e.length>0&&(null==i&&(i=this._lookupNamespace(e)),null==i||void 0!==i&&0===i.length))throw new Error("ArgumentException: Cannot use a prefix with an empty namespace");null==i&&(i=this._lookupNamespace(e)),this._writeStartElementInternal(e,t,i)},t.prototype._writeEndElement=function(){"StartElement"===this._currentState?(this._startElementContent(),this._currentState="ElementContent"):"ElementContent"===this._currentState&&(this._currentState="ElementContent"),this._currentState="EndElement";var t=this._elementStack.length-1;this._writeEndElementInternal(this._elementStack[Number.parseInt(t.toString(),10)]._prefix,this._elementStack[Number.parseInt(t.toString(),10)]._localName),this._namespaceStack.splice(this._elementStack[Number.parseInt(t.toString(),10)]._previousTop+1),this._elementStack.splice(t),this._bufferText.length>10240&&this._flush()},t.prototype._writeElementString=function(t,e,i,n){this._writeStartElement(t,i,n),null!=e&&0!==e.length&&this._writeString(e),this._writeEndElement()},t.prototype._writeAttributeString=function(t,e,i,n){this._writeStartAttribute(t,e,i,n),this._writeStringInternal(e,!0),this._writeEndAttribute()},t.prototype._writeString=function(t){this._writeInternal(t,!1)},t.prototype._writeRaw=function(t){this._writeInternal(t,!0)},t.prototype._writeInternal=function(t,e){if(null!=t){if("StartElement"!==this._currentState&&"ElementContent"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");"StartElement"===this._currentState&&this._startElementContent(),this._currentState="ElementContent",e?this._rawText(t):this._writeStringInternal(t,!1)}},t.prototype._save=function(){for(;this._elementStack.length-1>0;)this._writeEndElement();return""!==this._bufferText&&this._flush(),this._buffer},t.prototype._destroy=function(){this._buffer=void 0;for(var t=0;t<this._namespaceStack.length;t++)this._namespaceStack[Number.parseInt(t.toString(),10)]._destroy();this._namespaceStack=[];for(t=0;t<this._elementStack.length;t++)this._elementStack[Number.parseInt(t.toString(),10)]._destroy();this._elementStack=[],this._bufferText="",this._position=0},t.prototype._flush=function(){if(this._buffer&&this._bufferText&&""!==this._bufferText){if(this._buffer.length>0){for(var t=new Array(this._bufferText.length),e=0;e<this._bufferText.length;e++)t[Number.parseInt(e.toString(),10)]=255&this._bufferText.charCodeAt(e);var i=new Uint8Array(this._buffer.length+t.length);i.set(this._buffer),i.set(t,this._buffer.length),this._buffer=i}else this._buffer=Xe(this._bufferText);this._bufferText=""}},t.prototype._writeProcessingInstructionInternal=function(t,e){this._bufferText+="<?",this._rawText(t),e.length>0&&(this._bufferText+=" ",e=e.replace(/\?\>/g,"? >"),this._bufferText+=e),this._bufferText+="?",this._bufferText+=">"},t.prototype._writeStartAttribute=function(t,e,i,n){if(null==t||0===t.length){if("xmlns"!==i)throw new Error("ArgumentException: localName cannot be undefined, null or empty");t="xmlns",i=""}if("StartElement"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");this._checkName(t),this._writeStartAttributePrefixAndNameSpace(t,e,i,n)},t.prototype._writeStartAttributePrefixAndNameSpace=function(t,e,i,n){null==i&&(null!=n&&("xmlns"===t&&"http://www.w3.org/2000/xmlns/"===n||(i=this._lookupPrefix(n))),null==i&&(i="")),null==n&&(null!=i&&i.length>0&&(n=this._lookupNamespace(i)),null==n&&(n="")),this._writeStartAttributeSpecialAttribute(i,t,n,e)},t.prototype._writeStartAttributeSpecialAttribute=function(t,e,i,n){if(0===t.length){if("x"===e[0]&&"xmlns"===e)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit("",n);i.length>0&&(t=this._lookupPrefix(i))}else{if("x"===t[0]){if("xmlns"===t)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit(e,n);if("xml"===t&&("space"===e||"lang"===e))return void this._skipPushAndWrite(t,e,i)}0===i.length&&(t="")}null!=t&&0!==t.length&&this._pushNamespaceImplicit(t,i),this._skipPushAndWrite(t,e,i)},t.prototype._writeEndAttribute=function(){this._currentState="StartElement",this._bufferText+='"'},t.prototype._writeStartElementInternal=function(t,e,i){this._bufferText+="<",t.length>0&&(this._rawText(t),this._bufferText+=":"),this._rawText(e);var n=this._elementStack.length;this._elementStack.push(new Bn),this._elementStack[Number.parseInt(n.toString(),10)]._set(t,e,i,this._namespaceStack.length-1),this._pushNamespaceImplicit(t,i);for(var r=0;r<this._attributeStack.length;r++)this._attributeStack[Number.parseInt(r.toString(),10)]._destroy();this._attributeStack=[]},t.prototype._writeEndElementInternal=function(t,e){this._position!==this._bufferText.length+1?(this._bufferText+="</",null!=t&&0!==t.length&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+=">"):(this._bufferText=this._bufferText.substring(0,this._bufferText.length-1),this._bufferText+=" />")},t.prototype._writeStartAttributeInternal=function(t,e){this._bufferText+=" ",null!=t&&t.length>0&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+='="'},t.prototype._writeNamespaceDeclaration=function(t,e){this._skipNamespace||(this._writeStartNamespaceDeclaration(t),this._writeStringInternal(e,!0),this._bufferText+='"')},t.prototype._writeStartNamespaceDeclaration=function(t){null==t||0===t.length?this._rawText(' xmlns="'):(this._rawText(" xmlns:"),this._rawText(t),this._bufferText+="=",this._bufferText+='"')},t.prototype._writeStringInternal=function(t,e){null==t&&(t=""),t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),e&&(t=t.replace(/\"/g,"&quot;")),this._bufferText+=t,e||(this._position=0)},t.prototype._startElementContent=function(){for(var t=this._elementStack[this._elementStack.length-1]._previousTop,e=this._namespaceStack.length-1;e>t;e--)"NeedToWrite"===this._namespaceStack[Number.parseInt(e.toString(),10)]._kind&&this._writeNamespaceDeclaration(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix,this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri);this._bufferText+=">",this._position=this._bufferText.length+1},t.prototype._rawText=function(t){this._bufferText+=t},t.prototype._addNamespace=function(t,e,i){var n=this._namespaceStack.length;this._namespaceStack.push(new Cn),this._namespaceStack[Number.parseInt(n.toString(),10)]._set(t,e,i)},t.prototype._lookupPrefix=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix},t.prototype._lookupNamespace=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri},t.prototype._lookupNamespaceIndex=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return e;return-1},t.prototype._pushNamespaceImplicit=function(t,e){var i,n=this._lookupNamespaceIndex(t),r=!0;if(-1!==n)if(n>this._elementStack[this._elementStack.length-1]._previousTop){if(this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri!==e)throw new Error("XmlException namespace Uri needs to be the same as the one that is already declared");r=!1}else if("Special"===this._namespaceStack[Number.parseInt(n.toString(),10)]._kind){if("xml"!==t)throw new Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.');if(e!==this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri)throw new Error("InvalidArgumentException: Xml String");i="Implied"}else i=this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri===e?"Implied":"NeedToWrite";else{if("http://www.w3.org/XML/1998/namespace"===e&&"xml"!==t||"http://www.w3.org/2000/xmlns/"===e&&"xmlns"!==t)throw new Error("InvalidArgumentException");i="NeedToWrite"}r&&this._addNamespace(t,e,i)},t.prototype._pushNamespaceExplicit=function(t,e){var i=this._lookupNamespaceIndex(t);-1!==i&&i>this._elementStack[this._elementStack.length-1]._previousTop?this._namespaceStack[Number.parseInt(i.toString(),10)]._kind="Written":this._addNamespace(t,e,"Written")},t.prototype._addAttribute=function(t,e,i){var n=this._attributeStack.length;this._attributeStack.push(new Mn),this._attributeStack[Number.parseInt(n.toString(),10)]._set(t,e,i);for(var r=0;r<n;r++)if(this._attributeStack[Number.parseInt(r.toString(),10)]._isDuplicate(t,e,i))throw new Error("XmlException: duplicate attribute name")},t.prototype._skipPushAndWrite=function(t,e,i){this._addAttribute(t,e,i),this._writeStartAttributeInternal(t,e)},t.prototype._checkName=function(t){if(/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(t))throw new Error("InvalidArgumentException: invalid name character")},t}(),Cn=function(){function t(){}return t.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=e,this._kind=i},t.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._kind=void 0},t}(),Bn=function(){function t(){}return t.prototype._set=function(t,e,i,n){this._previousTop=n,this._prefix=t,this._namespaceUri=i,this._localName=e},t.prototype._destroy=function(){this._previousTop=void 0,this._prefix=void 0,this._localName=void 0,this._namespaceUri=void 0},t}(),Mn=function(){function t(){}return t.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=i,this._localName=e},t.prototype._isDuplicate=function(t,e,i){return this._localName===e&&(this._prefix===t||this._namespaceUri===i)},t.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._localName=void 0},t}(),Ln=(Gi=function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Gi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),On=function(){},En=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._filePath="",e._richTextPrefix='<?xml version="1.0"?>',e._groupReferences=new Map,e._groupHolders=[],e}return Ln(e,t),e.prototype._exportAnnotations=function(t){return this._document=t,this._isAnnotationExport=!0,this._save()},e.prototype._save=function(){var t=new Nn;if(t._writeStartDocument(),t._writeStartElement("xfdf"),t._writeAttributeString(null,"http://ns.adobe.com/xfdf/","xmlns",null),t._writeAttributeString("space","preserve","xml",null),this._isAnnotationExport){if(t._writeStartElement("annots"),this._document)for(var e=0;e<this._document.pageCount;e++)for(var i=this._document.getPage(e).annotations,n=0;n<i.count;n++){var r=i.at(n);r&&(!this._annotationTypes||0===this._annotationTypes.length||this._annotationTypes&&this._annotationTypes.length>0&&this._checkAnnotationType(r))&&this._exportAnnotationData(r,t,e)}t._writeEndElement()}return t._writeStartElement("f"),t._writeAttributeString("href",this._filePath),t._save()},e.prototype._checkAnnotationType=function(t){return void 0!==t._type&&-1!==this._annotationTypes.indexOf(t._type)},e.prototype._exportAnnotationData=function(t,e,i){t._dictionary&&!(t instanceof he||t instanceof de||t instanceof _e||t instanceof ce)&&this._writeAnnotationData(e,i,t)},e.prototype._writeAnnotationData=function(t,e,i){var n,r,a=!1;i instanceof Yt?(n=i,r=i._dictionary):r=i;var s=this._getAnnotationType(r);if(this._skipBorderStyle=!1,s&&""!==s){this._annotationAttributes||(this._annotationAttributes=[]),t._writeStartElement(s.toLowerCase()),t._writeAttributeString("page",e.toString());var o=void 0;switch(s){case"Line":o=n.linePoints,t._writeAttributeString("start",o[0].toString()+","+o[1].toString()),t._writeAttributeString("end",o[2].toString()+","+o[3].toString());break;case"Stamp":case"Square":a=!0}if(r&&r.has("BE")&&r.has("BS")){var h=r.get("BE");h&&h.has("S")&&(this._skipBorderStyle=!0)}this._writeDictionary(r,e,t,a),t._writeEndElement(),this._annotationAttributes=[]}},e.prototype._writeDictionary=function(t,e,i,n){var r=this,a=!1;if(t.has("Type")){var s=t.get("Type");a=s&&"Border"===s.name&&this._skipBorderStyle}if(t.forEach((function(s,h){if((n||"AP"!==s)&&"P"!==s&&"Parent"!==s){var c=void 0;if(h instanceof o&&(c=t.get(s)),c&&c instanceof _)switch(s){case"BS":case"BE":r._writeDictionary(c,e,i,!1);break;case"IRT":c.has("NM")&&i._writeAttributeString("inreplyto",r._getValue(c.get("NM")))}else h instanceof _?r._writeDictionary(h,e,i,!1):(!a||a&&"S"!==s)&&r._writeAttribute(i,s,h)}})),(this.exportAppearance||n)&&t.has("AP")){var h=this._getAppearanceString(t.get("AP"));h&&h.length>0&&(i._writeStartElement("appearance"),i._writeRaw(ii(h)),i._writeEndElement())}if(t.has("Measure")&&this._exportMeasureDictionary(t.get("Measure"),i),t.has("Sound")){var c=t.get("Sound");if(c&&c.dictionary){var d=c.dictionary;if(d.has("B")&&i._writeAttributeString("bits",this._getValue(d.get("B"))),d.has("C")&&i._writeAttributeString("channels",this._getValue(d.get("C"))),d.has("E")&&i._writeAttributeString("encoding",this._getValue(d.get("E"))),d.has("R")&&i._writeAttributeString("rate",this._getValue(d.get("R"))),c.length>0)(f=$e(c.getBytes(c.length)))&&""!==f&&(i._writeStartElement("data"),i._writeAttributeString("MODE","raw"),i._writeAttributeString("encoding","hex"),d.has("Length")&&i._writeAttributeString("length",this._getValue(d.get("Length"))),d.has("Filter")&&i._writeAttributeString("filter",this._getValue(d.get("Filter"))),i._writeRaw(f),i._writeEndElement())}}else if(t.has("FS")){var p=t.get("FS");if(p&&(p.has("F")&&i._writeAttributeString("file",this._getValue(p.get("F"))),p.has("EF"))){var l=p.get("EF");if(l&&l.has("F")){var u=l.get("F");if(u&&u.dictionary){var f,g=u.dictionary;if(g.has("Params")){var y=g.get("Params");if(y){if(y.has("CreationDate")){var m=this._getValue(y.get("CreationDate"));i._writeAttributeString("creation",m)}if(y.has("ModificationDate")){var m=this._getValue(y.get("ModificationDate"));i._writeAttributeString("modification",m)}if(y.has("Size")&&i._writeAttributeString("size",this._getValue(y.get("Size"))),y.has("CheckSum")){var b=$e(Xe(m=this._getValue(y.get("CheckSum"))));i._writeAttributeString("checksum",b)}}}(f=$e(u.getBytes(u.length)))&&""!==f&&(i._writeStartElement("data"),i._writeAttributeString("MODE","raw"),i._writeAttributeString("encoding","hex"),g.has("Length")&&i._writeAttributeString("length",this._getValue(g.get("Length"))),g.has("Filter")&&i._writeAttributeString("filter",this._getValue(g.get("Filter"))),i._writeRaw(f),i._writeEndElement())}}}}if(t.has("Vertices")){i._writeStartElement("vertices");var v=t.getArray("Vertices");if(v&&v.length>0){var w=v.length;if(w%2==0){for(var m="",S=0;S<w-1;S++)m+=this._getValue(v[Number.parseInt(S.toString(),10)])+(S%2!=0?";":",");(m+=this._getValue(v[w-1]))&&""!==m&&i._writeRaw(m)}}i._writeEndElement()}if(t.has("Popup")){var P=t.get("Popup");P&&this._writeAnnotationData(i,e,P)}if(t.has("DA")){var A=t.get("DA");A&&this._writeRawData(i,"defaultappearance",A)}if(t.has("DS")){var x=t.get("DS");x&&this._writeRawData(i,"defaultstyle",x)}if(t.has("InkList")){var k=t.getArray("InkList");if(k&&k.length>0){i._writeStartElement("inklist");for(var T=0;T<k.length;T++)i._writeElementString("gesture",this._getValue(k[Number.parseInt(T.toString(),10)]));i._writeEndElement()}}if(t.has("RC")&&((m=t.get("RC"))&&""!==m)){var R=m.indexOf("<body");R>0&&(m=m.substring(R)),this._writeRawData(i,"contents-richtext",m)}t.has("Contents")&&((m=t.get("Contents"))&&m.length>0&&(i._writeStartElement("contents"),i._writeString(m),i._writeEndElement()))},e.prototype._getAppearanceString=function(t){var e=new Nn(!0);return e._writeStartElement("DICT"),e._writeAttributeString("KEY","AP"),this._writeAppearanceDictionary(e,t),e._writeEndElement(),e.buffer},e.prototype._writeAppearanceDictionary=function(t,e){var i=this;e&&e.size>0&&e.forEach((function(n,r){i._writeObject(t,r instanceof o?e.get(n):r,e,n)}))},e.prototype._writeObject=function(t,e,i,n){if(e)if(e instanceof a)this._writePrefix(t,"NAME",n),t._writeAttributeString("VAL",e.name),t._writeEndElement();else if(Array.isArray(e))this._writePrefix(t,"ARRAY",n),this._writeArray(t,i.getArray(n),i),t._writeEndElement();else if("string"==typeof e)this._writePrefix(t,"STRING",n),t._writeAttributeString("VAL",e),t._writeEndElement();else if("number"==typeof e){if(Number.isInteger(e))this._writePrefix(t,"INT",n),t._writeAttributeString("VAL",e.toString());else{this._writePrefix(t,"FIXED",n);var r=e.toFixed(6);-1===r.indexOf(".")&&(r+=".000000"),t._writeAttributeString("VAL",r)}t._writeEndElement()}else if("boolean"==typeof e)this._writePrefix(t,"BOOL",n),t._writeAttributeString("VAL",e?"true":"false"),t._writeEndElement();else if(e instanceof _)this._writePrefix(t,"DICT",n),this._writeAppearanceDictionary(t,e),t._writeEndElement();else if(null===e)this._writePrefix(t,"NULL",n),t._writeEndElement();else if(e instanceof q&&e.dictionary){var s=e.dictionary;this._writePrefix(t,"STREAM",n),t._writeAttributeString("DEFINE",""),this._writeAppearanceDictionary(t,s),t._writeStartElement("DATA");var o=s.get("Length");if(o>0&&s.has("Subtype")&&"Image"===this._getValue(s.get("Subtype"))||!s.has("Type")&&!s.has("Subtype"))t._writeAttributeString("MODE","RAW"),t._writeAttributeString("ENCODING","HEX"),(h=e.getString())&&""!==h&&t._writeRaw(h);else if(o>0){var h;t._writeAttributeString("MODE","FILTERED"),t._writeAttributeString("ENCODING","ASCII"),(h=e.getString())&&""!==h&&t._writeRaw(h)}t._writeEndElement(),t._writeEndElement()}},e.prototype._writePrefix=function(t,e,i){t._writeStartElement(e),i&&t._writeAttributeString("KEY",i)},e.prototype._writeArray=function(t,e,i){var n=this;e.forEach((function(e){n._writeObject(t,e,i)}))},e.prototype._getFormatedString=function(t,e){return void 0===e&&(e=!1),t=e?(t=(t=t.replace("&amp;","&")).replace("&lt;","<")).replace("&gt;",">"):(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},e.prototype._writeAttribute=function(t,e,i){if(this._annotationAttributes&&-1===this._annotationAttributes.indexOf(e))switch(e){case"C":this._writeColor(t,i,"color","c");break;case"IC":this._writeColor(t,i,"interior-color");break;case"M":this._writeAttributeString(t,"date",i);break;case"NM":this._writeAttributeString(t,"name",i);break;case"Name":this._writeAttributeString(t,"icon",i);break;case"Subj":this._writeAttributeString(t,"subject",i);break;case"T":this._writeAttributeString(t,"title",i);break;case"Rotate":this._writeAttributeString(t,"rotation",i);break;case"W":this._writeAttributeString(t,"width",i);break;case"LE":i&&Array.isArray(i)?2===i.length&&(t._writeAttributeString("head",this._getValue(i[0])),t._writeAttributeString("tail",this._getValue(i[1]))):i instanceof a&&this._writeAttributeString(t,"head",i);break;case"S":if(-1===this._annotationAttributes.indexOf("style")){switch(this._getValue(i)){case"D":t._writeAttributeString("style","dash");break;case"C":t._writeAttributeString("style","cloudy");break;case"S":t._writeAttributeString("style","solid");break;case"B":t._writeAttributeString("style","bevelled");break;case"I":t._writeAttributeString("style","inset");break;case"U":t._writeAttributeString("style","underline")}this._annotationAttributes.push("style")}break;case"D":this._writeAttributeString(t,"dashes",i);break;case"I":this._writeAttributeString(t,"intensity",i);break;case"RD":this._writeAttributeString(t,"fringe",i);break;case"IT":this._writeAttributeString(t,"IT",i);break;case"RT":this._writeAttributeString(t,"replyType",i,!0);break;case"LL":this._writeAttributeString(t,"leaderLength",i);break;case"LLE":this._writeAttributeString(t,"leaderExtend",i);break;case"Cap":this._writeAttributeString(t,"caption",i);break;case"Q":this._writeAttributeString(t,"justification",i);break;case"CP":this._writeAttributeString(t,"caption-style",i);break;case"CL":this._writeAttributeString(t,"callout",i);break;case"QuadPoints":this._writeAttributeString(t,"coords",i);break;case"CA":this._writeAttributeString(t,"opacity",i);break;case"F":if("number"==typeof i&&-1===this._annotationAttributes.indexOf("flags")){var n=qe(i);t._writeAttributeString("flags",n),this._annotationAttributes.push("flags")}break;case"InkList":case"Type":case"Subtype":case"P":case"Parent":case"L":case"Contents":case"RC":case"DA":case"DS":case"FS":case"MeasurementTypes":case"Vertices":case"GroupNesting":case"ITEx":break;default:this._writeAttributeString(t,e.toLowerCase(),i)}},e.prototype._writeAttributeString=function(t,e,i,n){if(void 0===n&&(n=!1),-1===this._annotationAttributes.indexOf(e)){var r=this._getValue(i);t._writeAttributeString(e,n?r.toLowerCase():r),this._annotationAttributes.push(e)}},e.prototype._writeRawData=function(t,e,i){i&&""!==i&&(t._writeStartElement(e),t._writeRaw(i),t._writeEndElement())},e.prototype._writeColor=function(t,e,i,n){var r=this._getColor(e);if("number"==typeof e&&n){var a=this._getValue(e);a&&""!==a&&-1===this._annotationAttributes.indexOf(n)&&(t._writeAttributeString(n,a),this._annotationAttributes.push(n))}r&&""!==r&&-1===this._annotationAttributes.indexOf(i)&&(t._writeAttributeString(i,r),this._annotationAttributes.push(i))},e.prototype._getValue=function(t){var e="";if(null!=t)if(t instanceof a)e=t.name;else if("boolean"==typeof t)e=t?"yes":"no";else if("string"==typeof t)e=t;else if(Array.isArray(t)){var i=t;i.length>0&&(e=this._getValue(i[0]));for(var n=1;n<i.length;n++)e+=","+this._getValue(i[Number.parseInt(n.toString(),10)])}else"number"==typeof t&&(e=t.toString());return e},e.prototype._getColor=function(t){var e="";if(t&&Array.isArray(t)&&t.length>=3){var i=Math.round(255*t[0]).toString(16).toUpperCase(),n=Math.round(255*t[1]).toString(16).toUpperCase(),r=Math.round(255*t[2]).toString(16).toUpperCase();e="#"+(1===i.length?"0"+i:i)+(1===n.length?"0"+n:n)+(1===r.length?"0"+r:r)}return e},e.prototype._getAnnotationType=function(t){var e="";if(t.has("Subtype")){var i=t.get("Subtype");i&&(e=i.name)}return e},e.prototype._exportMeasureDictionary=function(t,e){if(e._writeStartElement("measure"),t){if(t.has("R")&&e._writeAttributeString("rateValue",this._getValue(t.get("R"))),t.has("A")){var i=t.getArray("A");e._writeStartElement("area"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}if(t.has("D")){i=t.getArray("D");e._writeStartElement("distance"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}if(t.has("X")){i=t.getArray("X");e._writeStartElement("xformat"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}}e._writeEndElement()},e.prototype._exportMeasureFormatDetails=function(t,e){t.has("C")&&e._writeAttributeString("c",this._getValue(t.get("C"))),t.has("F")&&e._writeAttributeString("f",this._getValue(t.get("F"))),t.has("D")&&e._writeAttributeString("d",this._getValue(t.get("D"))),t.has("RD")&&e._writeAttributeString("rd",this._getValue(t.get("RD"))),t.has("U")&&e._writeAttributeString("u",this._getValue(t.get("U"))),t.has("RT")&&e._writeAttributeString("rt",this._getValue(t.get("RT"))),t.has("SS")&&e._writeAttributeString("ss",this._getValue(t.get("SS"))),t.has("FD")&&e._writeAttributeString("fd",this._getValue(t.get("FD")))},e}(On),zn=function(){function e(t,e){if(this._headerSignature=new Uint8Array([37,80,68,70,45]),this._startXrefSignature=new Uint8Array([115,116,97,114,116,120,114,101,102]),this._endObjSignature=new Uint8Array([101,110,100,111,98,106]),this._version="",!t)throw new Error("PDF data cannot be undefined or null");this._stream=new K("string"==typeof t?ei(t):t),this._crossReference=new kn(this,e),this._pages=new Map,this._checkHeader(),this._crossReference._setStartXRef(this._startXRef);try{this._parse(!1)}catch(t){if("XRefParseException"!==t.name)throw t;this._parse(!0)}this._crossReference._version=this._version}return Object.defineProperty(e.prototype,"_linearization",{get:function(){if(!this._linear){var t=void 0;try{t=new cn(this._stream)}catch(t){}this._linear=t}return this._linear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_startXRef",{get:function(){var t=this._stream,e=0;if(this._linearization&&this._linearization.isValid)t.reset(),this._find(t,this._endObjSignature)&&(e=t.position+6-t.start);else{for(var i=this._startXrefSignature.length,n=!1,r=t.end;!n&&r>0;)(r-=1024-i)<0&&(r=0),t.position=r,n=this._find(t,this._startXrefSignature,1024,!0);if(n){t.skip(9);var a=void 0;do{a=t.getByte()}while(ti(a));for(var s="";a>=32&&a<=57;)s+=String.fromCharCode(a),a=t.getByte();e=parseInt(s,10),isNaN(e)&&(e=0)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return void 0===this._pageCount&&(this._pageCount=0,this._linearization&&this._linearization.isValid?this._pageCount=this._linearization.pageCount:this._pageCount=this._catalog.pageCount),this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return void 0===this._form&&(this._form=new Fn(this._catalog.acroForm,this._crossReference)),this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flatten",{get:function(){return this._flatten},set:function(t){this._flatten=t},enumerable:!0,configurable:!0}),e.prototype.getPage=function(t){var e=this._pages.get(t);if(e)return e;var i,n=this._catalog,r=this._linearization;i=r&&r.isValid&&r.pageFirst===t?this._getLinearizationPage(t):n.getPageDictionary(t);var a=new Be(this._crossReference,t,i.dictionary,i.reference);return this._pages.set(t,a),a},e.prototype.save=function(e,i){if(this._doPostProcess(this._flatten),"string"!=typeof e)return e&&void 0===i&&this._crossReference._type!==t.PdfCrossReferenceType.stream&&(this._crossReference._type=e),this._crossReference._save();i&&this._crossReference._type!==t.PdfCrossReferenceType.stream&&(this._crossReference._type=i),sf.fileutils.Save.save(e,new Blob([this._crossReference._save()],{type:"application/pdf"}))},e.prototype.saveAsBlob=function(){var t=this;return new Promise((function(e){e({blobData:new Blob([t._crossReference._save()],{type:"application/pdf"})})}))},e.prototype.exportAnnotations=function(e,i){var n,r;if(this._doPostProcessOnAnnotations(),e&&e instanceof Dn?r=e:i&&i instanceof Dn&&(r=i),r?(r.dataFormat===t.AnnotationDataFormat.fdf||r.dataFormat===t.AnnotationDataFormat.json||(n=new En),n.exportAppearance=r.exportAppearance):n=new En,!e||"string"!=typeof e)return n._exportAnnotations(this);sf.fileutils.Save.save(e,new Blob([n._exportAnnotations(this)],{type:"text/plain"}))},e.prototype.destroy=function(){this._crossReference&&(this._crossReference._destroy(),this._crossReference=void 0),this._catalog&&(this._catalog._destroy(),this._catalog=void 0),this._endObjSignature=void 0,this._headerSignature=void 0,this._pages&&this._pages.size>0&&this._pages.forEach((function(t){t._destroy()})),this._pages.clear(),this._pages=void 0,this._startXrefSignature=void 0,this._stream=void 0,this._form=void 0,p()},e.prototype._getLinearizationPage=function(t){var e=this._catalog,i=this._linearization,n=this._crossReference,r=o.get(i.objectNumberFirst,0);try{var a=n._fetch(r);if(a instanceof _)if(l(a.get("Type"),"Page")||!a.has("Type")&&!a.has("Kids"))return e.pageKidsCountCache.has(r)||e.pageKidsCountCache.put(r,1),e.pageIndexCache.has(r)||e.pageIndexCache.put(r,0),{dictionary:a,reference:r};throw new Ki("The Linearization dictionary does not point to a valid Page dictionary.")}catch(i){return e.getPageDictionary(t)}},e.prototype._checkHeader=function(){var t=this._stream;if(t.reset(),this._find(t,this._headerSignature)){t.moveStart();for(var e="",i=t.getByte();i>32&&!(e.length>=12);)e+=String.fromCharCode(i),i=t.getByte();this._version||(this._version=e.substring(5))}},e.prototype._parse=function(t){this._crossReference._parse(t),this._catalog=new nn(this._crossReference),this._catalog.version&&(this._version=this._catalog.version)},e.prototype._find=function(t,e,i,n){void 0===i&&(i=1024),void 0===n&&(n=!1);var r=e.length,a=t.peekBytes(i),s=a.length-r;if(s<=0)return!1;if(n)for(var o=r-1,h=a.length-1;h>=o;){for(var c=0;c<r&&a[h-c]===e[o-c];)c++;if(c>=r)return t.position+=h-o,!0;h--}else for(h=0;h<=s;){for(c=0;c<r&&a[h+c]===e[c];)c++;if(c>=r)return t.position+=h,!0;h++}return!1},e.prototype._doPostProcess=function(t){void 0===t&&(t=!1),this._doPostProcessOnFormFields(t),this._doPostProcessOnAnnotations(t)},e.prototype._doPostProcessOnFormFields=function(t){if(void 0===t&&(t=!1),this.form._doPostProcess(t),t){var e=this._catalog._catalogDictionary.getRaw("AcroForm"),i=new _;i._updated=!0,e instanceof o?this._crossReference._cacheMap.set(e,i):(this.form._dictionary=new _,this.form._dictionary._updated=!0,this._crossReference._allowCatalog=!0)}},e.prototype._doPostProcessOnAnnotations=function(t){void 0===t&&(t=!1);for(var e=0;e<this.pageCount;e++){var i=this.getPage(e);i.annotations._doPostProcess(t),t&&i._pageDictionary.has("Annots")&&(delete i._pageDictionary._map.Annots,i._pageDictionary._updated=!0)}},e.prototype._addWatermarkText=function(){if(this.pageCount>0)for(var e=0;e<this._pageCount;e++){var i=this.getPage(e);if(i)try{var n=i._graphics;n._save(),n._setTransparency(.2),n._drawRectangle(0,0,i.size[0],33.75,new Ve([255,255,255])),n._restore(),n._save(),n._setTransparency(.5);var r=new At(t._PdfFontFamily.helvetica,12,t._PdfFontStyle.regular),a=new nt(t.PdfTextAlignment.center,t._PdfVerticalAlignment.middle);n._drawString("Created with a trial version of Syncfusion Essential PDF",r,[0,0,i.size[0],33.75],null,new Ve([0,0,0]),a),n._restore()}catch(t){}}},e}(),Dn=function(){function e(){this._format=t.AnnotationDataFormat.xfdf}return Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._format},set:function(t){this._format=t},enumerable:!0,configurable:!0}),e}();return t._PdfBaseStream=q,t._PdfStream=K,t._PdfContentStream=X,t._PdfNullStream=Q,t._PdfDecodeStream=Y,t._StreamsSequenceStream=Z,t._PdfDecryptStream=tt,t._PdfFlateStream=en,t._PdfCatalog=nn,t._PdfCrossReference=kn,t.PdfDocument=zn,t.PdfAnnotationExportSettings=Dn,t.PdfPage=Be,t.PdfDestination=Me,t._PdfLexicalOperator=on,t._PdfParser=hn,t._Linearization=cn,t._PdfName=a,t._PdfCommand=s,t._PdfReference=o,t._PdfReferenceSet=h,t._PdfReferenceSetCache=c,t._PdfDictionary=_,t._PdfNull=d,t._clearPrimitiveCaches=p,t._isName=l,t._isCommand=u,t.PdfPredictorStream=an,t._annotationFlagsToString=qe,t._stringToAnnotationFlags=function(e){switch(e){case"hidden":return t.PdfAnnotationFlag.hidden;case"invisible":return t.PdfAnnotationFlag.invisible;case"locked":return t.PdfAnnotationFlag.locked;case"norotate":return t.PdfAnnotationFlag.noRotate;case"noview":return t.PdfAnnotationFlag.noView;case"nozoom":return t.PdfAnnotationFlag.noZoom;case"print":return t.PdfAnnotationFlag.print;case"readonly":return t.PdfAnnotationFlag.readOnly;case"togglenoview":return t.PdfAnnotationFlag.toggleNoView;default:return t.PdfAnnotationFlag.default}},t._stringToPdfString=Ke,t._stringToBytes=Xe,t._areArrayEqual=Qe,t._numberToString=Je,t._areNotEqual=Ye,t._bytesToString=Ze,t._byteArrayToHexString=$e,t._hexStringToByteArray=function(t,e){void 0===e&&(e=!1);var i=[];if(t)for(var n=0;n<t.length;n+=2)i.push(parseInt(t.substring(n,2),16));return e?i:new Uint8Array(i)},t._isWhiteSpace=ti,t._decode=ei,t._encode=ii,t._getInheritableProperty=ni,t._parseRectangle=ri,t._calculateBounds=ai,t._toRectangle=si,t._fromRectangle=oi,t._getUpdatedBounds=hi,t._convertToColor=ci,t._parseColor=_i,t._mapBorderStyle=di,t._mapBorderEffectStyle=pi,t._reverseMapEndingStyle=li,t._mapLineEndingStyle=ui,t._mapHighlightMode=fi,t._reverseMapHighlightMode=gi,t._reverseMapBlendMode=yi,t._mapBlendMode=mi,t._floatToString=bi,t._addProcSet=vi,t._getNewGuidString=wi,t._escapePdfName=Si,t._getBezierArc=Pi,t._findPage=Ai,t._getItemValue=xi,t._getStateTemplate=ki,t._getColorValue=Ti,t._setMatrix=Ri,t._styleToString=Ii,t._stringToStyle=Fi,t._mapMeasurementUnit=Ni,t._mapMarkupAnnotationType=Ci,t._reverseMarkupAnnotationType=Bi,t._mapGraphicsUnit=Mi,t._mapRubberStampIcon=Li,t._mapPopupIcon=Oi,t._reverseMapAnnotationState=Ei,t._reverseMapAnnotationStateModel=zi,t._mapAttachmentIcon=Di,t._mapAnnotationIntent=ji,t._reverseMapPdfFontStyle=Ui,t.BaseException=qi,t.FormatError=Ki,t.ParserEndOfFileException=Xi,t.PdfAnnotationCollection=Ce,t.PdfAnnotation=Yt,t.PdfLineAnnotation=Zt,t.PdfCircleAnnotation=$t,t.PdfEllipseAnnotation=te,t.PdfSquareAnnotation=ee,t.PdfRectangleAnnotation=ie,t.PdfPolygonAnnotation=ne,t.PdfPolyLineAnnotation=re,t.PdfAngleMeasurementAnnotation=ae,t.PdfInkAnnotation=se,t.PdfPopupAnnotation=oe,t.PdfFileLinkAnnotation=he,t.PdfUriAnnotation=ce,t.PdfDocumentLinkAnnotation=_e,t.PdfTextWebLinkAnnotation=de,t.PdfAttachmentAnnotation=pe,t.Pdf3DAnnotation=le,t.PdfTextMarkupAnnotation=ue,t.PdfWatermarkAnnotation=fe,t.PdfRubberStampAnnotation=ge,t.PdfSoundAnnotation=ye,t.PdfFreeTextAnnotation=me,t.PdfRedactionAnnotation=be,t.PdfRichMediaAnnotation=ve,t.PdfWidgetAnnotation=we,t.PdfStateItem=Se,t.PdfRadioButtonListItem=Pe,t.PdfListFieldItem=Ae,t.PdfAnnotationCaption=xe,t.PdfAnnotationLineEndingStyle=ke,t.PdfInteractiveBorder=Te,t.PdfAnnotationBorder=Re,t.PdfBorderEffect=Ie,t._PaintParameter=Fe,t._PdfFontMetrics=ot,t._WidthTable=ht,t._StandardWidthTable=ct,t._CjkWidthTable=_t,t._CjkWidth=dt,t._CjkSameWidth=pt,t._CjkDifferentWidth=lt,t._PdfFont=Pt,t._PdfStandardFont=At,t._PdfCjkStandardFont=xt,t._PdfStandardFontMetricsFactory=kt,t._PdfCjkStandardFontMetricsFactory=Tt,t._PdfCjkFontDescriptorFactory=Rt,t._PdfStringFormat=nt,t._PdfStringLayouter=ut,t._PdfStringLayoutResult=ft,t._LineInfo=gt,t.PdfField=jt,t.PdfTextBoxField=Ut,t.PdfButtonField=Vt,t.PdfCheckBoxField=Wt,t.PdfRadioButtonListField=Ht,t.PdfComboBoxField=Gt,t.PdfListBoxField=qt,t.PdfSignatureField=Kt,t._PdfDefaultAppearance=Xt,t.PdfForm=Fn,t._PdfGraphics=Oe,t._PdfTransformationMatrix=Ee,t._Matrix=ze,t._PdfGraphicsState=De,t._PdfBrush=Ve,t._PdfPen=We,t._PdfUnitConvertor=He,t._PdfPath=Ft,t._PdfStreamWriter=Le,t._PdfTemplate=it,t._PdfEncryptor=dn,t._MD5=pn,t._Sha256=ln,t._Sha512=un,t._Word64=fn,t._EncryptionKey=gn,t._BasicEncryption=yn,t._AdvancedEncryption=mn,t._Cipher=bn,t._NormalCipherFour=vn,t._AdvancedEncryptionBaseCipher=wn,t._AdvancedEncryption128Cipher=Sn,t._AdvancedEncryption256Cipher=Pn,t._NullCipher=An,t._CipherTransform=xn,t._ExportHelper=On,t._XfdfDocument=En,t._XmlWriter=Nn,t._Namespace=Cn,t._XmlElement=Bn,t._XmlAttribute=Mn,t},sf.pdf=sf.pdf({})}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=21.1.undefined`).then(()=>{})})();